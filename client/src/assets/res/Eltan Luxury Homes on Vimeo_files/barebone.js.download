/* VimeoPlayer - v4.29.10 - 2024-04-25 - https://player.vimeo.com/NOTICE.txt */
!function(t){"use strict";var n={object:!0,symbol:!0},i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function e(t,n,i){return t(i={path:n,exports:{},require:function(t,n){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==n&&i.path)}},i.exports),i.exports}var r,o,u,s,a=function(t){return null!=t},c=Object.keys,h=function(){try{return Object.keys("primitive"),!0}catch(t){return!1}}()?Object.keys:function(t){return c(a(t)?Object(t):t)},f=function(t){if(!a(t))throw new TypeError("Cannot use null or undefined");return t},l=Math.max,v=function(){var t,n=Object.assign;return"function"==typeof n&&(n(t={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),t.foo+t.bar+t.trzy==="razdwatrzy")}()?Object.assign:function(t,n){var i,e,r,o=l(arguments.length,2);for(t=Object(f(t)),r=function(e){try{t[e]=n[e]}catch(t){i||(i=t)}},e=1;e<o;++e)h(n=arguments[e]).forEach(r);if(void 0!==i)throw i;return t},d=Array.prototype.forEach,p=Object.create,m=function(t,n){var i;for(i in t)n[i]=t[i]},y=function(t){var n=p(null);return d.call(arguments,(function(t){a(t)&&m(Object(t),n)})),n},w=function(t){return"function"==typeof t},b="razdwatrzy",g=String.prototype.indexOf,E="function"==typeof b.contains&&!0===b.contains("dwa")&&!1===b.contains("foo")?String.prototype.contains:function(t){return g.call(this,t,arguments[1])>-1},_=e((function(t){(t.exports=function(t,n){var i,e,r,o,u;return arguments.length<2||"string"!=typeof t?(o=n,n=t,t=null):o=arguments[2],null==t?(i=r=!0,e=!1):(i=E.call(t,"c"),e=E.call(t,"e"),r=E.call(t,"w")),u={value:n,configurable:i,enumerable:e,writable:r},o?v(y(o),u):u}).gs=function(t,n,i){var e,r,o,u;return"string"!=typeof t?(o=i,i=n,n=t,t=null):o=arguments[3],null==n?n=void 0:w(n)?null==i?i=void 0:w(i)||(o=i,i=void 0):(o=n,n=i=void 0),null==t?(e=!0,r=!1):(e=E.call(t,"c"),r=E.call(t,"e")),u={get:n,set:i,configurable:e,enumerable:r},o?v(y(o),u):u}})),k=function(t){if(!function(t){return!!t&&("symbol"==typeof t||!!t.constructor&&"Symbol"===t.constructor.name&&"Symbol"===t[t.constructor.toStringTag])}(t))throw new TypeError(t+" is not a symbol");return t},T=Object.create,S=Object.defineProperties,A=Object.defineProperty,M=Object.prototype,O=T(null);if("function"==typeof Symbol){r=Symbol;try{String(r()),s=!0}catch(t){}}var R=function(){var t=T(null);return function(n){for(var i,e,r=0;t[n+(r||"")];)++r;return t[n+=r||""]=!0,A(M,i="@@"+n,_.gs(null,(function(t){e||(e=!0,A(this,i,_(t)),e=!1)}))),i}}();u=function(t){if(this instanceof u)throw new TypeError("TypeError: Symbol is not a constructor");return o(t)};var I=o=function t(n){var i;if(this instanceof t)throw new TypeError("TypeError: Symbol is not a constructor");return s?r(n):(i=T(u.prototype),n=void 0===n?"":String(n),S(i,{t:_("",n),i:_("",R(n))}))};S(o,{for:_((function(t){return O[t]?O[t]:O[t]=o(String(t))})),keyFor:_((function(t){var n;for(n in k(t),O)if(O[n]===t)return n})),hasInstance:_("",r&&r.hasInstance||o("hasInstance")),isConcatSpreadable:_("",r&&r.isConcatSpreadable||o("isConcatSpreadable")),iterator:_("",r&&r.iterator||o("iterator")),match:_("",r&&r.match||o("match")),replace:_("",r&&r.replace||o("replace")),search:_("",r&&r.search||o("search")),species:_("",r&&r.species||o("species")),split:_("",r&&r.split||o("split")),toPrimitive:_("",r&&r.toPrimitive||o("toPrimitive")),toStringTag:_("",r&&r.toStringTag||o("toStringTag")),unscopables:_("",r&&r.unscopables||o("unscopables"))}),S(u.prototype,{constructor:_(o),toString:_("",(function(){return this.i}))}),S(o.prototype,{toString:_((function(){return"Symbol ("+k(this).t+")"})),valueOf:_((function(){return k(this)}))}),A(o.prototype,o.toPrimitive,_("",(function(){var t=k(this);return"symbol"==typeof t?t:t.toString()}))),A(o.prototype,o.toStringTag,_("c","Symbol")),A(u.prototype,o.toStringTag,_("c",o.prototype[o.toStringTag])),A(u.prototype,o.toPrimitive,_("c",o.prototype[o.toPrimitive]));var C=function(){var t;if("function"!=typeof Symbol)return!1;t=Symbol("test symbol");try{String(t)}catch(t){return!1}return!!n[typeof Symbol.iterator]&&!!n[typeof Symbol.toPrimitive]&&!!n[typeof Symbol.toStringTag]}()?Symbol:I;if(function(){for(var t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n){var i=t[n];window.requestAnimationFrame=window[i+"RequestAnimationFrame"],window.cancelAnimationFrame=window[i+"CancelAnimationFrame"]||window[i+"CancelRequestAnimationFrame"]}!/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)&&window.requestAnimationFrame&&window.cancelAnimationFrame||(window.requestAnimationFrame=function(t){return setTimeout(t,0)},window.cancelAnimationFrame=clearTimeout)}(),Number.isInteger||(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}),"undefined"!=typeof DOMTokenList&&!function(){var t=document.createElement("div");return t.classList.toggle("test-class",!1),!t.classList.contains("test-class")}()){var N=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(t,n){!0!==n?!1!==n?N.call(this,t):this.remove(t):this.add(t)}}function j(t){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function D(t,n){for(var i=0;i<n.length;i++){var e=n[i];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}function U(t,n,i){return n&&D(t.prototype,n),i&&D(t,i),t}function x(t,n,i){return n in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i,t}function L(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);n&&(e=e.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),i.push.apply(i,e)}return i}function P(t){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?L(Object(i),!0).forEach((function(n){x(t,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):L(Object(i)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(i,n))}))}return t}function F(t,n){t.prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n}function H(t){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function V(t,n){return(V=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function B(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function q(t,n,i){return(q=B()?Reflect.construct:function(t,n,i){var e=[null];e.push.apply(e,n);var r=new(Function.bind.apply(t,e));return i&&V(r,i.prototype),r}).apply(null,arguments)}function G(t){var n="function"==typeof Map?new Map:void 0;return(G=function(t){if(null===t||!function(t){return-1!==Function.toString.call(t).indexOf("[native code]")}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,i)}function i(){return q(t,arguments,H(this).constructor)}return i.prototype=Object.create(t.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),V(i,t)})(t)}function W(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Y(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var i=[],e=!0,r=!1,o=void 0;try{for(var u,s=t[Symbol.iterator]();!(e=(u=s.next()).done)&&(i.push(u.value),!n||i.length!==n);e=!0);}catch(t){r=!0,o=t}finally{try{e||null==s.return||s.return()}finally{if(r)throw o}}return i}}(t,n)||K(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(t){return function(t){if(Array.isArray(t))return z(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||K(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(t,n){if(t){if("string"==typeof t)return z(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?z(t,n):void 0}}function z(t,n){(null==n||n>t.length)&&(n=t.length);for(var i=0,e=new Array(n);i<n;i++)e[i]=t[i];return e}function J(t,n){return t===n||t!=t&&n!=n}function X(t,n){for(var i=t.length;i--;)if(J(t[i][0],n))return i;return-1}"function"!=typeof Object.assign&&(Object.assign=function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),i=1;i<arguments.length;i++){var e=arguments[i];if(null!=e)for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r])}return n}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(t){for(var n=Object(this),i=n.length>>>0,e=arguments[1],r=0;r<i;){var o=n[r];if(t.call(e,o,r,n))return o;r++}}}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(t){for(var n=Object(this),i=n.length>>>0,e=arguments[1],r=0;r<i;){var o=n[r];if(t.call(e,o,r,n))return r;r++}return-1}}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(t,n){if(null==this)throw new TypeError('"this" is null or not defined');var i=Object(this),e=i.length>>>0;if(0===e)return!1;var r=0|n,o=Math.max(r>=0?r:e-Math.abs(r),0);function u(t,n){return t===n||"number"==typeof t&&"number"==typeof n&&isNaN(t)&&isNaN(n)}for(;o<e;){if(u(i[o],t))return!0;o++}return!1}}),String.prototype.includes||(String.prototype.includes=function(t,n){return"number"!=typeof n&&(n=0),!(n+t.length>this.length)&&-1!==this.indexOf(t,n)}),Object.values||(Object.values=function(t){return Object.keys(t).map((function(n){return t[n]}))}),String.prototype.startsWith||(String.prototype.startsWith=function(t,n){return this.slice(n||0,t.length)===t}),String.prototype.endsWith||(String.prototype.endsWith=function(t,n){return(void 0===n||n>this.length)&&(n=this.length),this.substring(n-t.length,n)===t}),Number.isNaN=Number.isNaN||function(t){return"number"==typeof t&&t!=t},void 0===Number.parseFloat&&(Number.parseFloat=window.parseFloat),void 0===Number.parseInt&&(Number.parseInt=window.parseInt),void 0===Number.isFinite&&(Number.isFinite=function(t){return"number"==typeof t&&isFinite(t)}),Array.prototype.entries||(Array.prototype.entries=function(){var t,n=this,i=0;function e(){}return e.prototype.next=function(){return i>n.length-1&&(t=!0),t?{value:void 0,done:!0}:{value:[i,n[i++]],done:!1}},e.prototype[C.iterator]=function(){return this},new e}),Array.prototype[C.iterator]||(Array.prototype[C.iterator]=function(){var t,n=this,i=0;function e(){}return e.prototype.next=function(){return i>n.length-1&&(t=!0),t?{value:void 0,done:!0}:{value:n[i++],done:!1}},e.prototype[C.iterator]=function(){return this},new e}),Object.entries||(Object.entries=function(t){for(var n=Object.keys(t),i=n.length,e=new Array(i);i--;)e[i]=[n[i],t[n[i]]];return e}),Object.is||Object.defineProperty(Object,"is",{value:function(t,n){return t===n?0!==t||1/t==1/n:t!=t&&n!=n}}),"classList"in SVGElement.prototype||Object.defineProperty(SVGElement.prototype,"classList",{get:function(){var t=this;return{contains:function(n){return-1!==t.className.baseVal.split(" ").indexOf(n)},add:function(n){var i=(t.getAttribute("class")+" "+n).trim();return t.setAttribute("class",i)},remove:function(n){var i=t.getAttribute("class")||"",e=new RegExp("(?:^|\\s)"+n+"(?!\\S)","g");i=i.replace(e,"").trim(),t.setAttribute("class",i)},toggle:function(t){this.contains(t)?this.remove(t):this.add(t)}}}});var Q=Array.prototype.splice;function Z(t){var n=-1,i=null==t?0:t.length;for(this.clear();++n<i;){var e=t[n];this.set(e[0],e[1])}}Z.prototype.clear=function(){this.u=[],this.size=0},Z.prototype.delete=function(t){var n=this.u,i=X(n,t);return!(i<0||(i==n.length-1?n.pop():Q.call(n,i,1),--this.size,0))},Z.prototype.get=function(t){var n=this.u,i=X(n,t);return i<0?void 0:n[i][1]},Z.prototype.has=function(t){return X(this.u,t)>-1},Z.prototype.set=function(t,n){var i=this.u,e=X(i,t);return e<0?(++this.size,i.push([t,n])):i[e][1]=n,this};var tt="object"==("undefined"==typeof global?"undefined":j(global))&&global&&global.Object===Object&&global,nt="object"==("undefined"==typeof self?"undefined":j(self))&&self&&self.Object===Object&&self,it=tt||nt||Function("return this")(),et=it.Symbol,rt=Object.prototype,ot=rt.hasOwnProperty,ut=rt.toString,st=et?et.toStringTag:void 0,at=Object.prototype.toString,ct=et?et.toStringTag:void 0;function ht(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":ct&&ct in Object(t)?function(t){var n=ot.call(t,st),i=t[st];try{t[st]=void 0;var e=!0}catch(t){}var r=ut.call(t);return e&&(n?t[st]=i:delete t[st]),r}(t):function(t){return at.call(t)}(t)}function ft(t){var n=j(t);return null!=t&&("object"==n||"function"==n)}function lt(t){if(!ft(t))return!1;var n=ht(t);return"[object Function]"==n||"[object GeneratorFunction]"==n||"[object AsyncFunction]"==n||"[object Proxy]"==n}var vt=it["h"],dt=function(){var t=/[^.]+$/.exec(vt&&vt.keys&&vt.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),pt=Function.prototype.toString;function mt(t){if(null!=t){try{return pt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var yt=/^\[object .+?Constructor\]$/,wt=Function.prototype,bt=Object.prototype,gt=wt.toString,Et=bt.hasOwnProperty,_t=RegExp("^"+gt.call(Et).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function kt(t,n){var i=function(t,n){return null==t?void 0:t[n]}(t,n);return function(t){return!(!ft(t)||function(t){return!!dt&&dt in t}(t))&&(lt(t)?_t:yt).test(mt(t))}(i)?i:void 0}var Tt=kt(it,"Map"),St=kt(Object,"create"),At=Object.prototype.hasOwnProperty,Mt=Object.prototype.hasOwnProperty;function Ot(t){var n=-1,i=null==t?0:t.length;for(this.clear();++n<i;){var e=t[n];this.set(e[0],e[1])}}function Rt(t,n){var i=t.u;return function(t){var n=j(t);return"string"==n||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==t:null===t}(n)?i["string"==typeof n?"string":"hash"]:i.map}function It(t){var n=-1,i=null==t?0:t.length;for(this.clear();++n<i;){var e=t[n];this.set(e[0],e[1])}}function Ct(t){var n=this.u=new Z(t);this.size=n.size}Ot.prototype.clear=function(){this.u=St?St(null):{},this.size=0},Ot.prototype.delete=function(t){var n=this.has(t)&&delete this.u[t];return this.size-=n?1:0,n},Ot.prototype.get=function(t){var n=this.u;if(St){var i=n[t];return"__lodash_hash_undefined__"===i?void 0:i}return At.call(n,t)?n[t]:void 0},Ot.prototype.has=function(t){var n=this.u;return St?void 0!==n[t]:Mt.call(n,t)},Ot.prototype.set=function(t,n){var i=this.u;return this.size+=this.has(t)?0:1,i[t]=St&&void 0===n?"__lodash_hash_undefined__":n,this},It.prototype.clear=function(){this.size=0,this.u={hash:new Ot,map:new(Tt||Z),string:new Ot}},It.prototype.delete=function(t){var n=Rt(this,t).delete(t);return this.size-=n?1:0,n},It.prototype.get=function(t){return Rt(this,t).get(t)},It.prototype.has=function(t){return Rt(this,t).has(t)},It.prototype.set=function(t,n){var i=Rt(this,t),e=i.size;return i.set(t,n),this.size+=i.size==e?0:1,this},Ct.prototype.clear=function(){this.u=new Z,this.size=0},Ct.prototype.delete=function(t){var n=this.u,i=n.delete(t);return this.size=n.size,i},Ct.prototype.get=function(t){return this.u.get(t)},Ct.prototype.has=function(t){return this.u.has(t)},Ct.prototype.set=function(t,n){var i=this.u;if(i instanceof Z){var e=i.u;if(!Tt||e.length<199)return e.push([t,n]),this.size=++i.size,this;i=this.u=new It(e)}return i.set(t,n),this.size=i.size,this};var Nt=function(){try{var t=kt(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();function jt(t,n,i){"__proto__"==n&&Nt?Nt(t,n,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[n]=i}var Dt=Object.prototype.hasOwnProperty;function Ut(t,n,i){var e=t[n];Dt.call(t,n)&&J(e,i)&&(void 0!==i||n in t)||jt(t,n,i)}function xt(t,n,i,e){var r=!i;i||(i={});for(var o=-1,u=n.length;++o<u;){var s=n[o],a=e?e(i[s],t[s],s,i,t):void 0;void 0===a&&(a=t[s]),r?jt(i,s,a):Ut(i,s,a)}return i}function Lt(t){return null!=t&&"object"==j(t)}function Pt(t){return Lt(t)&&"[object Arguments]"==ht(t)}var Ft=Object.prototype,Ht=Ft.hasOwnProperty,Vt=Ft.propertyIsEnumerable,Bt=Pt(function(){return arguments}())?Pt:function(t){return Lt(t)&&Ht.call(t,"callee")&&!Vt.call(t,"callee")},qt=Array.isArray,Gt="object"==(void 0===t?"undefined":j(t))&&t&&!t.nodeType&&t,Wt=Gt&&"object"==("undefined"==typeof module?"undefined":j(module))&&module&&!module.nodeType&&module,Yt=Wt&&Wt.exports===Gt?it.Buffer:void 0,$t=(Yt?Yt.isBuffer:void 0)||function(){return!1},Kt=/^(?:0|[1-9]\d*)$/;function zt(t,n){var i=j(t);return!!(n=null==n?9007199254740991:n)&&("number"==i||"symbol"!=i&&Kt.test(t))&&t>-1&&t%1==0&&t<n}function Jt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}var Xt={};function Qt(t){return function(n){return t(n)}}Xt["[object Float32Array]"]=Xt["[object Float64Array]"]=Xt["[object Int8Array]"]=Xt["[object Int16Array]"]=Xt["[object Int32Array]"]=Xt["[object Uint8Array]"]=Xt["[object Uint8ClampedArray]"]=Xt["[object Uint16Array]"]=Xt["[object Uint32Array]"]=!0,Xt["[object Arguments]"]=Xt["[object Array]"]=Xt["[object ArrayBuffer]"]=Xt["[object Boolean]"]=Xt["[object DataView]"]=Xt["[object Date]"]=Xt["[object Error]"]=Xt["[object Function]"]=Xt["[object Map]"]=Xt["[object Number]"]=Xt["[object Object]"]=Xt["[object RegExp]"]=Xt["[object Set]"]=Xt["[object String]"]=Xt["[object WeakMap]"]=!1;var Zt="object"==(void 0===t?"undefined":j(t))&&t&&!t.nodeType&&t,tn=Zt&&"object"==("undefined"==typeof module?"undefined":j(module))&&module&&!module.nodeType&&module,nn=tn&&tn.exports===Zt&&tt.process,en=function(){try{return tn&&tn.require&&tn.require("util").types||nn&&nn.binding&&nn.binding("util")}catch(t){}}(),rn=en&&en.isTypedArray,on=rn?Qt(rn):function(t){return Lt(t)&&Jt(t.length)&&!!Xt[ht(t)]},un=Object.prototype.hasOwnProperty;function sn(t,n){var i=qt(t),e=!i&&Bt(t),r=!i&&!e&&$t(t),o=!i&&!e&&!r&&on(t),u=i||e||r||o,s=u?function(t,n){for(var i=-1,e=Array(t);++i<t;)e[i]=n(i);return e}(t.length,String):[],a=s.length;for(var c in t)!n&&!un.call(t,c)||u&&("length"==c||r&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||zt(c,a))||s.push(c);return s}var an=Object.prototype;function cn(t){var n=t&&t.constructor;return t===("function"==typeof n&&n.prototype||an)}function hn(t,n){return function(i){return t(n(i))}}var fn=hn(Object.keys,Object),ln=Object.prototype.hasOwnProperty;function vn(t){if(!cn(t))return fn(t);var n=[];for(var i in Object(t))ln.call(t,i)&&"constructor"!=i&&n.push(i);return n}function dn(t){return null!=t&&Jt(t.length)&&!lt(t)}function pn(t){return dn(t)?sn(t):vn(t)}var mn=Object.prototype.hasOwnProperty;function yn(t){return dn(t)?sn(t,!0):function(t){if(!ft(t))return function(t){var n=[];if(null!=t)for(var i in Object(t))n.push(i);return n}(t);var n=cn(t),i=[];for(var e in t)("constructor"!=e||!n&&mn.call(t,e))&&i.push(e);return i}(t)}var wn="object"==(void 0===t?"undefined":j(t))&&t&&!t.nodeType&&t,bn=wn&&"object"==("undefined"==typeof module?"undefined":j(module))&&module&&!module.nodeType&&module,gn=bn&&bn.exports===wn?it.Buffer:void 0,En=gn?gn.allocUnsafe:void 0;function _n(t,n){if(n)return t.slice();var i=t.length,e=En?En(i):new t.constructor(i);return t.copy(e),e}function kn(t,n){var i=-1,e=t.length;for(n||(n=Array(e));++i<e;)n[i]=t[i];return n}function Tn(){return[]}var Sn=Object.prototype.propertyIsEnumerable,An=Object.getOwnPropertySymbols,Mn=An?function(t){return null==t?[]:(t=Object(t),function(t,n){for(var i=-1,e=null==t?0:t.length,r=0,o=[];++i<e;){var u=t[i];n(u)&&(o[r++]=u)}return o}(An(t),(function(n){return Sn.call(t,n)})))}:Tn;function On(t,n){for(var i=-1,e=n.length,r=t.length;++i<e;)t[r+i]=n[i];return t}var Rn=hn(Object.getPrototypeOf,Object),In=Object.getOwnPropertySymbols?function(t){for(var n=[];t;)On(n,Mn(t)),t=Rn(t);return n}:Tn;function Cn(t,n,i){var e=n(t);return qt(t)?e:On(e,i(t))}function Nn(t){return Cn(t,pn,Mn)}function jn(t){return Cn(t,yn,In)}var Dn=kt(it,"DataView"),Un=kt(it,"Promise"),xn=kt(it,"Set"),Ln=kt(it,"WeakMap"),Pn=mt(Dn),Fn=mt(Tt),Hn=mt(Un),Vn=mt(xn),Bn=mt(Ln),qn=ht;(Dn&&"[object DataView]"!=qn(new Dn(new ArrayBuffer(1)))||Tt&&"[object Map]"!=qn(new Tt)||Un&&"[object Promise]"!=qn(Un.resolve())||xn&&"[object Set]"!=qn(new xn)||Ln&&"[object WeakMap]"!=qn(new Ln))&&(qn=function(t){var n=ht(t),i="[object Object]"==n?t.constructor:void 0,e=i?mt(i):"";if(e)switch(e){case Pn:return"[object DataView]";case Fn:return"[object Map]";case Hn:return"[object Promise]";case Vn:return"[object Set]";case Bn:return"[object WeakMap]"}return n});var Gn=qn,Wn=Object.prototype.hasOwnProperty,Yn=it.Uint8Array;function $n(t){var n=new t.constructor(t.byteLength);return new Yn(n).set(new Yn(t)),n}var Kn=/\w*$/,zn=et?et.prototype:void 0,Jn=zn?zn.valueOf:void 0;function Xn(t,n){var i=n?$n(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}var Qn=Object.create,Zn=function(){function t(){}return function(n){if(!ft(n))return{};if(Qn)return Qn(n);t.prototype=n;var i=new t;return t.prototype=void 0,i}}();function ti(t){return"function"!=typeof t.constructor||cn(t)?{}:Zn(Rn(t))}var ni=en&&en.isMap,ii=ni?Qt(ni):function(t){return Lt(t)&&"[object Map]"==Gn(t)},ei=en&&en.isSet,ri=ei?Qt(ei):function(t){return Lt(t)&&"[object Set]"==Gn(t)},oi={};function ui(t,n,i,e,r,o){var u,s=1&n,a=2&n,c=4&n;if(i&&(u=r?i(t,e,r,o):i(t)),void 0!==u)return u;if(!ft(t))return t;var h=qt(t);if(h){if(u=function(t){var n=t.length,i=new t.constructor(n);return n&&"string"==typeof t[0]&&Wn.call(t,"index")&&(i.index=t.index,i.input=t.input),i}(t),!s)return kn(t,u)}else{var f=Gn(t),l="[object Function]"==f||"[object GeneratorFunction]"==f;if($t(t))return _n(t,s);if("[object Object]"==f||"[object Arguments]"==f||l&&!r){if(u=a||l?{}:ti(t),!s)return a?function(t,n){return xt(t,In(t),n)}(t,function(t,n){return t&&xt(n,yn(n),t)}(u,t)):function(t,n){return xt(t,Mn(t),n)}(t,function(t,n){return t&&xt(n,pn(n),t)}(u,t))}else{if(!oi[f])return r?t:{};u=function(t,n,i){var e=t.constructor;switch(n){case"[object ArrayBuffer]":return $n(t);case"[object Boolean]":case"[object Date]":return new e(+t);case"[object DataView]":return function(t,n){var i=n?$n(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.byteLength)}(t,i);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Xn(t,i);case"[object Map]":return new e;case"[object Number]":case"[object String]":return new e(t);case"[object RegExp]":return function(t){var n=new t.constructor(t.source,Kn.exec(t));return n.lastIndex=t.lastIndex,n}(t);case"[object Set]":return new e;case"[object Symbol]":return function(t){return Jn?Object(Jn.call(t)):{}}(t)}}(t,f,s)}}o||(o=new Ct);var v=o.get(t);if(v)return v;o.set(t,u),ri(t)?t.forEach((function(e){u.add(ui(e,n,i,e,t,o))})):ii(t)&&t.forEach((function(e,r){u.set(r,ui(e,n,i,r,t,o))}));var d=c?a?jn:Nn:a?keysIn:pn,p=h?void 0:d(t);return function(t,n){for(var i=-1,e=null==t?0:t.length;++i<e&&!1!==n(t[i],i););}(p||t,(function(e,r){p&&(e=t[r=e]),Ut(u,r,ui(e,n,i,r,t,o))})),u}function si(t){return ui(t,5)}oi["[object Arguments]"]=oi["[object Array]"]=oi["[object ArrayBuffer]"]=oi["[object DataView]"]=oi["[object Boolean]"]=oi["[object Date]"]=oi["[object Float32Array]"]=oi["[object Float64Array]"]=oi["[object Int8Array]"]=oi["[object Int16Array]"]=oi["[object Int32Array]"]=oi["[object Map]"]=oi["[object Number]"]=oi["[object Object]"]=oi["[object RegExp]"]=oi["[object Set]"]=oi["[object String]"]=oi["[object Symbol]"]=oi["[object Uint8Array]"]=oi["[object Uint8ClampedArray]"]=oi["[object Uint16Array]"]=oi["[object Uint32Array]"]=!0,oi["[object Error]"]=oi["[object Function]"]=oi["[object WeakMap]"]=!1;var ai=e((function(t,n){t.exports=function(t){var n={};return(t=t||{}).prependOn=function(n,i){return t.on(n,i,!0)},t.eventNames=function(){return Object.keys(n)},t.on=function(i,e,r){for(var o=0,u=(i=[].concat(i)).length;o<u;o++){var s=i[o];if(!s)throw new Error("Tried to listen for an undefined event.");n[s]||(n[s]=[]),r?n[s].unshift(e):n[s].push(e)}return t},t.once=function(n,i,e){function r(){i.apply(t.off(n,r),arguments)}return r.handler=i,t.on(n,r,e)},t.off=function(i,e){if(!i)return n={},t;for(var r=0,o=(i=[].concat(i)).length;r<o;r++){var u=i[r];if(!u)throw new Error("Tried to remove an undefined event.");if(u in n)if(e){var s=n[u].indexOf(e);if(-1===s)for(var a=0,c=n[u].length;a<c;a++)if(n[u][a].handler===e){s=r;break}if(-1===s)return t;n[u].splice(s,1)}else delete n[u]}return t},t.fire=function(i){if(!i)throw new Error("Tried to fire an undefined event.");if(i in n)for(var e=n[i].slice(0),r=0,o=e.length;r<o;r++)if(e[r].apply(t,e.slice.call(arguments,1)),t.l){delete t.l;break}return t},t.halt=function(){return t.l=!0,t},t}}));function ci(t){return function(n){for(var i=arguments.length,e=new Array(i>1?i-1:0),r=1;r<i;r++)e[r-1]=arguments[r];return e.forEach((function(i){for(var e in i){var r=Object.getOwnPropertyDescriptor(i,e);Object.defineProperty(n,e,Object.assign(r,t))}})),n}}var hi=ci({enumerable:!1,configurable:!0,writeable:!1}),fi=ci({enumerable:!1,configurable:!1,writeable:!1}),li=ci({enumerable:!0,configurable:!0,writeable:!1}),vi=e((function(t,n){
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.6+9869a4bc
 */
t.exports=function(){function t(t){return"function"==typeof t}var n=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},e=0,r=void 0,o=void 0,u=function(t,n){v[e]=t,v[e+1]=n,2===(e+=2)&&(o?o(d):p())},s="undefined"!=typeof window?window:void 0,a=s||{},c=a.MutationObserver||a.WebKitMutationObserver,h="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),f="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function l(){var t=setTimeout;return function(){return t(d,1)}}var v=new Array(1e3);function d(){for(var t=0;t<e;t+=2)(0,v[t])(v[t+1]),v[t]=void 0,v[t+1]=void 0;e=0}var p=void 0;function m(t,n){var i=this,e=new this.constructor(b);void 0===e[w]&&C(e);var r=i.m;if(r){var o=arguments[r-1];u((function(){return R(r,e,o,i.g)}))}else M(i,e,t,n);return e}function y(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var n=new this(b);return k(n,t),n}p=h?function(){return process.nextTick(d)}:c?function(){var t=0,n=new c(d),i=document.createTextNode("");return n.observe(i,{characterData:!0}),function(){i.data=t=++t%2}}():f?function(){var t=new MessageChannel;return t.port1.onmessage=d,function(){return t.port2.postMessage(0)}}():void 0===s?function(){try{var t=Function("return this")().require("vertx");return void 0!==(r=t.runOnLoop||t.runOnContext)?function(){r(d)}:l()}catch(t){return l()}}():l();var w=Math.random().toString(36).substring(2);function b(){}var g={error:null};function E(t){try{return t.then}catch(t){return g.error=t,g}}function _(n,i,e){i.constructor===n.constructor&&e===m&&i.constructor.resolve===y?function(t,n){1===n.m?S(t,n.g):2===n.m?A(t,n.g):M(n,void 0,(function(n){return k(t,n)}),(function(n){return A(t,n)}))}(n,i):e===g?(A(n,g.error),g.error=null):void 0===e?S(n,i):t(e)?function(t,n,i){u((function(t){var e=!1,r=function(i,r,o,u){try{i.call(r,(function(i){e||(e=!0,n!==i?k(t,i):S(t,i))}),(function(n){e||(e=!0,A(t,n))}))}catch(t){return t}}(i,n,0,0,t._);!e&&r&&(e=!0,A(t,r))}),t)}(n,i,e):S(n,i)}function k(t,n){t===n?A(t,new TypeError("You cannot resolve a promise with itself")):function(t){var n=typeof t;return null!==t&&("object"===n||"function"===n)}(n)?_(t,n,E(n)):S(t,n)}function T(t){t.k&&t.k(t.g),O(t)}function S(t,n){void 0===t.m&&(t.g=n,t.m=1,0!==t.T.length&&u(O,t))}function A(t,n){void 0===t.m&&(t.m=2,t.g=n,u(T,t))}function M(t,n,i,e){var r=t.T,o=r.length;t.k=null,r[o]=n,r[o+1]=i,r[o+2]=e,0===o&&t.m&&u(O,t)}function O(t){var n=t.T,i=t.m;if(0!==n.length){for(var e=void 0,r=void 0,o=t.g,u=0;u<n.length;u+=3)e=n[u],r=n[u+i],e?R(i,e,r,o):r(o);t.T.length=0}}function R(n,i,e,r){var o=t(e),u=void 0,s=void 0,a=void 0,c=void 0;if(o){if((u=function(t,n){try{return t(n)}catch(t){return g.error=t,g}}(e,r))===g?(c=!0,s=u.error,u.error=null):a=!0,i===u)return void A(i,new TypeError("A promises callback cannot return that same promise."))}else u=r,a=!0;void 0!==i.m||(o&&a?k(i,u):c?A(i,s):1===n?S(i,u):2===n&&A(i,u))}var I=0;function C(t){t[w]=I++,t.m=void 0,t.g=void 0,t.T=[]}var N=function(){function t(t,i){this.S=t,this.promise=new t(b),this.promise[w]||C(this.promise),n(i)?(this.length=i.length,this.A=i.length,this.g=new Array(this.length),0===this.length?S(this.promise,this.g):(this.length=this.length||0,this.M(i),0===this.A&&S(this.promise,this.g))):A(this.promise,new Error("Array Methods must be provided an Array"))}return t.prototype.M=function(t){for(var n=0;void 0===this.m&&n<t.length;n++)this.O(t[n],n)},t.prototype.O=function(t,n){var i=this.S,e=i.resolve;if(e===y){var r=E(t);if(r===m&&void 0!==t.m)this.R(t.m,n,t.g);else if("function"!=typeof r)this.A--,this.g[n]=t;else if(i===j){var o=new i(b);_(o,t,r),this.I(o,n)}else this.I(new i((function(n){return n(t)})),n)}else this.I(e(t),n)},t.prototype.R=function(t,n,i){var e=this.promise;void 0===e.m&&(this.A--,2===t?A(e,i):this.g[n]=i),0===this.A&&S(e,this.g)},t.prototype.I=function(t,n){var i=this;M(t,void 0,(function(t){return i.R(1,n,t)}),(function(t){return i.R(2,n,t)}))},t}(),j=function(){function n(t){this[w]=I++,this.g=this.m=void 0,this.T=[],b!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof n?function(t,n){try{n((function(n){k(t,n)}),(function(n){A(t,n)}))}catch(n){A(t,n)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return n.prototype.catch=function(t){return this.then(null,t)},n.prototype.finally=function(n){var i=this.constructor;return t(n)?this.then((function(t){return i.resolve(n()).then((function(){return t}))}),(function(t){return i.resolve(n()).then((function(){throw t}))})):this.then(n,n)},n}();return j.prototype.then=m,j.all=function(t){return new N(this,t).promise},j.race=function(t){var i=this;return n(t)?new i((function(n,e){for(var r=t.length,o=0;o<r;o++)i.resolve(t[o]).then(n,e)})):new i((function(t,n){return n(new TypeError("You must pass an array to race."))}))},j.resolve=y,j.reject=function(t){var n=new this(b);return A(n,t),n},j.C=function(t){o=t},j.N=function(t){u=t},j.j=u,j.polyfill=function(){var t=void 0;if(void 0!==i)t=i;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=t.Promise;if(n){var e=null;try{e=Object.prototype.toString.call(n.resolve())}catch(t){}if("[object Promise]"===e&&!n.cast)return}t.Promise=j},j.Promise=j,j}()})),di=window.Promise||vi;di.allSettled||(di.allSettled=function(t){return di.all(t.map((function(t){return t.then((function(t){return{status:"fulfilled",value:t}})).catch((function(t){return{status:"rejected",reason:t}}))})))});var pi=function(t){return new di((function(n,i){return setTimeout(n,t)}))},mi={defer:!0,async:!0};function yi(t,n){n=Object.assign(mi,n);var i=window.vpimport__=window.vpimport__||{cache:{}};if(i.cache[t])return i.cache[t].D;var e=new di((function(e,r){var o=document.getElementsByTagName("head")[0],u=document.createElement("script");u.src=""+t,u.defer=n.defer,u.async=n.async,u.onreadystatechange=u.onload=function(){var n=Object.keys(i).filter((function(t){return"cache"!==t}))[0];i.cache[t].U=i[n],delete i[n],e(i.cache[t].U),o.removeChild(u)},u.onerror=function(n){r(n),delete i.cache[t],o.removeChild(u)},o.appendChild(u)}));return i.cache[t]={D:e},e}function wi(t){for(var n=function(t){return t&&"object"===j(t)},i=arguments.length,e=new Array(i>1?i-1:0),r=1;r<i;r++)e[r-1]=arguments[r];return e.reduce((function(t,i){return Object.keys(i||{}).forEach((function(e){var r=t[e],o=i[e];r&&void 0===o||(Array.isArray(o)?t[e]=(r||[]).concat(o):n(o)?t[e]=wi({},r,o):t[e]=o)})),t}),t)}function bi(){var t,n,i=new di((function(i,e){t=i,n=e}));return i.resolve=t,i.reject=n,i}function gi(t,n){for(var i=t,e=0;e<n.length;e++)if(n.start(e)<=t&&n.end(e)>=t){i=n.end(e);break}return i-t}function Ei(){return void 0!==window.performance&&"function"==typeof window.performance.now?window.performance.now():Date.now()}function _i(t){return Ei()-t}function ki(t){if("object"!==j(t))return"";var n=[];for(var i in t)t.hasOwnProperty(i)&&n.push(encodeURIComponent(i)+"="+encodeURIComponent(t[i]));return n.length?n.join("&"):""}function Ti(t){return"string"!=typeof t?{}:t.replace("?","").split("&").reduce((function(t,n){if(n.length>0){var i=n.substring(0,n.indexOf("=")),e=n.substring(n.indexOf("=")+1);t[i]=decodeURIComponent(e)}return t}),{})}function Si(t,n){var i=ki(n),e=-1===t.indexOf("?")?"?":"&";return"".concat(t).concat(i?"".concat(e).concat(i):"")}function Ai(t,n,i){switch(i.length){case 0:return t.call(n);case 1:return t.call(n,i[0]);case 2:return t.call(n,i[0],i[1]);case 3:return t.call(n,i[0],i[1],i[2])}return t.apply(n,i)}function Mi(t){return t}var Oi=Math.max;function Ri(t){return function(){return t}}var Ii=Nt?function(t,n){return Nt(t,"toString",{configurable:!0,enumerable:!1,value:Ri(n),writable:!0})}:Mi,Ci=Date.now,Ni=function(t){var n=0,i=0;return function(){var e=Ci(),r=16-(e-i);if(i=e,r>0){if(++n>=800)return arguments[0]}else n=0;return t.apply(void 0,arguments)}}(Ii);function ji(t,n){return Ni(function(t,n,i){return n=Oi(void 0===n?t.length-1:n,0),function(){for(var e=arguments,r=-1,o=Oi(e.length-n,0),u=Array(o);++r<o;)u[r]=e[n+r];r=-1;for(var s=Array(n+1);++r<n;)s[r]=e[r];return s[n]=i(u),Ai(t,this,s)}}(t,n,Mi),t+"")}function Di(t,n,i){(void 0!==i&&!J(t[n],i)||void 0===i&&!(n in t))&&jt(t,n,i)}var Ui=function(t,n,i){for(var e=-1,r=Object(t),o=i(t),u=o.length;u--;){var s=o[++e];if(!1===n(r[s],s,r))break}return t},xi=Function.prototype,Li=Object.prototype,Pi=xi.toString,Fi=Li.hasOwnProperty,Hi=Pi.call(Object);function Vi(t,n){if(("constructor"!==n||"function"!=typeof t[n])&&"__proto__"!=n)return t[n]}function Bi(t,n,i,e,r){t!==n&&Ui(n,(function(o,u){if(r||(r=new Ct),ft(o))!function(t,n,i,e,r,o,u){var s=Vi(t,i),a=Vi(n,i),c=u.get(a);if(c)Di(t,i,c);else{var h=o?o(s,a,i+"",t,n,u):void 0,f=void 0===h;if(f){var l=qt(a),v=!l&&$t(a),d=!l&&!v&&on(a);h=a,l||v||d?qt(s)?h=s:function(t){return Lt(t)&&dn(t)}(s)?h=kn(s):v?(f=!1,h=_n(a,!0)):d?(f=!1,h=Xn(a,!0)):h=[]:function(t){if(!Lt(t)||"[object Object]"!=ht(t))return!1;var n=Rn(t);if(null===n)return!0;var i=Fi.call(n,"constructor")&&n.constructor;return"function"==typeof i&&i instanceof i&&Pi.call(i)==Hi}(a)||Bt(a)?(h=s,Bt(s)?h=function(t){return xt(t,yn(t))}(s):ft(s)&&!lt(s)||(h=ti(a))):f=!1}f&&(u.set(a,h),r(h,a,e,o,u),u.delete(a)),Di(t,i,h)}}(t,n,u,i,Bi,e,r);else{var s=e?e(Vi(t,u),o,u+"",t,n,r):void 0;void 0===s&&(s=o),Di(t,u,s)}}),yn)}function qi(t,n,i,e,r,o){return ft(t)&&ft(n)&&(o.set(n,t),Bi(t,n,void 0,qi,o),o.delete(n)),t}function Gi(t){return ji((function(n,i){var e=-1,r=i.length,o=r>1?i[r-1]:void 0,u=r>2?i[2]:void 0;for(o=t.length>3&&"function"==typeof o?(r--,o):void 0,u&&function(t,n,i){if(!ft(i))return!1;var e=j(n);return!!("number"==e?dn(i)&&zt(n,i.length):"string"==e&&n in i)&&J(i[n],t)}(i[0],i[1],u)&&(o=r<3?void 0:o,r=1),n=Object(n);++e<r;){var s=i[e];s&&t(n,s,e,o)}return n}))}var Wi=Gi((function(t,n,i,e){Bi(t,n,i,e)})),Yi=ji((function(t){return t.push(void 0,qi),Ai(Wi,void 0,t)})),$i=function(){function t(t){this.L=!1,this.P=!1,this.F=t,ai(this)}U(t,null,[{key:"displayName",get:function(){return"ExternalDisplay"}},{key:"supported",get:function(){return!1}},{key:"supportedVideoTypes",get:function(){return[]}}]);var n=t.prototype;return n.showPicker=function(){},n.getFile=function(){var t=this.constructor.displayName.replace("ExternalDisplay","");if(this.F.externalDisplayFiles[t])return this.F.externalDisplayFiles[t];var n=this.constructor.supportedVideoTypes,i=this.F.files.filter((function(t){return-1!==n.indexOf(t.mime)})).sort((function(t,i){return t.mime===i.mime?t.priority-i.priority:n.indexOf(t.mime)-n.indexOf(i.mime)}));if(!i.length)throw new Error("No files available for ".concat(this.constructor.displayName," external display."));return i[0]},U(t,[{key:"active",get:function(){return this.P}},{key:"available",get:function(){return this.L}},{key:"element",get:function(){return document.createElement("div")}}]),t}(),Ki={ABORT:"abort",CAN_PLAY:"canplay",CAN_PLAY_THROUGH:"canplaythrough",DURATION_CHANGE:"durationchange",EMPTIED:"emptied",ENDED:"ended",ENTER_PICTURE_IN_PICTURE:"enterpictureinpicture",LEAVE_PICTURE_IN_PICTURE:"leavepictureinpicture",ERROR:"error",LOADED_DATA:"loadeddata",LOADED_METADATA:"loadedmetadata",LOAD_START:"loadstart",PAUSE:"pause",PLAY:"play",PLAYING:"playing",PROGRESS:"progress",RATE_CHANGE:"ratechange",RESIZE:"resize",SEEKED:"seeked",SEEKING:"seeking",STALLED:"stalled",SUSPEND:"suspend",TIME_UPDATE:"timeupdate",VOLUME_CHANGE:"volumechange",WAITING:"waiting",WEBKIT_BEGIN_FULLSCREEN:"webkitbeginfullscreen",WEBKIT_END_FULLSCREEN:"webkitendfullscreen",WEBKIT_PRESENTATION_MODE_CHANGED:"webkitpresentationmodechanged"},zi={ADD_TRACK:"addtrack",REMOVE_TRACK:"removetrack",CHANGE:"change"},Ji={AVAILABLE:"externaldisplayavailable",UNAVAILABLE:"externaldisplayunavailable",ACTIVATED:"externaldisplayactivated",DEACTIVATED:"externaldisplaydeactivated"},Xi={AIRPLAY_AVAILABLE:"available",AIRPLAY_UNAVAILABLE:"unavailable",AIRPLAY_ACTIVATED:"activated",AIRPLAY_DEACTIVATED:"deactivated"},Qi={SCANNER_CHANGE:"scannerchange",SCANNER_ERROR:"scannererror",FILE_ERROR:"fileerror",FILE_SRC_UPDATE:"filesrcupdate",DOWNLOAD_START:"downloadstart",DOWNLOAD_END:"downloadend",DOWNLOAD_ERROR:"downloaderror",DOWNLOAD_TIMEOUT:"downloadtimeout",DRM_AUTH_FAILURE:"drmauthfailure",DRM_AUTH_SUCCESS:"drmauthsuccess",DRM_FAILURE:"drmfailure",DRM_KEY_SWITCH:"drmkeyswitch",DRM_OUTPUT_RESTRICTED:"drmoutputrestricted",EME_UNSUPPORTED:"emeunsupported",CURRENT_FILE_CHANGE:"currentfilechange",MEDIA_URL_EXPIRED:"mediaurlexpired",MEDIA_URL_BAD_REQUEST:"mediaurlbadrequest",STREAM_CHANGE:"streamchange",STREAM_CHANGE_START:"streamchangestart",STREAM_UPDATED:"streamupdated",STREAM_BUFFER_START:"streambufferstart",STREAM_BUFFER_END:"streambufferend",AVAILABLE_STREAMS_CHANGED:"availablestreamschanged",MEDIA_CAPABILITY_STREAMS_UNSUPPORTED:"mediacapabilitystreamsunsupported",DROPPED_FRAMES:"droppedframes",BANDWIDTH:"bandwidth",STREAM_TARGET_CHANGE:"streamtargetchange",CUE_POINT:"cuepoint",BUFFER_OCCUPANCY:"bufferoccupancy",MANIFEST_TIMEOUT:"manifesttimeout",MANIFEST_LOADED:"manifestloaded",STREAMS_LOADED:"streamsloaded",TEXT_SRC_UPDATE:"texttracksrcupdate",TEXT_TRACKS_AVAILABLE:"texttracksavailable",AV_DURATION_MISMATCH:"avdurationmismatch",BUFFER_STARTED:"bufferstarted",BUFFER_ENDED:"bufferended",QUOTA_EXCEEDED_ERROR:"quotaexceedederror",CHAPTER_CUES_UPDATED:"chaptercuesupdated",APPEND_BUFFER_END:"appendbufferend",DROPPED_FRAME_PERCENT_EXCEEDED:"droppedframepercentexceeded",LOAD_SEGMENT_FAILED:"loadsegmentfailed",AUDIO_TRACK_CHANGED:"audiotrackchanged",SEGMENT_CUES_LOADED:"segmentcuesloaded"},Zi={STREAM_ONLINE:"livestreamonline",STREAM_OFFLINE:"livestreamoffline",BUFFER_GAP_JUMP:"livebuffergapjump",BUFFER_GAP_JUMP_PREVENT:"livebuffergapjumpprevent",STALL_JUMP:"livestalljump",LATENCY_UPDATED:"latencyupdated"},te={CAMERA_UPDATE:"cameraupdate",CAMERA_CHANGE:"camerachange",MOTION_START:"motionstart",MOTION_END:"motionend",SPATIAL_UNSUPPORTED:"spatialunsupported",WEBVR_ENTER:"entervr",WEBVR_EXIT:"exitvr",WEBVR_HARDWARE_AVAILABLE:"webvrhardwareavailable",AMBISONIC_UNSUPPORTED:"ambisonicunsupported"},ne={MEDIASESSION_PLAY:"mediasessionplay",MEDIASESSION_PAUSE:"mediasessionpause",MEDIASESSION_SEEK_FORWARD:"mediasessionseekforward",MEDIASESSION_SEEK_BACKWARD:"mediasessionseekbackward"},ie={BRAIN_ML_MODEL_ERR:"brainmlmodelerr",BRAIN_ML_MODEL_NET_ERR:"brainmlmodelresperr",BRAIN_ML_MODEL_TIMEOUT:"brainmlmodeltimeout",BRAIN_ML_SWITCH_TO_SKYFIRE:"brainmlmodelswitchtoskyfire",BRAIN_ML_MODEL_INPUTS:"brainmlmodelinputs"},ee=Object.assign({},Ki,zi,Ji,Xi,Qi,te,Zi,ne,ie),AirPlayExternalDisplay=function(t){function AirPlayExternalDisplay(n){var i;return(i=t.call(this,n)||this).H=document.createElement("video"),i.H.setAttribute("data-airplay",""),i.H.setAttribute("x-webkit-airplay","allow"),i.addVideoEventListeners(),i}F(AirPlayExternalDisplay,t),U(AirPlayExternalDisplay,null,[{key:"displayName",get:function(){return"AirPlayExternalDisplay"}},{key:"supported",get:function(){return"WebKitPlaybackTargetAvailabilityEvent"in window}},{key:"supportedVideoTypes",get:function(){return["application/vnd.apple.mpegurl","video/mp4"]}}]);var n=AirPlayExternalDisplay.prototype;return n.addVideoEventListeners=function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.H;n.addEventListener(Ki.LOADED_METADATA,(function(n){t.fire(Ki.LOADED_METADATA,n)})),n.addEventListener("webkitplaybacktargetavailabilitychanged",(function(n){switch(n.availability){case"available":t.L||(t.L=!0,t.fire(Xi.AIRPLAY_AVAILABLE));break;case"not-available":t.L&&(t.L=!1,t.fire(Xi.AIRPLAY_UNAVAILABLE))}})),n.addEventListener("webkitcurrentplaybacktargetiswirelesschanged",(function(n){if(n.target.webkitCurrentPlaybackTargetIsWireless)return t.P=!0,void t.fire(Xi.AIRPLAY_ACTIVATED);t.P=!1,t.fire(Xi.AIRPLAY_DEACTIVATED)}))},n.showPicker=function(){var t=this;this.H.webkitShowPlaybackTargetPicker(),this.loadMetadata().then((function(){return t.H.webkitShowPlaybackTargetPicker()})).catch((function(){}))},n.loadMetadata=function(){var t=this;return this.H.readyState>=1?di.resolve():new di((function(n,i){t.H.addEventListener(Ki.LOADED_METADATA,(function(){n()})),t.H.src=t.getFile().src}))},U(AirPlayExternalDisplay,[{key:"element",get:function(){return this.H},set:function(t){if(!(t instanceof HTMLVideoElement))throw new TypeError("The element for AirPlay must be a <video>.");t!==this.H&&(this.addVideoEventListeners(t),this.H=t,this.H.setAttribute("x-webkit-airplay","allow"))}}]),AirPlayExternalDisplay}($i),re=window.WeakMap||function(){var t=Object.defineProperty,n=Date.now()%1e9,i=function(){this.name="__st"+(1e9*Math.random()>>>0)+n+++"__"};return i.prototype.set=function(n,i){if("object"!==j(n)&&"function"!=typeof n)throw new TypeError("Invalid value used as weak map key");var e=n[this.name];return e&&e[0]===n?e[1]=i:t(n,this.name,{value:[n,i],writable:!0}),this},i.prototype.get=function(t){var n;return(n=t[this.name])&&n[0]===t?n[1]:void 0},i.prototype.delete=function(t){var n=t[this.name];return!(!n||n[0]!==t||(n[0]=n[1]=void 0,0))},i.prototype.has=function(t){var n=t[this.name];return!!n&&n[0]===t},i}(),oe=window.Array.from,ue=[1];"function"==typeof oe&&oe(ue)===ue&&(oe=!1);var se=oe||function(t){return[].slice.call(t,0)},ae=navigator.userAgent.toLowerCase();const ce=["googlebot","google-inspectiontool"];function he(t){t=t.toLowerCase();var n=new RegExp(t).test(ae);return"safari"===t?n&&new RegExp("version").test(ae):n}function fe(t){var n=document.createElement("div"),i=t.charAt(0).toUpperCase()+t.slice(1),e=(t+" "+["Webkit","Moz","O","ms"].join(i+" ")+i).split(" ");for(var r in e){var o=e[r];if(void 0!==n.style[o])return o}return t}var le=!!he("android")&&(parseFloat(ae.replace(/^.* android (\d+)\.(\d+).*$/,"$1.$2"))||!0),ve=window.devicePixelRatio||1,de=!(!he("windows phone")&&!he("iemobile"))&&(parseFloat(ae.replace(/^.* windows phone (os )?(\d+)\.(\d+).*$/,"$2.$3"))||!0),pe=!!he("msie")&&parseFloat(ae.replace(/^.*msie (\d+).*$/,"$1")),me=!!he("trident")&&parseFloat(ae.replace(/^.*trident\/(\d+)\.(\d+).*$/,"$1.$2"))+4,ye=he("ipad;")||he("iphone;")||he("ipod touch;")?parseFloat(ae.replace(/^.* os (\d+)_(\d+).*$/,"$1.$2")):navigator.userAgent.includes("Mac")&&"ontouchend"in document,we="MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,be=he("opera")||he("opr"),ge=/^Mozilla\/5\.0 \(.* Mac OS X.*\(KHTML, like Gecko\)(?: Mobile\/[\S]*|)$/i.test(ae);function Ee(){if(!he("safari"))return[];var t=ae.split(" ").find((function(t){return/version\//.test(t)}));return t?t.replace("version/","").split(".").map((function(t){return parseInt(t,10)})):[]}var _e=he("safari")&&he("apple")&&!he("chrome")&&!he("android")&&Ee()[0]>=11,ke={airPlay:"WebKitPlaybackTargetAvailabilityEvent"in window,android:le,appleMail:ge,hasAutoplayPolicy:le||ye||_e||function(){if(!he("chrome"))return[];var t=ae.split(" ").find((function(t){return ye?/CriOS\//.test(t):/chrome\//.test(t)}));return t?t.replace("chrome/","").split(".").map((function(t){return parseInt(t,10)})):[]}()[0]>=66,iOS:ye,iPadOS:we,mobileAndroid:le&&he("mobile"),browser:{bb10:he("bb10"),chrome:he("chrome"),firefox:he("firefox"),ie:pe||me,edge:he("edge"),opera:be,safari:he("safari")&&he("apple")&&!he("chrome")&&!he("android"),chromium:"chrome"in window},devicePixelRatio:ve,iPhone:he("iphone;")||he("ipod touch;")||he("ipod;"),iPad:he("ipad;"),iPadNonRetina:he("ipad;")&&ve<2,mac:he("mac os"),pointerEvents:window.navigator.pointerEnabled||window.navigator.msPointerEnabled||!1,passiveEvents:function(){var t=!1;try{var n=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassive",null,n),window.removeEventListener("testPassive",null,n)}catch(t){}return t}(),svg:!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,touch:"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch||he("windows phone")||window.navigator.maxTouchPoints>1||window.navigator.msMaxTouchPoints||!1,transformProperty:fe("transform"),transitionProperty:fe("transition"),webp:function(){var t=document.createElement("canvas");return!(!t.getContext||!t.getContext("2d"))&&0===t.toDataURL("image/webp").indexOf("data:image/webp")}(),windowsPhone:de,mediaCapabilities:"mediaCapabilities"in navigator,isGoogleBot:(()=>{const t=ae.toLowerCase();return ce.some(n=>t.includes(n))})(),storageAccessAPI:"requestStorageAccess"in document&&"hasStorageAccess"in document,clipboardAPI:"clipboard"in navigator&&"write"in navigator.clipboard,videoContentPreload:!he("iphone"),intersectionObserver:"IntersectionObserver"in window},Te=/mac os x 10_13/.test(ae),Se=ke.iOS&&ke.iOS>=11,Ae="undefined"!=typeof matchMedia&&(matchMedia("(color-gamut: p3)").matches&&screen.pixelDepth>24||matchMedia("(dynamic-range: high), (video-dynamic-range: high)").matches);function Me(t="hvc1"){return"undefined"!=typeof MediaSource?MediaSource.isTypeSupported(`video/mp4; codecs="${t}"`):_e&&(Te||Se)}function Oe(){return!(ke.iOS||ke.iPad||ke.browser.ie)&&(!he("safari")||Ee()[0]>11||11===Ee()[0]&&(Ee()[2]>1||Ee()[1]>0))}ke.hevc=Me(),ke.hevcMain10=Me("hvc1.2.4.H150.90"),ke.hdr=Ae,ke.dolbyVision=function(){var t="undefined"!=typeof MediaSource&&MediaSource.isTypeSupported('video/mp4; codecs="dvh1"');if(!t){var n=document.createElement("video");"canPlayType"in n&&(t="probably"===n.canPlayType('video/mp4; codecs="dvh1"'))}if(we||ke.iOS){var i=Ee(),e=i[0],r=i[1];if(e<14||14===e&&r<1)return!1}return t}(),ke.vp9hdr=(window.matchMedia("(color-gamut: p3)").matches||window.matchMedia("(color-gamut: rec2020)").matches)&&screen.colorDepth>=48&&(MediaSource.isTypeSupported('video/webm; codecs="vp09.02.10.10.01.09.16.09.00"')||MediaSource.isTypeSupported('video/webm; codecs="vp09.02.10.10.01.09.16.09.01"')||MediaSource.isTypeSupported('video/webm; codecs="vp09.02.10.10.01.09.18.09.00"')||MediaSource.isTypeSupported('video/webm; codecs="vp09.02.10.10.01.09.18.09.01"')),ke.av1="undefined"!=typeof MediaSource&&MediaSource.isTypeSupported('video/mp4; codecs="av01.0.31M.08.0.110.01.01.01.0"'),ke.webvr=!(!window.navigator||!("getVRDisplays"in window.navigator)),ke.webxr=!!(window.navigator&&"xr"in window.navigator&&"supportsSession"in window.navigator.xr),ke.spatialPlayback=Oe(),ke.spatialHEVC=!ke.browser.safari&&Oe()&&Me(),ke.stereoscopic=ke.spatialPlayback&&ke.mobileAndroid;var Re=function(){var t=navigator.userAgent.match(/Chrom(?:e|ium)\/([0-9]+)\.([0-9]+)\./);return!!t&&{major:parseInt(t[1],10),minor:parseInt(t[2],10)}}();function Ie(t,n){var i,e=0;return x(i={},C.iterator,(function(){return this})),x(i,"next",(function(){return e<t.length?{done:!1,value:n?[t[e],n[e++]]:t[e++]}:{done:!0}})),i}var Ce=function(t){for(var n=0,i=this.length;n<i;n++)if(this[n].id==="".concat(t))return this[n];return null};function Ne(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.item=function(t){return this[t]},t.getTrackById=Ce,t}function je(){return void 0!==window.performance&&"function"==typeof window.performance.now?window.performance.now():Date.now()}function De(t){return je()-t}function Ue(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(t){return(t^(16*Math.random()>>t)/4).toString(16)}))}function xe(t){for(var n=window.atob(t),i=n.length,e=new Uint8Array(i),r=0;r<i;r++)e[r]=n.charCodeAt(r);return e}function Le(t){return xe(t).buffer}function Pe(t,n,i,e){var r=0,o=0,u=t,s=n,a=i/e;return u/s>=a?(o=s,r=(a*s).toFixed(2)):(r=u,o=(u/a).toFixed(2)),{width:r,height:o,left:Math.max((u-r)/2,0),top:Math.max((s-o)/2,0)}}function Fe(t){var n=[document.fullscreenElement,document.webkitFullscreenElement,document.webkitCurrentFullScreenElement,document.mozFullScreenElement,document.msFullscreenElement].find((function(t){return void 0!==t}));return void 0!==n?!!n:t.webkitDisplayingFullscreen}function He(t,n){var i=t;return n&&(i+=';codecs="'.concat(n,'"')),i}function Ve(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;if(t=parseFloat(t),isNaN(t))return 0;var i=Math.pow(10,n);return Math.round(t*i)/i}function Be(t,n){return t&&t.tests&&t.tests[n]?t.tests[n]:null}function qe(t){return t&&"ML"===t.displayName}var TelecineError=function(t,n){this.name=t,this.message=n,Object.freeze(this)},Ge=new re,We=function(){function t(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=parseFloat(t);if(isNaN(i))throw new TypeError("Time must be a number.");if(i<0)throw new TypeError("Time must be a positive number.");this.time=t,this.data=n,this.id=Ue();try{var e="undefined"==typeof VTTCue?TextTrackCue:VTTCue;this.vttCue=new e(t,t+.25,JSON.stringify(n)),this.vttCue.id=this.id}catch(t){throw new TelecineError("CuePointsNotSupported","Cue points are not supported in this browser.")}Ge.set(this.vttCue,this),Object.freeze(this)}return t.fromVTTCue=function(n){if(Ge.has(n))return Ge.get(n);var i={};try{i=JSON.parse(n.text)}catch(t){}return new t(n.startTime,i)},t}();function Ye(t,n,i){var e;try{document.removeChild({})}catch(r){e=Object.create(Object.getPrototypeOf(r),{name:{value:n,configurable:!0,writable:!0},code:{value:t,configurable:!0,writable:!0},message:{value:i,configurable:!0,writable:!0},toString:{value:function(){return"".concat(n,": DOM Exception ").concat(t)},configurable:!0,writable:!0}})}return Object.freeze(e)}var $e=function(t,n){if(!t||void 0===t[n])throw Ye(1,"INDEX_SIZE_ERR");return t[n]};function Ke(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Object.freeze(x({get length(){return t.length},start:function(n){return $e(t,n)},end:function(t){return $e(n,t)}},C.iterator,(function(){return Ie(t,n)})))}Ke.from=function(t){if(!(t instanceof TimeRanges))throw new TypeError("Can only create a TelecineTimeRange from a TimeRanges object.");for(var n=[],i=[],e=0,r=t.length;e<r;e++)n.push(t.start(e)),i.push(t.end(e));return Ke(n,i)};function ze(){}var Je=document.createElement("video"),Xe={"application/vnd.apple.mpegurl":"application/vnd.apple.mpegurl","video/mp4":'video/mp4; codecs="avc1.64001E"',"video/webm":'video/webm; codecs="vp8, vorbis"',"video/x-flv":'video/x-flv; codecs="vp6"'},Qe=function(){var t="undefined"==typeof TextTrack?{}:TextTrack;return{disabled:"DISABLED"in t?t.DISABLED:"disabled",hidden:"HIDDEN"in t?t.HIDDEN:"hidden",showing:"SHOWING"in t?t.SHOWING:"showing"}}(),Ze=function(){var t=document.createElement("track");return"track"in t&&"oncuechange"in t.track}(),tr=new re,nr=function(){function t(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.V=t,this.B=i,this.q=null,this.G=null,this.W=[],ai(this),this.on(Ki.LOADED_METADATA,(function(){return n.Y()})),this.on(Ki.PLAY,(function(){return n.$()}));var e=t.querySelector("video");e||((e=document.createElement("video")).preload="none",this.V.appendChild(e)),e.setAttribute("tabindex","-1"),this.F=e,i.playRequest&&(this.K=i.playRequest,this.K.video=e),i.htmlScanner&&i.htmlScanner.controls&&(this.F.controls=!0),this.J=this.handleVideoEvent.bind(this),this.X=this.handleAudioEvent.bind(this),this.addVideoEventListeners(),this.addAudioEventListeners(),this.Z="none",this.tt=!1,this.nt=!1,this.it=-1,this.et=!1}U(t,null,[{key:"displayName",get:function(){return"HTMLScanner"}},{key:"supported",get:function(){return t.supportedVideoTypes.length>0}},{key:"supportedVideoTypes",get:function(){var t=[];if("function"!=typeof Je.canPlayType)return t;for(var n in Xe){var i=Xe[n];ke.android&&"application/vnd.apple.mpegurl"===n||(ke.android&&!ke.mobileAndroid&&"video/mp4"===n&&ke.android instanceof String?parseInt(ke.android.split(".")[0],10)>3&&t.push(n):Je.canPlayType(i).replace(/^no$/,"")&&t.push(n))}return t}},{key:"supportedAudioTypes",get:function(){return[]}},{key:"supportedExternalDisplays",get:function(){return[AirPlayExternalDisplay]}},{key:"supportsSettingVolume",get:function(){if(ke.android||ke.iOS||ke.iPadOS)return!1;var t=Je.volume;return Je.volume=.5*t,Je.volume!==t}},{key:"supportsTextTracks",get:function(){return void 0!==Je.textTracks&&Je.textTracks instanceof TextTrackList}},{key:"supportsVideoElementAudioTracks",get:function(){return void 0!==Je.audioTracks&&this.supportedVideoTypes.includes("application/vnd.apple.mpegurl")}}]);var n=t.prototype;return n.deactivate=function(){this.q&&(this.q.off("filesrcupdate"),this.q.off("texttracksrcupdate")),this.removeVideoEventListeners(),this.removeAudioEventListeners(),this.et||this.removeSnapshot(),this.F.style.display="none"},n.reactivate=function(){this.addVideoEventListeners(),this.addAudioEventListeners(),this.F.style.display=""},n.addVideoEventListeners=function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.F;Object.keys(Ki).forEach((function(i){var e=Ki[i];n.addEventListener(e,t.J)}))},n.addAudioEventListeners=function(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.F;(null==n?void 0:n.audioTracks)&&"function"==typeof(null==(t=n.audioTracks)?void 0:t.addEventListener)&&(n.audioTracks.addEventListener(zi.ADD_TRACK,this.X),n.audioTracks.addEventListener(zi.REMOVE_TRACK,this.X),n.audioTracks.addEventListener(zi.CHANGE,this.X))},n.removeVideoEventListeners=function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.F;Object.keys(Ki).forEach((function(i){var e=Ki[i];n.removeEventListener(e,t.J)}))},n.removeAudioEventListeners=function(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.F;(null==n?void 0:n.audioTracks)&&"function"==typeof(null==(t=n.audioTracks)?void 0:t.removeEventListener)&&(n.audioTracks.removeEventListener(zi.ADD_TRACK,this.X),n.audioTracks.removeEventListener(zi.REMOVE_TRACK,this.X),n.audioTracks.removeEventListener(zi.CHANGE,this.X))},n.play=function(t){var n=this;return this.K.start(t).catch((function(t){throw n.rt(t),t}))},n.rt=function(t){this.fire(Ki.ERROR,new TelecineError(null==t?void 0:t.name,null==t?void 0:t.message))},n.pause=function(){this.K.cancel(),this.F.pause()},n.onpause=function(){},n.ontimeupdate=function(){this.it=this.currentTime},n.addTextTrack=function(t){var n,i;return t.src?((n=document.createElement("track")).kind=t.kind,n.src=t.src,n.id="telecine-track-".concat(t.id),n.srclang=t.language,n.label=t.label,this.F.appendChild(n),i=n.track):(i=this.F.addTextTrack(t.kind,t.label,t.language),this.ot=this.ot||{},this.ot["telecine-track-".concat(t.id)]=i),this.ut(t,i,n),i},n.ut=function(t,n,i){var e=this;n.addEventListener("cuechange",(function(){return t.dispatchEvent("cuechange")})),this.F.addEventListener("timeupdate",(function(){Fe(e.F)&&(t.mode=n.mode)}));var r=function(){var i=ke.iOS&&Fe(e.F);!t.st||i?t.mode=n.mode:n.mode=Qe[t.mode]},o=[];if(i?i.addEventListener("load",r):r(),["loadeddata","seeking"].forEach((function(t){e.F.addEventListener(t,r),o.push([t,r])})),t.st&&(n.mode=Qe[t.mode]),!Ze){var u=[],s=function(){if(n&&"disabled"!==Qe[n.mode]){if(u.length!==n.activeCues.length)return t.dispatchEvent("cuechange"),void(u=se(n.activeCues));for(var i=0,e=n.activeCues.length;i<e;i++)if(n.activeCues[i].startTime!==u[i].startTime)return t.dispatchEvent("cuechange"),void(u=se(t.activeCues))}};this.F.addEventListener("timeupdate",s),o.push(["timeupdate",s])}return tr.set(t,o),n},n.removeTextTrack=function(t){var n=this,i=this.F.querySelector("#telecine-track-".concat(t.id));i&&this.F.removeChild(i);var e=tr.get(t);Array.isArray(e)&&e.forEach((function(t){var i=Y(t,2),e=i[0],r=i[1];n.F.removeEventListener(e,r)}))},n.getCuesForTrack=function(t){var n=this.getTrackById("telecine-track-".concat(t.id));return n?se(n.cues):[]},n.getActiveCuesForTrack=function(t){var n=this.getTrackById("telecine-track-".concat(t.id));return n&&n.activeCues?se(n.activeCues):[]},n.setModeForTrack=function(t,n){var i=this.getTrackById("telecine-track-".concat(t.id));return i&&i.mode!==Qe[n]&&(i.mode=Qe[n],Ze||"disabled"===n||t.dispatchEvent("cuechange")),this},n.setSrcForTrack=function(t,n){var i=this.F.querySelector("#telecine-track-".concat(t.id));return i&&null===i.track.cues&&(i.src=n),this},n.enableAudioTrack=function(t){if(!this.constructor.supportsVideoElementAudioTracks||!this.audioTracks)return null;if(!t)return null;if(!this.audioTracks.getTrackById(t))return null;for(var n=null,i=0;i<this.audioTracks.length;i++){var e=this.audioTracks[i].id===t;this.audioTracks[i].enabled=e,e&&(n=this.audioTracks[i])}return n},n.ct=function(t,n){var i,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.ht||(this.ht=this.F.addTextTrack("chapters"),this.ht.mode="hidden");var r=t.timecode,o=e?e.timecode:n,u=window.VTTCue||window.TextTrackCue;try{i=new u(r,o,t.title)}catch(t){throw new TelecineError("ChaptersNotSupported","Chapters are not supported in this browser.")}i.size=(o-r)/n,i.id=r,this.ht.addCue(i)},n.addChapter=function(t,n){var i=this.video.chapters,e={timecode:t,title:n};i.push(e),i.sort((function(t,n){return t.timecode-n.timecode}));var r=i[i.indexOf(e)+1];this.ct(e,this.video.duration,r),this.ft(this.ht,this.video.duration)},n.removeChapter=function(t){try{this.ht.removeCue(t)}catch(t){throw new TelecineError("ChaptersNotSupported","Chapters are not supported in this browser.")}var n=this.video.chapters.find((function(n){return n.timecode===t.timecode}));this.video.chapters.splice(n,1),this.ft(this.ht,this.video.duration)},n.ft=function(t,n){for(var i=0;i<t.cues.length;i++){var e=t.cues[i],r=t.cues[i+1],o=r?r.startTime:n;e.endTime=o,e.size=(o-e.startTime)/n}this.fire(Qi.CHAPTER_CUES_UPDATED)},n.addChapters=function(t,n){var i=this;0!==t.length&&n&&(t=t.filter((function(t){return i.lt(t,n)}))).sort((function(t,n){return t.timecode-n.timecode})).forEach((function(e,r){return i.ct(e,n,t[r+1])}))},n.addCuePoint=function(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.vt||(this.vt=this.F.addTextTrack("metadata"),this.vt.mode="hidden",this.vt.addEventListener("cuechange",(function(t){se(t.target.activeCues).forEach((function(t){n.fire(Qi.CUE_POINT,We.fromVTTCue(t))}))})),this.F.addEventListener("canplay",(function(t){n.vt.mode="hidden"}))),t=parseFloat(t),isNaN(t))throw new TypeError("Time must be a number.");if(t<0||t>=this.duration)throw new TypeError("Time must be a positive number less than the duration of the video.");var e=new We(t,i);return this.vt.addCue(e.vttCue),e},n.removeCuePoint=function(t){if(!t)throw new TelecineError("InvalidCuePoint","The specified cue point is not valid.");return this.vt.removeCue(t.vttCue),!0},n.removeAllCuePoints=function(){var t=this;return this.vt&&this.vt.length&&se(this.vt.cues).forEach((function(n){t.vt.removeCue(n)})),!0},n.requestPictureInPicture=function(){try{var t=this;return function(n,i){var e=function(){if(t.F.readyState<1)return function(t,n){return t&&t.then?t.then(ze):di.resolve()}(t.dt())}();return e&&e.then?e.then(i):i()}(0,(function(){switch(t.pictureInPictureSupportType){case"pip-api":return t.F.requestPictureInPicture();case"webkit-presentation-mode":return t.F.webkitSetPresentationMode("picture-in-picture");default:throw new Error("Picture-in-picture is not supported by this browser")}}))}catch(t){return di.reject(t)}},n.dt=function(){var t=this;return this.preload="auto",new di((function(n){t.once(Ki.LOADED_METADATA,n)}))},n.exitPictureInPicture=function(){try{switch(this.pictureInPictureSupportType){case"pip-api":return document.exitPictureInPicture();case"webkit-presentation-mode":return this.F.webkitSetPresentationMode("inline");default:throw new Error("Picture-in-picture is not supported by this browser")}}catch(t){return di.reject(t)}},n.onerror=function(){if(!this.F.error)return!1;switch(this.F.error.code){case this.F.error.MEDIA_ERR_SRC_NOT_SUPPORTED:return this.pt("MediaSrcNotSupportedError","The media was not suitable."),this.yt(),!1;case this.F.error.MEDIA_ERR_DECODE:return-1!==this.it&&ke.iOS?(this.F.load(),this.currentTime=this.it,this.it=-1,!1):(this.pt("MediaDecodeError","The media could not be decoded."),this.yt(),!1);case this.F.error.MEDIA_ERR_NETWORK:return this.pt("MediaNetworkError","A network error ocurred while fetching the media."),!1;case this.F.error.MEDIA_ERR_ABORTED:return this.pt("MediaAbortedError","The user agent aborted the fetching of the media."),!1;default:return this.pt("MediaUnknownError","An unknown error occurred."),!1}},n.pt=function(t,n){this.fire(Ki.ERROR,new TelecineError(t,n))},n.onended=function(){if(this.F.paused||this.F.pause(),this.currentTime<this.F.duration)return!1},n.onwaiting=function(){return!1},n.onwebkitbeginfullscreen=function(){this.nt=!0},n.onwebkitendfullscreen=function(){this.nt=!1},n.onwebkitpresentationmodechanged=function(){this.fire(this.pictureInPictureActive?Ki.ENTER_PICTURE_IN_PICTURE:Ki.LEAVE_PICTURE_IN_PICTURE)},n.shouldHandleVideoEvent=function(t){return!0},n.handleVideoEvent=function(t){t.target===this.F&&!1!==this.shouldHandleVideoEvent(t)&&("function"==typeof this["on".concat(t.type)]&&!1===this["on".concat(t.type)](t)||this.fire(t.type))},n.handleAudioEvent=function(){this.fire(Qi.AUDIO_TRACK_CHANGED)},n.swapVideo=function(t,n){var i=t.paused;this.removeVideoEventListeners(t),this.removeAudioEventListeners(t),t.parentElement.replaceChild(n,t),t.pause(),n.currentTime=t.currentTime,i||n.play(),this.addVideoEventListeners(n),this.addAudioEventListeners(n),this.F=n},n.onexternaldisplayactivated=function(t){this.tt||(this.F!==t.element&&(this.wt=this.F,this.swapVideo(this.F,t.element)),this.tt=!0)},n.onexternaldisplaydeactivated=function(t){this.tt&&(this.wt&&(this.swapVideo(t.element,this.wt),this.wt=null),this.tt=!1)},n.setVideoSrc=function(t){this.F.src=t},n.canSeekTo=function(t){var n=this.duration;if(n&&t>n&&(t=n),this.F.seekable.length>0)for(var i=0,e=this.F.seekable.length;i<e;i++)if(this.F.seekable.start(i)<=t&&this.F.seekable.end(i)>=t)return!0;return!1},n.seekToTime=function(t){var n=this;return this.canSeekTo(t)?(this.F.currentTime=t,di.resolve(this.F.currentTime)):new di((function(i,e){var r=function e(){n.canSeekTo(t)&&(Object.keys(Ki).forEach((function(t){var i=Ki[t];n.F.removeEventListener(i,e)})),n.F.currentTime=t,i(n.F.currentTime))};Object.keys(Ki).forEach((function(t){var i=Ki[t];n.F.addEventListener(i,r)}))}))},n.takeSnapshot=function(){var t=this.V.querySelector("[telecine-snapshot]");t||((t=document.createElement("canvas")).setAttribute("telecine-snapshot",""),this.V.appendChild(t)),t.setAttribute("width","".concat(this.V.clientWidth,"px")),t.setAttribute("height","".concat(this.V.clientHeight,"px")),t.style.display="";var n=Pe(this.F.clientWidth,this.F.clientHeight,this.F.videoWidth,this.F.videoHeight),i=n.width,e=n.height,r=n.left,o=n.top;t.style.cssText="position:absolute;width:".concat(i,"px;height:").concat(e,"px;left:").concat(r,"px;top:").concat(o,"px");var u=t.getContext("2d");t.width>0&&t.height>0&&u.drawImage(this.F,0,0,t.width,t.height)},n.removeSnapshot=function(){var t=this.V.querySelector("[telecine-snapshot]");t&&(t.style.display="none")},n.getTrackById=function(t){if(this.ot&&this.ot[t])return this.ot[t];if("function"==typeof this.F.textTracks.getTrackById)return this.F.textTracks.getTrackById(t);var n=document.getElementById(t);return n?n.track:null},n.initDrm=function(){var t=this.q.drmHandler;t&&t.init(this)},n.showExternalDisplayPicker=function(t){if(!this.W.length)throw new TelecineError("ExternalDisplayUnvailable","No external displays are available.");if(t){var n=this.W.filter((function(n){return n.constructor.displayName.replace("ExternalDisplay","")===t}))[0];if(!n)throw new TelecineError("InvalidExternalDisplay","The specified external display is not available.");n.showPicker()}else this.W[0].showPicker()},n.setCaptionsShouldDisplay=function(t){},n.setCaptionsShouldLoad=function(t){},n.bt=function(){return this.gt.length<1?null:this.gt.slice(0).sort((function(t,n){return t.priority-n.priority}))[0]},n.Et=function(){var t=this.bt();t?this.currentFile=t:this.fire(Qi.SCANNER_ERROR,{reason:"all files failed"})},n.lt=function(t,n){return void 0!==t.timecode&&t.timecode>=0&&t.timecode<=n&&void 0!==t.title},n.yt=function(){var t=this.gt.indexOf(this.G);this.gt.splice(t,1),this.Et()},n.$=function(){if("mediaSession"in navigator){var t={title:this.q.title,artist:this.q.subtitle,artwork:[]};this.q.metadata.thumbnail&&t.artwork.push({src:this.q.metadata.thumbnail}),navigator.mediaSession.metadata=new MediaMetadata(t)}},n.Y=function(){var t,n=this;"function"==typeof(null==(t=navigator.mediaSession)?void 0:t.setActionHandler)&&(navigator.mediaSession.setActionHandler("play",(function(){n.play().then((function(){return n.fire(ne.MEDIASESSION_PLAY)})).catch(n.rt.bind(n))})),navigator.mediaSession.setActionHandler("pause",(function(){n.pause(),n.fire(ne.MEDIASESSION_PAUSE)})),navigator.mediaSession.setActionHandler("seekforward",(function(){n.currentTime=Math.min(n.duration,n.currentTime+10),n.fire(ne.MEDIASESSION_SEEK_FORWARD)})),navigator.mediaSession.setActionHandler("seekbackward",(function(){n.currentTime=Math.max(0,n.currentTime-10),n.fire(ne.MEDIASESSION_SEEK_BACKWARD)})))},U(t,[{key:"audioTracks",get:function(){return this.F.audioTracks}},{key:"chaptersTrack",get:function(){return this.ht}},{key:"manifest",get:function(){return this._t}},{key:"manifestLoaded",get:function(){return!!this._t}},{key:"buffered",get:function(){return Ke.from(this.F.buffered)}},{key:"cuePoints",get:function(){var t,n;return(null==(t=this.vt)?void 0:t.cues)&&"function"==typeof(null==(n=this.vt)?void 0:n.cues[C.iterator])?se(this.vt.cues).map((function(t){return We.fromVTTCue(t)})):[]}},{key:"currentFile",get:function(){return this.G},set:function(n){var i=this,e=!this.F.paused,r=this.currentTime,o=!this.G||n.video.id!==this.G.video.id;if(o||this.takeSnapshot(),this.G=n,o&&(this.F.preload=this.Z),this.constructor===t&&this.F.readyState>0&&(this.F.currentTime=0),(ke.iOS||ke.android)&&this.G.video.title){var u=this.G.video.title;this.G.video.subtitle&&(u="".concat(u," ").concat(this.G.video.subtitle)),this.F.setAttribute("title",u)}else this.F.removeAttribute("title");this.setVideoSrc(this.G.src,o),this.fire(Qi.CURRENT_FILE_CHANGE,n),ke.iOS&&!o&&this.play().catch(this.rt.bind(this)),this.constructor!==t||o?e&&this.play().catch(this.rt.bind(this)):(this.seekToTime(r).then((function(t){return e&&i.play().catch(i.rt.bind(i)),t})).catch((function(){})),this.once("canplay",(function(){return i.removeSnapshot()})),this.once("playing",(function(){return i.removeSnapshot()})))}},{key:"currentTime",get:function(){return this.F.currentTime},set:function(t){this.seekToTime(t)}},{key:"duration",get:function(){return this.F.duration}},{key:"ended",get:function(){return this.F.ended}},{key:"externalDisplayAvailable",get:function(){return this.W.some((function(t){return t.available}))}},{key:"externalDisplayActive",get:function(){return this.W.some((function(t){return t.active}))}},{key:"loop",get:function(){return this.F.loop},set:function(t){this.F.loop=t}},{key:"isLowerProfileAvailable",get:function(){return null}},{key:"muted",get:function(){return this.F.muted},set:function(t){this.F.muted=t}},{key:"playsinline",get:function(){return this.F.playsinline},set:function(t){this.F.playsinline=t,t?this.F.setAttribute("playsinline",""):this.F.removeAttribute("playsinline")}},{key:"paused",get:function(){return this.F.paused}},{key:"defaultPlaybackRate",get:function(){return this.F.defaultPlaybackRate},set:function(t){this.F.defaultPlaybackRate=t}},{key:"playbackRate",get:function(){return this.F.playbackRate},set:function(t){this.F.playbackRate=t}},{key:"played",get:function(){return this.F.played}},{key:"seekable",get:function(){return this.F.seekable}},{key:"seeking",get:function(){return this.F.seeking}},{key:"preload",get:function(){return this.Z},set:function(t){this.F.preload=t,this.Z=t}},{key:"autoPictureInPicture",get:function(){return this.F.autoPictureInPicture},set:function(t){this.F.autoPictureInPicture=t}},{key:"disablePictureInPicture",get:function(){return this.F.disablePictureInPicture},set:function(t){this.F.disablePictureInPicture=t}},{key:"pictureInPictureActive",get:function(){return"picture-in-picture"===this.F.webkitPresentationMode||!!document.pictureInPictureElement}},{key:"pictureInPictureEnabled",get:function(){if(this.disablePictureInPicture)return!1;switch(this.pictureInPictureSupportType){case"pip-api":return document.pictureInPictureEnabled;case"webkit-presentation-mode":return!0;default:return!1}}},{key:"pictureInPictureSupportType",get:function(){return"pictureInPictureEnabled"in document?"pip-api":!("function"!=typeof this.F.webkitSetPresentationMode||!this.F.webkitSupportsPresentationMode("picture-in-picture"))&&"webkit-presentation-mode"}},{key:"video",get:function(){return this.q},set:function(t){var n=this;if(this.reactivate(),this.q!==t){if(this.q&&(this.q.off("filesrcupdate"),this.q.off("texttracksrcupdate")),this.removeAllCuePoints(),this.q=t,this.gt=t.files.filter((function(t){return-1!==n.constructor.supportedVideoTypes.indexOf(t.mime)})),this.q.on("filesrcupdate",(function(t){t===n.G&&n.Et()})),this.q.on("texttracksrcupdate",(function(t){n.video.currentScanner&&n.video.currentScanner.setSrcForTrack(t,t.src)})),this.B.externalDisplays&&this.B.externalDisplays.length){this.W=[];var i=this.constructor.supportedExternalDisplays;Array.isArray(i)||(i=[]);var e=i.map((function(t){return t.displayName}));this.B.externalDisplays.filter((function(t){return t.supported&&-1!==e.indexOf(t.displayName)})).forEach((function(i){var e=new i(t),r=i.displayName.replace("ExternalDisplay","");e.on(Ki.LOADED_METADATA,(function(t){return n.fire(Ki.LOADED_METADATA,t)})),e.on("available",(function(){return n.fire(Ji.AVAILABLE,{type:r})})),e.on("unavailable",(function(){return n.fire(Ji.UNAVAILABLE,{type:r})})),e.on("activated",(function(){"function"==typeof n.onexternaldisplayactivated&&n.onexternaldisplayactivated(e),n.fire(Ji.ACTIVATED,{type:r})})),e.on("deactivated",(function(){"function"==typeof n.onexternaldisplaydeactivated&&n.onexternaldisplaydeactivated(e),n.fire(Ji.DEACTIVATED,{type:r})})),n.W.push(e)}))}this.Et(),ke.iOS&&this.W.forEach((function(t){"AirPlay"===t.constructor.displayName&&(t.element=n.F)})),this.initDrm()}}},{key:"videoElement",get:function(){return this.F}},{key:"videoWidth",get:function(){return this.F.videoWidth}},{key:"videoHeight",get:function(){return this.F.videoHeight}},{key:"volume",get:function(){return function(t){return Math.sqrt(t)}(this.F.volume)},set:function(t){this.F.volume=function(t){return Math.pow(t,2)}(t)}},{key:"readyState",get:function(){return this.F.readyState}},{key:"supportsPlaybackRate",get:function(){if(ke.android&&Re&&Re.major<52)return!1;var t=Je.playbackRate;Je.playbackRate=.5*t;var n=t!==Je.playbackRate;return Je.playbackRate=t,n}}]),t}(),ir={};try{ir.Set=Set}catch(t){!function(t,n){var i=n(e.prototype,{size:{configurable:!0,get:function(){return this.kt.length}}});function e(t){n(this,{kt:{value:[]}}),t&&t.forEach(this.add,this)}function r(n,i){return-1<(t=n.kt.indexOf(i))}function o(t){return[t,t]}i.add=function(t){return r(this,t)||this.kt.push(t),this},i.clear=function(){var t=this.kt.length;this.kt.splice(0,t)},i.delete=function(n){return r(this,n)&&!!this.kt.splice(t,1)},i.entries=function(){return this.kt.map(o)},i.forEach=function(t,n){this.kt.forEach((function(i,e){t.call(n,i,i,this)}),this)},i.has=function(t){return r(this,t)},i.keys=i.values=function(){return this.kt.slice(0)},ir.Set=e}(0,Object.defineProperties)}var er=ir.Set,rr={method:"GET",async:!0,retry:0,throwHttpErrors:!0,headers:{},hooks:{beforeRequest:[],beforeRetry:[],afterResponse:[]},validateStatus:function(t){return t>=200&&t<300},retryStatus:function(t){return[408,413,429].includes(t)||t>=500&&t<600}};function or(t,n){var i=this;this.headers={},this.perfTimings={},wi(this,n),this.ok=2==(this.status/100|0),this.body=t,this.text=function(){return di.resolve(t)},this.json=function(){return di.resolve(JSON.parse(t))},this.blob=function(){return di.resolve(new Blob([t]))},this.arrayBuffer=function(){return di.resolve(t)},this.clone=function(){return new or(t,i)},this.isVimeoResponse=!0}var ur=function(t){function n(){var n;return(n=t.call(this,"The operation was aborted.")||this).name="AbortError",n}return F(n,t),n}(G(Error)),sr=function(t){function n(n){var i;return(i=t.call(this,n.statusText)||this).name="HTTPError",i.response=n,i}return F(n,t),n}(G(Error)),ar=function(t){function n(){var n;return(n=t.call(this,"A network error occurred.")||this).name="NetworkError",n}return F(n,t),n}(G(Error)),cr=function(t){function n(n){var i;return(i=t.call(this,"Request timed out.")||this).name="TimeoutError",i.timeoutMs=n,i}return F(n,t),n}(G(Error));function hr(){}function fr(t,n,i){if(!t.s){if(i instanceof lr){if(!i.s)return void(i.o=fr.bind(null,t,n));1&n&&(n=i.s),i=i.v}if(i&&i.then)return void i.then(fr.bind(null,t,n),fr.bind(null,t,2));t.s=n,t.v=i;var e=t.o;e&&e(t)}}var lr=function(){function t(){}return t.prototype.then=function(n,i){var e=new t,r=this.s;if(r){var o=1&r?n:i;if(o){try{fr(e,1,o(this.v))}catch(t){fr(e,2,t)}return e}return this}return this.o=function(t){try{var r=t.v;1&t.s?fr(e,1,n?n(r):r):i?fr(e,1,i(r)):fr(e,2,r)}catch(t){fr(e,2,t)}},e},t}();function vr(t){return t instanceof lr&&1&t.s}function dr(t){var n=function(t){return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];try{return di.resolve(t.apply(this,n))}catch(t){return di.reject(t)}}}((function(e){return function(t,n){try{var i=t()}catch(t){return n(t)}return i&&i.then?i.then(void 0,n):i}(e,(function(r){var o=!1;i++;var u=function(n){if(!t.retryAbortErrors&&n instanceof ur)return 0;if(n instanceof cr)return 0;if(i>=t.retry)return 0;if(n instanceof sr){if(!t.retryStatus(n.response.status))return 0;var e=n.response.headers["retry-after"];if(e&&t.retryStatus(n.response.status)){var r=Number(e);return isNaN(r)?r=Date.parse(e)-Date.now():r*=1e3,r}if(413===n.response.status)return 0}return.3*Math.pow(2,i-1)*1e3}(r);return function(s,a){var c=function(){if(0!==u&&i>0)return function(t,n,i){return t&&t.then||(t=di.resolve(t)),n?t.then(n):t}(pi(u),(function(){var u=t.hooks.beforeRetry||[];return function(t,n){return t&&t.then?t.then(n):n()}(function(t,n,i){var e,r,o=-1;return function i(u){try{for(;++o<t.length;)if((u=n(o))&&u.then){if(!vr(u))return void u.then(i,r||(r=fr.bind(null,e=new lr,2)));u=u.v}e?fr(e,1,u):e=u}catch(t){fr(e||(e=new lr),2,t)}}(),e}(u,(function(n){return function(t,n){return t&&t.then?t.then(hr):di.resolve()}((0,u[n])(t,r,i))})),(function(){return o=!0,n(e)}))}))}();return c&&c.then?c.then(a):a(c)}(0,(function(n){if(o)return n;if(t.throwHttpErrors)throw r}))}))})),i=0;return n}function pr(t,n,i){return i?n?n(t):t:(t&&t.then||(t=di.resolve(t)),n?t.then(n):t)}function mr(t,n,i){if(!t.s){if(i instanceof yr){if(!i.s)return void(i.o=mr.bind(null,t,n));1&n&&(n=i.s),i=i.v}if(i&&i.then)return void i.then(mr.bind(null,t,n),mr.bind(null,t,2));t.s=n,t.v=i;var e=t.o;e&&e(t)}}var yr=function(){function t(){}return t.prototype.then=function(n,i){var e=new t,r=this.s;if(r){var o=1&r?n:i;if(o){try{mr(e,1,o(this.v))}catch(t){mr(e,2,t)}return e}return this}return this.o=function(t){try{var r=t.v;1&t.s?mr(e,1,n?n(r):r):i?mr(e,1,i(r)):mr(e,2,r)}catch(t){mr(e,2,t)}},e},t}();function wr(t){return t instanceof yr&&1&t.s}function br(t,n,i){var e,r,o=-1;return function u(s){try{for(;++o<t.length&&(!i||!i());)if((s=n(o))&&s.then){if(!wr(s))return void s.then(u,r||(r=mr.bind(null,e=new yr,2)));s=s.v}e?mr(e,1,s):e=s}catch(t){mr(e||(e=new yr),2,t)}}(),e}function gr(t,n){return t&&t.then?t.then(n):n(t)}function Er(t){return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];try{return di.resolve(t.apply(this,n))}catch(t){return di.reject(t)}}}var _r={json:"application/json",text:"text/plain",arrayBuffer:"*/*",blob:"*/*"},kr=["get"];function Tr(t,n){var i=Er((function(){var t=!1,i=!1,e=n.hooks.beforeRequest||[];return gr(br(e,(function(r){return pr((0,e[r])(n),(function(e){return e instanceof Sr?(n=e,void(i=!0)):(null==e?void 0:e.isVimeoResponse)?(t=!0,di.resolve(e).then(Ar(n))):void 0}))}),(function(){return i||t})),(function(i){return t?i:function(t,n){var i=t.url,e=t.method,r=t.body,o=t.onDownloadProgress,u=100;return new di((function(s,a){var c=n?new n:new XMLHttpRequest,h=window.performance;for(var f in c.open(e.toUpperCase(),i,t.async),t.timeout&&(c.timeout=t.timeout),c.onload=function(){if(0!==c.status||c.responseURL&&0===c.responseURL.indexOf("file:")){var t={};c.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(function(n,i,e){t[i]=t[i]?"".concat(t[i],",").concat(e):e}));var n={};if(window.performance&&void 0!==window.performance.getEntriesByType){var i=window.performance.getEntriesByType("resource");if(i.length&&i.length>=u&&("function"==typeof h.clearResourceTimings&&h.clearResourceTimings(),"function"==typeof h.setResourceTimingBufferSize&&(h.setResourceTimingBufferSize(500),u=500)),i.length){var e=i.filter((function(t){return t.name===c.responseURL})).sort((function(t,n){return t.connectStart-n.connectStart}));e.length&&(n=e[e.length-1].toJSON())}}s(new or(c.response,{headers:t,statusText:c.statusText,status:c.status,url:c.responseURL,perfTimings:n}))}},c.onabort=function(){a(new ur)},c.onerror=function(){a(new ar)},c.ontimeout=function(){a(new cr(t.timeout))},"function"==typeof o&&c.addEventListener("progress",o),t.headers)c.setRequestHeader(f,t.headers[f]);t.withCredentials&&(c.withCredentials=!0),t.responseType&&(c.responseType=t.responseType),t.abort=c.abort.bind(c),c.send(r||null)}))}(n).then(Ar(n))}))})),e=n=new Sr(t,n),r=e.method,o=e.json,u=e.jwt,s=e.searchParams;if(o&&(n.headers["Content-Type"]=_r.json,n.body=JSON.stringify(o)),u&&(n.headers.Authorization="jwt ".concat(u)),s){var a=Y(n.url.split("?"),2),c=a[0],h=a[1];n.url=Si(c,P(P({},Ti(h)),s))}var f=-1!==kr.indexOf(r.toLowerCase())?dr(n)(i):i(),l=function(t){f[t]=Er((function(){return n.headers["Content-Type"]=_r[t],pr(f,(function(n){return n.clone()[t]()}))}))};for(var v in _r)l(v);return function t(n,i){var e=n.then.bind(n);return Object.assign(n,{abort:i,then:function(){return t(e.apply(void 0,arguments),i)}})}(f,(function(){return n.abort()}))}function Sr(t,n){wi(this,rr,t="string"==typeof t?{url:t}:t,n)}function Ar(t){var n=t.validateStatus,i=t.throwHttpErrors,e=t.hooks;return Er((function(r){var o=e.afterResponse||[];return gr(br(o,(function(n){return pr((0,o[n])(t,r.clone()),(function(t){t instanceof or&&(r=t)}))})),(function(){if(!n||n(r.status))return r;if(i)throw new sr(r);return r}))}))}["get","post","put","patch","head","delete"].forEach((function(t){return Tr[t]=function(n,i){return Tr(n,P({method:t},i))},Tr[t]}));function Mr(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(0===t.length)return 0;for(var i=0,e=0,r=0;r<t.length;r++){var o=n[r]||1;e+=o,i+=t[r]*o}return i/e}function Or(t){if(0===t.length)return 0;for(var n=0,i=0;i<t.length;i++)n+=1/t[i];return t.length/n}function Rr(t,n){if(t.sort(),0===t.length)return 0;if(n<=0)return t[0];if(n>=1)return t[t.length-1];var i=t.length*n,e=Math.floor(i),r=e+1,o=i%1;return r>=t.length?t[e]:t[e]*(1-o)+t[r]*o}function Ir(t){t.sort((function(t,n){return t-n}));var n=Math.floor(t.length/2);return t.length%2?t[n]:(t[n-1]+t[n])/2}function Cr(){return"undefined"!=typeof performance?performance.now():Date.now()}var Nr=function(t){function n(){return t.apply(this,arguments)||this}return F(n,t),n}(G(Error));function jr(){}var Dr=[],Ur=[],xr=[];function Lr(t,n,i){return i?n?n(t):t:(t&&t.then||(t=di.resolve(t)),n?t.then(n):t)}var Pr=[],Fr=function(){function t(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.retryCount,i=void 0===n?3:n,e=t.parallel,r=void 0===e?1:e,o=t.includeWithSpeeds,u=void 0===o||o,s=t.timeout,a=void 0===s?0:s,c=t.retryAbortErrors,h=void 0===c||c;this.Tt=[],this.St=new er,this.At=new re,this.Mt=i,this.Ot=!1,this.Rt=!1,this.It=r,this.Ct=u,this.Nt=a,this.jt=h,this.Dt()}t.getPercentileSpeed=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.8,i=Dr.slice(-t);return Rr(i,n)},t.getAverageSpeed=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=Dr.slice(-t);return Mr(i,n)},t.getHarmonicAverageSpeed=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,n=Dr.slice(-t);return Or(n)},t.getVolatilityScaler=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,n=Dr.slice(-t);if(n.length<3)return null;var i=Mr(n,[]),e=Math.min.apply(Math,$(n));return e/i},t.getMedianSpeed=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,n=Dr.slice(-t);return Ir(n)},t.getResponseSpeeds=function(){return Dr},t.getProgressSpeeds=function(){return Pr},t.getFailedSegments=function(){return Ur},t.getSuccessfulSegments=function(){return xr};var n=t.prototype;return n.add=function(t,n){var i=this;return new di((function(e,r){var o=i.Ut(t,e,r);i.xt(o,n),i.Ot&&!i.Rt&&i.Lt()}))},n.start=function(){this.Ot||(this.Ot=!0,this.Lt())},n.stop=function(){this.Ot=!1},n.abort=function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=this.Tt.filter((function(t){return!n||n===t.stream}));i.forEach((function(n){n.reject(new Nr("Stream manually aborted")),t.fire("downloadabort",n.identifier)})),this.Tt=this.Tt.filter((function(t){return n&&n!==t.stream})),this.St.forEach((function(t){n&&n!==t.stream||t.request.abort()}))},n.Pt=function(t){for(var n=0;n<this.Tt.length&&!(this.Tt[n].priority>t.priority);n++);this.Tt.splice(n,0,t)},n.Dt=function(){var t=this;this.Ft=new re,ai(this),window.addEventListener("online",(function(){t.start(),t.Ht&&(t.Ht.resolve(),t.Ht=null)})),window.addEventListener("offline",(function(){t.stop(),t.abort(),t.Ht=new bi}))},n.xt=function(t,n){t.hasOwnProperty("priority")?this.Pt(t):this.Tt[n?"unshift":"push"](t)},n.Lt=function(){if(this.Ot){this.Rt=!0;for(var t=this.It-this.St.size,n=0;n<t;n++)this.Vt()}},n.Ut=function(t,n,i){var e=t;return t.id&&(e=t.id),P(P({},t),{},{identifier:e,resolve:n,reject:i})},n.Bt=function(){0!==this.St.size||0!==this.Tt.length?this.St.size<this.It&&this.Lt():this.Rt=!1},n.Vt=function(){if(0!==this.Tt.length){var t=this.Tt.shift(),n=t.url,i=t.byteRange,e=t.isInitSegmentRequest,r=t.identifier,o=t.timeout,u={stream:t.stream,data:{url:n,isInitSegmentRequest:e,requestSendTime:Cr(),uuid:([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(t){return(t^16*Math.random()>>t/4).toString(16)}))}},s=this.Nt,a=parseInt(o,10);a>=0&&(s=a);var c={url:n,type:"segment",responseType:"arraybuffer",retry:this.Mt,hooks:{beforeRetry:[this.qt.bind(this)]},onDownloadProgress:this.Gt(r,u),headers:i&&{Range:"bytes=".concat(i)},retryAbortErrors:this.jt,timeout:s};this.fire("downloadstart",r),u.request=Tr(c).then(this.Wt(u,t)).catch(this.Yt(u,t)),this.St.add(u)}else this.Rt=!1},n.qt=function(){try{var t=this;return function(n){var i=function(){if(t.Ht)return function(t,n){return t&&t.then?t.then(jr):di.resolve()}(t.Ht)}();if(i&&i.then)return i.then(jr)}()}catch(t){return di.reject(t)}},n.Gt=function(t,n){var i=this,e=0,r=0,o=Cr();return function(u){if(u.lengthComputable){var s=8*(u.loaded-r),a=Cr(),c=a-o,h={startTime:o,length:c,bitrate:s/(c/1e3),index:e};e>0&&(Pr.length>=100&&Pr.shift(),Pr.push(h)),o=a,r=u.loaded,e+=1,i.Ft.set(n,{bytesTotal:u.total,bytesLoaded:u.loaded,percent:u.loaded/u.total,identifier:t}),i.fire("progress",t)}}},n.Wt=function(t,n){var i=this,e=Cr(),r=n.identifier,o=n.resolve;return function(t){return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];try{return di.resolve(t.apply(this,n))}catch(t){return di.reject(t)}}}((function(u){var s=Cr()-e;return Lr(u.arrayBuffer(),(function(e){return t.data.duration=Cr()-t.data.requestSendTime,i.St.delete(t),i.Ft.delete(t),i.$t(n,s,e.byteLength),i.fire("downloadend",r,{request:t,response:u}),xr.push({url:t.data.url,status:200,duration:t.data.duration}),Lr(i.Kt(t,e),(function(t){o(e=t),i.Bt()}))}))}))},n.$t=function(t,n,i){var e=t.includeWithBandwidthChecks,r=n/1e3;if(i>8e3){var o=8*i,u=o/r;if(t.excludeConnectTime&&o<=16e5){var s=(50*Math.max(0,1-o/16e5)+150)/1e3;u=o/Math.max(.1,r-s)}Dr.length>100&&Dr.shift(),this.Ct&&e&&Dr.push(u)}},n.Kt=function(t,n){return t.data.url&&t.data.url.match(".ts$")?this.zt(t,n):di.resolve(new Uint8Array(n))},n.zt=function(t,n){try{var i=this;return function(t,n){var e=function(){if(!i.Jt)return Lr(i.Xt(),(function(t){i.Jt=new t({keepOriginalTimestamps:!0})}))}();return e&&e.then?e.then(n):n()}(0,(function(){return new di((function(e){i.Jt.on("data",(function(n){i.Jt.off("data");var r=new Uint8Array(n.initSegment.byteLength+n.data.byteLength);r.set(n.initSegment,0),r.set(n.data,n.initSegment.byteLength),e(t.data.isInitSegmentRequest?n.initSegment:r)})),i.Jt.push(new Uint8Array(n)),i.Jt.flush()}))}))}catch(t){return di.reject(t)}},n.Yt=function(t,n){var i=this,e=n.identifier,r=n.reject,o=n.size;return function(n){var u=Cr()-t.data.requestSendTime;if(t.data.duration=u,n instanceof ur)Ur.push({url:t.data.url,status:"abort",duration:u}),i.fire("downloadabort",e);else if(n instanceof sr)Ur.push({url:t.data.url,status:n.response.status,duration:u}),i.fire("downloaderror",e,n.response.status);else if(n instanceof cr){if(Ur.push({url:t.data.url,status:"timeout",duration:u}),o>0&&n.timeoutMs>0){var s=8*o/(n.timeoutMs/1e3);s*=.5,Dr.push(s)}i.fire("downloadtimeout",e,{timeoutMs:n.timeoutMs})}i.Ft.delete(t),i.St.delete(t),r(n),i.Bt()}},n.Xt=function(){return yi("module/mux-mp4.js")},U(t,[{key:"parallel",get:function(){return this.It},set:function(t){this.It=t}},{key:"pendingFetches",get:function(){var t=this,n=[];return this.St.forEach((function(i){if(t.Ft.get(i)){var e=t.Ft.get(i);e.elapsedTime=Cr()-i.data.requestSendTime,n.push(e)}})),n}}]),t}(),Hr=function(){function t(t){ai(this),this.Qt=t,this.Zt=null,this.tn=null,this.nn=!1,this.rn=!0,this.un=null,this.sn=[],this.an=[],this.cn=!1,this.hn=null,this.fn=!1,this.ln=void 0,this.vn=!1,this.dn=!0,this.pn={},this.mn=this.yn.bind(this),this.Qt.on("durationset",this.wn.bind(this))}var n=t.prototype;return n.addStream=function(t){var n=this;t.on("segmentadd",(function(){return n.bn()}));var i=this.an.push(t)-1;t.index=i,null===this.tn&&(this.gn(i),this.nn=!0)},n.streamIndexAtTime=function(t){return this.pn[void 0]?{stream:this.activeStreamIndex}:this.pn[Math.floor(t/6)]},n.switchTo=function(t){var n=this,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t;"object"===j(t)&&(r=t.index);var o=this.tn!==r,u=o;if(!o&&this.nn&&(o=!0),o){this.nn=!1;var s=this.tn,a=this.an[s];this.fire("streamchangestart",s,r),a&&u&&i&&a.abort(),this.En=r,this.gn(r)}return this.bn(),new di((function(t){o?n._n=function(){n.En===r&&(n._n=null,t(),n.fire("streamchange",r,e))}:t()}))},n.isTimeInBuffer=function(t){for(var n=0;n<this.Zt.buffered.length;n++){var i=this.Zt.buffered.start(n),e=this.Zt.buffered.end(n);if(i<=t&&e>=t)return!0}return!1},n.hasAppendedFinalSegment=function(){return void 0!==this.ln&&this.isTimeInBuffer(this.ln)},n.clear=function(){this.an.forEach((function(t){return t.clear()}))},n.remove=function(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.Qt.kn.duration;return new di((function(e,r){n.sn.push([t,i,e]),n.bn()}))},n.removeEventListeners=function(){this.Zt&&this.Zt.removeEventListener("updateend",this.mn)},n.wn=function(){var t=this.Qt.kn.duration,n=Math.floor(t/6);n+=6%t>1?1:0;for(var i=0;i<n;i++)this.pn[i]={stream:null,segment:i,type:"video"}},n.Tn=function(){this.Zt.addEventListener("updateend",this.mn)},n.gn=function(t){this.rn=!0,this.tn=t,this.Qt.Sn.streamIndex=t},n.yn=function(){this.An(),this.Mn(),this.bn()},n.An=function(){if(this.fn&&this.endTime)return this.fn=!1,this.ln=this.endTime,void this.Qt.checkEndOfStream();!this.activeStream.hasNextSegment()&&this.ln>0&&"open"===this.Qt.kn.readyState&&this.Qt.checkEndOfStream()},n.Mn=function(){this.un&&(this.fire("appendbufferend",this.un),this.un=null,this._n&&this._n())},n.bn=function(){if(this.Zt){if(this.activeStream&&"closed"!==this.Qt.kn.readyState&&!this.Zt.updating)if(this.sn.length)this.On();else if(!this.cn&&!this.vn)return this.rn?(this.rn=!1,void this.Rn()):void this.In()}else this.on("sourcebufferattach",this.bn)},n.On=function(){var t=this,n=Y(this.sn.shift(),3),i=n[0],e=n[1],r=n[2];this.Zt.addEventListener("updateend",(function n(i){t.Zt.removeEventListener("updateend",n),r(),clearTimeout(t.hn),t.hn=setTimeout((function(){t.cn=!1,t.bn()}),5e3)})),this.Zt.remove(i,e)},n.Rn=function(){var t=this;this.vn=!0,this.activeStream.getInitSegment().then((function(n){return t.un=null,t.Zt.appendBuffer(n),t.vn=!1,n})).catch((function(n){t.rn=!0,t.vn=!1}))},n.In=function(){var t=this.activeStream.getNextSegment();if(null!==t){var n=this.activeStream.getIdForSegment(t);this.activeStream.isFinal(t)&&(this.fn=!0),this.un=n,this.fire("appendbufferstart",n);try{this.Zt.appendBuffer(t),this.pn[n.segment]=n,this.dn&&(this.dn=!1,this.fire("initialbufferstart"))}catch(n){if("QuotaExceededError"===n.name){if(this.cn=!0,this.fire("quotaexceedederror",this.Zt.buffered),this.Qt.F.currentTime>6){var i=this.Qt.F.currentTime-6;this.Qt.removeBuffer(0,i)}this.activeStream.Cn.unshift(t)}}}},U(t,[{key:"streams",get:function(){return this.an}},{key:"activeStreamIndex",get:function(){return this.tn}},{key:"activeStream",get:function(){return this.an[this.tn]}},{key:"sourceBuffer",get:function(){return this.Zt},set:function(t){this.Zt=t,this.Tn(),this.fire("sourcebufferattach")}},{key:"endTime",get:function(){var t=this.Zt.buffered;if(t.length>0)return t.end(t.length-1)}}]),t}();function Vr(){}var Br,qr=function(){function t(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Fr;ai(this),this.Cn=[],this.Nn=t,this.rn=!0,this.jn=NaN,this.Dn=n,this.Un=i,this.Un.start(),this.xn=new re,this.Ln={}}t.isValidSegmentUrl=function(t){return"string"==typeof t||"string"==typeof t.url&&"string"==typeof t.byteRange};var n=t.prototype;return n.getIdForSegment=function(n){return t.isValidSegmentUrl(n)?this.Ln[n]:this.xn.get(n).id},n.isFinal=function(t){return this.xn.get(t).final},n.addSegment=function(n){var i=this,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.identifier,o=void 0===r?null:r,u=e.isFinalSegment,s=void 0!==u&&u,a=e.loadOnly,c=void 0!==a&&a,h=e.priority,f=void 0===h?0:h,l=e.includeWithBandwidthChecks,v=void 0===l||l,d=e.excludeConnectTime,p=void 0!==d&&d,m=e.timeout,y=void 0===m?null:m,w=e.size,b=void 0===w?null:w;return this.rn&&this.getInitSegment(),t.isValidSegmentUrl(n)?(this.Ln[n]=o||n,this.fire("queued",this.getIdForSegment(n)),this.Un.add({url:n.url||n,byteRange:n.byteRange,id:this.getIdForSegment(n),stream:this,includeWithBandwidthChecks:v,excludeConnectTime:p,isInitSegmentRequest:!1,priority:f,timeout:y,size:b}).then((function(t){i.xn.set(t,{id:o||n,final:s}),i.Cn.push(t),i.fire("bufferqueueadd",i.getIdForSegment(n)),c||i.fire("segmentadd")}))):(this.xn.set(n,{id:o,final:s}),this.Cn.push(n),this.fire("bufferqueueadd",o),di.resolve())},n.clear=function(){this.Cn=[]},n.abort=function(){try{var t=this;return function(n,i){var e=function(){if(t.rn)return function(t){if(t&&t.then)return t.then(Vr)}(function(n,i){try{var e=function(t,n){return t&&t.then?t.then(Vr):di.resolve()}(t.getInitSegment())}catch(t){return}return e&&e.then?e.then(void 0,i):e}(0,(function(t){})))}();return e&&e.then?e.then(i):i()}(0,(function(){t.Un.abort(t)}))}catch(t){return di.reject(t)}},n.hasNextSegment=function(){return this.Cn.length>0},n.getNextSegment=function(){return 0===this.Cn.length?null:this.Cn.shift()},n.getInitSegment=function(){var n=this,i="object"===j(this.Nn)&&"url"in this.Nn?this.Nn.url:this.Nn;return i?(this.rn=!1,t.isValidSegmentUrl(i)?this.Un.add({url:i,byteRange:this.Nn.byteRange,id:null,stream:this,isInitSegmentRequest:!0,priority:0}).then((function(t){return n.Nn=t,n.Nn})):di.resolve(this.Nn)):di.resolve(null)},U(t,[{key:"codec",get:function(){return this.Dn},set:function(t){this.Dn=t}},{key:"index",get:function(){return this.jn},set:function(t){this.jn=t}},{key:"pendingFetches",get:function(){return this.Un.pendingFetches}}]),t}(),Gr=function(){function t(t){this.F=t,this.Ot=!1,this.Pn=null,this.Fn={},this.Hn={},this.Vn=0,this.Bn=0,this.qn="default",this.Gn=!1,this.bound={startCheckingDroppedFrames:this.Wn.bind(this),stopCheckingDroppedFrames:this.Yn.bind(this),handleVisibilityChanged:this.$n.bind(this)}}var n=t.prototype;return n.init=function(){this.Tn()},n.start=function(){return this.Wn(),this},n.stop=function(){return this.Yn(),this},n.destroy=function(){this.Yn(),this.Kn()},n.getDroppedFrameRate=function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"average",e=this.Fn[n];if(!e)return 0;if(e.length<t)return 0;var r=e.slice(-t);return"median"===i?Ir(r):Mr(r)},n.getDroppedFrameTotal=function(){return{dropped:this.zn(),total:this.Jn()}},n.Tn=function(){this.Gn||(this.F.addEventListener("playing",this.bound.startCheckingDroppedFrames),this.F.addEventListener("pause",this.bound.stopCheckingDroppedFrames),this.F.addEventListener("ended",this.bound.stopCheckingDroppedFrames),document.addEventListener("visibilitychange",this.bound.handleVisibilityChanged),this.Gn=!0)},n.Kn=function(){this.F.removeEventListener("playing",this.bound.startCheckingDroppedFrames),this.F.removeEventListener("pause",this.bound.stopCheckingDroppedFrames),this.F.removeEventListener("ended",this.bound.stopCheckingDroppedFrames),document.removeEventListener("visibilitychange",this.bound.handleVisibilityChanged),this.Gn=!1},n.Wn=function(){this.Ot=!0,this.Xn()},n.Yn=function(){this.Ot=!1},n.Xn=function(){var t=this;if(this.Ot&&null!==this.qn&&(!ke.browser.safari||!document.hidden&&"hidden"!==document.visibilityState)){clearTimeout(this.Pn);var n=this.zn(),i=n-this.Vn;this.Vn=n;var e=this.Qn(),r=e-this.Bn;this.Bn=e,this.Fn[this.qn]||(this.Fn[this.qn]=[]),this.Hn[this.qn]||(this.Hn[this.qn]=[]),this.Fn[this.qn].length>100&&this.Fn[this.qn].shift(),this.Hn[this.qn].length>100&&this.Hn[this.qn].shift(),this.Fn[this.qn].push(i),this.Hn[this.qn].push(r),this.Pn=setTimeout((function(){t.Xn()}),1e3)}},n.$n=function(){!ke.browser.safari||document.hidden&&"hidden"===document.visibilityState||this.Xn()},n.zn=function(){return"function"==typeof this.F.getVideoPlaybackQuality?this.F.getVideoPlaybackQuality().droppedVideoFrames:this.F.webkitDroppedFrameCount||0},n.Jn=function(){return"function"==typeof this.F.getVideoPlaybackQuality?this.F.getVideoPlaybackQuality().totalVideoFrames:this.F.webkitDecodedFrameCount||0},n.Qn=function(){if("function"==typeof this.F.getVideoPlaybackQuality){var t=this.F.getVideoPlaybackQuality();return t.totalVideoFrames-t.droppedVideoFrames-t.corruptedVideoFrames}return this.F.webkitDecodedFrameCount||0},U(t,[{key:"streamIndex",get:function(){return this.qn},set:function(t){this.qn=t}}]),t}(),Wr=function(){function t(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.F=t,this.B=n,ai(this);var i=this.B,e=i.fetcherTimeout,r=void 0===e?0:e,o=i.fetcherRetryAbortErrors,u=void 0===o||o;this.Sn=new Gr(t),this.kn=new MediaSource,this.Un=new Fr({parallel:1,timeout:r,retryAbortErrors:u}),this.Zn={},this.ti=[],this.ni=null,this.ii=this.ei.bind(this),this.Tn()}var n=t.prototype;return n.switchTo=function(t){return 1===this.ti.length&&this.video.switchTo(t)},n.getCurrentSpeed=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.type,i=void 0===n?"average":n,e=t.howMany,r=void 0===e?10:e,o=t.weights,u=void 0===o?[]:o,s=t.percentile,a=void 0===s?null:s;return"harmonicAverage"===i?Fr.getHarmonicAverageSpeed(r):"average"===i?Fr.getAverageSpeed(r,u):"median"===i?Fr.getMedianSpeed(r):Fr.getPercentileSpeed(r,a)},n.getVolatilityScaler=function(t){return Fr.getVolatilityScaler(t)},n.getResponseSpeeds=function(){return Fr.getResponseSpeeds()},n.getFailedSegments=function(){return Fr.getFailedSegments()},n.getSuccessfulSegments=function(){return Fr.getSuccessfulSegments()},n.getDroppedFrameRate=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.activeStreamIndex,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"average";return this.Sn.getDroppedFrameRate(t,n,i)},n.getDroppedFrameTotal=function(){return this.Sn.getDroppedFrameTotal()},n.clear=function(){this.ti.forEach((function(t){return t.clear()}))},n.initFrameDropper=function(){this.Sn.init()},n.streamIndexAtTime=function(t,n){return this.Zn[n].streamIndexAtTime(t)?this.Zn[n].streamIndexAtTime(t).stream:null},n.removeBuffer=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.F.duration;if(t>=(n=n||0))return di.resolve();var i=this.ti.map((function(i){return i.remove(t,n)}));return di.all(i)},n.setLiveSeekableRange=function(t,n){var i;"open"===this.kn.readyState&&(null==(i=this.kn)||i.setLiveSeekableRange(t,n))},n.addStream=function(t,n){var i=this,e=this.ri(t);if(!this.Zn[e]){var r=new Hr(this,e);this.Zn[e]=r,this.ti.push(r),this.readyPromise.then((function(){var n;try{n=i.kn.addSourceBuffer(t)}catch(t){if(22!==t.code)return void i.fire("srcnotsupported",t);n=i.Zn[e]}i.B.duration&&(n.appendWindowEnd=i.B.duration+.1),r.sourceBuffer=n})).catch((function(t){})),["appendbufferstart","appendbufferend","streamchange","streamchangestart","initialbufferstart","quotaexceedederror"].forEach((function(t){r.on(t,(function(n){i.fire(t,n)}))}))}var o=new qr(n,t,this.Un);return["queued","bufferqueueadd"].forEach((function(t){o.on(t,(function(n){i.fire(t,n)}))})),this.Zn[e].addStream(o),o},n.checkEndOfStream=function(){var t=this;this.ti.every((function(t){return t.hasAppendedFinalSegment()}))&&this.F.addEventListener("timeupdate",(function n(){t.F.removeEventListener("timeupdate",n),t.ti.every((function(n){return n.isTimeInBuffer(t.F.currentTime)}))&&t.endOfStream()}))},n.abortFetches=function(){this.Un.abort()},n.endOfStream=function(){"open"===this.kn.readyState&&(this.oi()||(this.kn.endOfStream(),this.fire("endofstream")))},n.destroy=function(){this.clear(),this.ui(),this.off(),this.Sn.destroy(),this.Un.abort(),this.F.src&&(this.F.removeAttribute("src"),this.F.load())},n.Tn=function(){var t=this;this.readyPromise=new di((function(n,i){t.ni=n,t.kn.addEventListener("sourceopen",t.ii)})),["downloadstart","downloadend","downloadabort","downloaderror","downloadtimeout","progress"].forEach((function(n){t.Un.on(n,(function(){for(var i=arguments.length,e=new Array(i),r=0;r<i;r++)e[r]=arguments[r];t.fire.apply(t,[n].concat(e))}))}))},n.oi=function(){for(var t=0;t<this.kn.sourceBuffers.length;t++)if(this.kn.sourceBuffers[t].updating)return!0;return!1},n.ei=function(){URL.revokeObjectURL(this.F.src),this.kn.removeEventListener("sourceopen",this.ii),this.B.duration&&(this.kn.duration=this.B.duration,this.fire("durationset")),this.ni()},n.ui=function(){this.ti.forEach((function(t){return t.removeEventListeners()}))},n.ri=function(t){return 0===t.indexOf("audio")?"audio":"video"},U(t,[{key:"mediaSource",get:function(){return this.kn}},{key:"pendingFetches",get:function(){return this.Un.pendingFetches}},{key:"streams",get:function(){return 1===this.ti.length&&this.video.streams}},{key:"activeStreamIndex",get:function(){return 1===this.ti.length&&this.video.activeStreamIndex}},{key:"video",get:function(){return!!this.Zn.video&&this.Zn.video}},{key:"audio",get:function(){return!!this.Zn.audio&&this.Zn.audio}}]),t}(),Yr=function(t){function n(n){var i,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(i=t.call(this,n)||this).B=e,i.blacklisted=[],i.whitelisted=[],i.MAX_LOADABLE_SEGMENTS_AUTO=3,i.MAX_LOADABLE_SEGMENTS_LOCKED=15,i.SEGMENT_DURATION=6,i}F(n,t),U(n,[{key:"displayName",get:function(){return"MediaSource"}}]);var i=n.prototype;return i.isTimeInBuffer=function(t,n,i){return this.si(t,t,n,i,1)},i.getDistanceFromBuffer=function(t,n){for(var i=t,e=0;e<n.length;e++)if(n.start(e)<=t&&n.end(e)>=t){i=n.end(e);break}return i-t},i.blacklist=function(t){this.blacklisted[t]=1},i.lock=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.whitelisted=t},i.filterStreams=function(t,n,i){for(var e,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=[],u=!1,s=0;s<t.length;s++)if(e&&e[0]===t[s].width&&e[1]===t[s].height)o.push(t[s]);else{if(u)break;if(!(this.blacklisted[s]&&-1===this.whitelisted.indexOf(s)||this.whitelisted.length&&-1===this.whitelisted.indexOf(s)))if(this.whitelisted.length)o.push(t[s]);else{var a=this.ai(n,i,t[s].width,t[s].height,r),c=1e3/(window.devicePixelRatio||1),h=i<c?1.75:1;a>=h&&(u=!0),o.push(t[s]),e=[t[s].width,t[s].height]}}return o},i.getCurrentSpeed=function(){var t="average",n=3,i=[1,2,5];return this.B.tests&&this.B.tests.harmonic_average&&this.B.tests.harmonic_average.group&&(t="harmonicAverage",n=this.ci(),i=[]),this.scanner.sorcerer.getCurrentSpeed({type:t,howMany:n,weights:i})},i.shouldUseSurroundSound=function(t,n){return"240p"!==t[n].quality},i.getAudioIndexFromVideo=function(t,n,i){if(0===n.length)return!1;if(!t[i])return 0;var e=n.filter((function(t){return t.channels>2}));if(e.length>0&&this.shouldUseSurroundSound(t,i)){var r=e[e.length-1];return n.indexOf(r)}return n.length>1&&0===i&&t[i].height<=360&&t.length>1?"mp4a.40.2"===n[0].codecs&&n[0].bitrate<8e4&&"240p"!==t[i].quality?1:0:n.length-1},i.hi=function(t,n,i,e){var r=i/e,o=t-n*r,u=n-t/r,s=t-o,a=n-u;return o>0&&(a=n),u>0&&(s=t),[s,a]},i.ai=function(t,n,i,e){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=this.hi(t,n,i,e),u=i*e;r&&(u*=r);var s=window.devicePixelRatio||1,a=o[0]*o[1]*s*s;return u/a},i.ci=function(){var t=Be(this.B,"lookahead_count");return t&&t.group&&t.data.count?t.data.count:t&&t.data.segment_lookahead_count?t.data.segment_lookahead_count:this.MAX_LOADABLE_SEGMENTS_AUTO},i.fi=function(t,n,i){var e=i&&i.bitrate>11e6;return 1===this.whitelisted.length?e?30:this.MAX_LOADABLE_SEGMENTS_LOCKED*this.SEGMENT_DURATION:this.ci()*this.SEGMENT_DURATION},i.si=function(t,n,i,e){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!i)return!1;n=Math.min(n,e);for(var o=0;o<i.length;o++){var u=i.start(o),s=i.end(o),a=Ve(u)-r,c=Ve(s)+r;if(a<=t&&c>=n){var h=n<u||t>s;if(h)continue;return!0}}return!1},i.li=function(t){return t.video.length>0&&t.audio.length>0},i.vi=function(t,n,i,e){var r=1;return this.li(e)&&(r=.1),this.si(t.start,t.end,n,i,r)},n}(function(){function t(t){this.scanner=t,this.STREAM_TYPE_VIDEO="video",this.STREAM_TYPE_AUDIO="audio"}U(t,[{key:"displayName",get:function(){return"Brain"}}]);var n=t.prototype;return n.destroy=function(){},n.shouldPowerUp=function(t,n){return!1},n.shouldPowerDown=function(t,n){return!1},n.canPowerUp=function(t,n){return 1!==t.length&&n<t.length-1},n.canPowerDown=function(t,n){return 1!==t.length&&n>0},n.filterStreams=function(t){return t},t}()),$r=function(t){function n(n){var i,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(i=t.call(this,n,e)||this).BANDWIDTH_UPSWITCH_THRESHOLD=.85,i.BANDWIDTH_DOWNSWITCH_THRESHOLD=.9,i.DEFAULT_TIMEOUT=8e3,i.SEGMENT_RELATIVE_TIMEOUT_RATIO=4/3,i.MINIMUM_TIMEOUT=1e3,i.FRAME_DROP_WINDOW_SECONDS=10,i}F(n,t),U(n,[{key:"displayName",get:function(){return"Skyfire"}}]);var i=n.prototype;return i.shouldPowerUp=function(t,n,i){i&&this.B.startingBandwidthThreshold&&(this.BANDWIDTH_UPSWITCH_THRESHOLD=this.B.startingBandwidthThreshold);var e=t.indexOf(n);if(-1===e&&(e=0),!this.canPowerUp(t,e))return di.resolve({index:!1,reasonForSwitch:null});var r=this.getCurrentSpeed();if(!r)return di.resolve({index:!1,reasonForSwitch:null});var o=this.di(r,this.BANDWIDTH_UPSWITCH_THRESHOLD,t);return o===e||!i&&o>e&&gi(this.scanner.currentTime,this.scanner.F.buffered)<1.5*this.SEGMENT_DURATION?di.resolve({index:!1,reasonForSwitch:null}):di.resolve({index:o,reasonForSwitch:3})},i.shouldPowerDown=function(t,n){var i=t.indexOf(n);if(-1===i){var e=this.isTimeInBuffer(this.scanner.F.duration,this.scanner.F.buffered,this.scanner.F.duration);return this.whitelisted.length||this.blacklisted.length||!e?di.resolve({index:t.length-1,reasonForSwitch:6}):di.resolve({index:!1,reasonForSwitch:null})}if(!this.canPowerDown(t,i))return di.resolve({index:!1,reasonForSwitch:null});var r=this.getCurrentSpeed();if(!r)return di.resolve({index:!1,reasonForSwitch:null});if(this.hasTooManyDroppedFrames(i,n,this.B.droppedFrameSwitchPercent))return this.blacklist(i),di.resolve({index:i-1,reasonForSwitch:2});var o=this.di(r,this.BANDWIDTH_DOWNSWITCH_THRESHOLD,t);return o===i?di.resolve({index:!1,reasonForSwitch:null}):di.resolve({index:o,reasonForSwitch:1})},i.hasTooManyDroppedFrames=function(t,n,i){return this.scanner.sorcerer.getDroppedFrameRate(this.FRAME_DROP_WINDOW_SECONDS,t,"median")/n.framerate*100>=i},i.getTimeEstimateToLoad=function(t,n){if(null===n)return 3;var i=n.segments[t],e=i.end-i.start,r=this.getCurrentSpeed();return e*(n.bitrate+n.audioBitrate)/r*1.3},i.canPlayFromTimeInStream=function(t,n){if(!this.isTimeInBuffer(t,this.scanner.F.buffered,this.scanner.F.duration))return!1;if(!n)return!1;var i=this.getSegmentsToLoad(!1,this.STREAM_TYPE_VIDEO,n);if(0===i.length)return!0;var e=gi(t,this.scanner.F.buffered);return this.getTimeEstimateToLoad(i[0],n)<e},i.getSegmentsToLoad=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.STREAM_TYPE_VIDEO,i=arguments.length>2?arguments[2]:void 0,e=this.scanner.F,r=this.scanner.currentTime,o=[],u=this.fi(r,e.duration,i),s=r+u,a=this.scanner.sorcerer[n].activeStreamIndex,c=this.scanner.an[n][a];if(!c)return o;var h=this.scanner.sorcerer[n].sourceBuffer,f=null;h&&(f=h.buffered);for(var l=0;l<c.segments.length;l++){var v=c.segments[l];if(!(v.end<r||v.start>s)){var d=r>=v.start&&r<v.end,p=this.vi(v,f,this.scanner.F.duration,this.scanner.an);!t&&p||t&&p&&d||(d||s>=v.start)&&o.push(l)}}return o},i.getSegmentRelativeTimeout=function(t,n,i){var e,r=null==n?void 0:n.bitrate,o=null==(e=t[0])?void 0:e.bitrate;if(!r||!o||!i)return this.DEFAULT_TIMEOUT;if(r===o)return this.DEFAULT_TIMEOUT;var u=i*this.SEGMENT_RELATIVE_TIMEOUT_RATIO;return Math.max(this.MINIMUM_TIMEOUT,Math.min(this.DEFAULT_TIMEOUT,u))},i.di=function(t,n,i){for(var e=0,r=e;r<i.length;r++)t*n>i[r].bitrate+i[r].audioBitrate&&(e=r);return e},n}(Yr),Kr=function(t){function n(n){var i,e,r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(r=t.call(this,n,o)||this).pi=o.tests.ml_brain.data.mimir_url,r.mi=o.tests.ml_brain.data.geolocation,r.yi={},r.wi=null,r.bi=[],r.gi=[],r.Ei=[],r._i=[],r.ki=[],r.Ti=[],r.Si=[],r.Ai=[],r.Mi=[],r.Oi=null,r.Ri=0,r.Ii=null,r.Ci=null,r.Ni=!1,r.ji=!1,r.Di=0,r.Ui=[],r.xi=0,r.Li=[[Qi.DOWNLOAD_START,r.Pi.bind(W(r))],[Qi.DOWNLOAD_END,r.Fi.bind(W(r))],[Qi.APPEND_BUFFER_END,r.Hi.bind(W(r))],[Qi.DOWNLOAD_TIMEOUT,r.Vi.bind(W(r))]],r.Bi=[r.qi],r.Gi=[r.Wi],r.Li.forEach((function(t){r.scanner.on(t[0],t[1])})),(i=rr.hooks.beforeRequest).push.apply(i,$(r.Bi)),(e=rr.hooks.afterResponse).push.apply(e,$(r.Gi)),r}F(n,t),U(n,[{key:"displayName",get:function(){return"ML"}}]);var i=n.prototype;return i.destroy=function(){var t=this;this.Li.forEach((function(n){t.scanner.off(n[0],n[1])})),this.Bi.forEach((function(t){var n=rr.hooks.beforeRequest,i=n.indexOf(t);i>=0&&n.splice(i,1)})),this.Gi.forEach((function(t){var n=rr.hooks.afterResponse,i=n.indexOf(t);i>=0&&n.splice(i,1)}))},i.Pi=function(t){var n=t.identifier;n.type===this.STREAM_TYPE_VIDEO&&(this.Ii={index:n.segment,streamIndex:n.stream,complete:null}),n.type===this.STREAM_TYPE_AUDIO&&(this.Ci={index:n.segment,streamIndex:n.stream,complete:null})},i.Yi=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.STREAM_TYPE_VIDEO;return n===this.STREAM_TYPE_VIDEO?null!==this.Ii&&this.Ii.index===t.segment&&this.Ii.streamIndex===t.stream:n===this.STREAM_TYPE_AUDIO&&null!==this.Ci&&this.Ci.index===t.segment},i.$i=function(){return null!==this.Ii||null!==this.Ci},i.Fi=function(t){var n=t.identifier,i=t.data,e=i.request,r=i.response,o=e.data.duration/1e3,u=r.body.byteLength,s=null;r.perfTimings&&(s=r.perfTimings.responseStart-r.perfTimings.connectStart),n.type===this.STREAM_TYPE_VIDEO&&this.Yi(n,this.STREAM_TYPE_VIDEO)&&(this.Ii.complete={downloadTime:o,byteLength:u,ttfb:s,uuid:e.data.uuid},this.ji||(this.Ki({streamIndex:n.stream,segmentIndex:n.segment-1,segmentDLTime:o,segmentLength:u,ttfb:s,didSegmentTimeout:!1}),this.ji=!0)),n.type===this.STREAM_TYPE_AUDIO&&this.Yi(n,this.STREAM_TYPE_AUDIO)&&(this.Ci.complete={downloadTime:o,byteLength:u,ttfb:s,uuid:e.data.uuid})},i.Vi=function(t){var n=t.identifier,i=(t.data.timeoutMs||8e3)/1e3,e=n.segment,r=this.scanner.an[n.type][n.stream].segments[e].size;delete this.yi[e],this.Ki({streamIndex:n.stream,segmentIndex:e,segmentDLTime:i,segmentLength:r,ttfb:.1,didSegmentTimeout:!0})},i.zi=function(){this.Ii=null,this.Ci=null},i.Hi=function(t){var n=t.identifier;if(n.type===this.STREAM_TYPE_VIDEO&&(this.xi+=1),this.li(this.scanner.an)){if(this.Yi(n,this.STREAM_TYPE_VIDEO)&&this.Yi(n,this.STREAM_TYPE_AUDIO)&&null!==this.Ii.complete&&null!==this.Ci.complete){var i=this.Ii.complete,e=this.Ci.complete,r=i.downloadTime+e.downloadTime,o=i.byteLength+e.byteLength,u=i.ttfb+e.ttfb;this.Ki({streamIndex:n.stream,segmentIndex:n.segment-1,segmentDLTime:r,segmentLength:o,ttfb:u,segmentRequestID:i.uuid,didSegmentTimeout:!1}),this.zi()}}else if(this.Yi(n,this.STREAM_TYPE_VIDEO)&&null!==this.Ii.complete){var s=this.Ii.complete;this.Ki({streamIndex:n.stream,segmentIndex:n.segment-1,segmentDLTime:s.downloadTime,segmentLength:s.byteLength,ttfb:s.ttfb,segmentRequestID:s.uuid,didSegmentTimeout:!1}),this.zi()}},i.Ki=function(t){var n=t.streamIndex,i=t.segmentIndex,e=t.segmentDLTime,r=t.segmentLength,o=t.ttfb,u=t.segmentRequestID,s=t.didSegmentTimeout,a=this.scanner.an.video[n],c=this.scanner.sorcerer.video.sourceBuffer;if(c&&a){this.bi.push(this.getTotalBufferDuration()),this._i.push(gi(this.scanner.currentTime,c.buffered)),this.ki.push(n),this.gi.push(e),this.Ei.push(r);var h=o+this.Ri;this.Si.push(h),this.Ti.push(a.segments.length-i),this.Mi.push(u),this.Ai.push(Number(s))}},i.handleScrubEnd=function(t){var n=this.gi.length,i=n?this.gi[n-1]:0,e=this.Ei.length,r=e?this.Ei[e-1]:0,o=this.Si.length,u=o?this.Si[o-1]:0,s=this.scanner.an.video[t],a=this.Ji(s),c=a?a.index:this.Ti[this.Ti.length-1],h=this.Mi.length?this.Mi[this.Mi.length-1]:"";this.Ki({streamIndex:t,segmentIndex:c,segmentDLTime:i,segmentLength:r,ttfb:u,segmentRequestID:h,didSegmentTimeout:!1})},i.shouldPowerUp=function(t,n,i){var e=t.indexOf(n);if(-1===e&&(e=0),1===this.whitelisted.length)return this.whitelisted[0]>e?di.resolve(0):di.resolve(!1);if(1===this.scanner.an.video.length)return di.resolve(!1);if(!this.canPowerUp(t,e))return di.resolve(!1);if(this.scrubInProgress)return di.resolve(!1);var r=this.Ji(n);if(null===r)return di.resolve(!1);var o={index:r.index,streamIndex:r.streamIndex},u=r.index;if(null!==this.wi&&this.wi.index===o.index&&this.wi.streamIndex===o.streamIndex)return di.resolve(!1);if(!(u in this.yi))return this.Xi(o,t,n).then((function(t){return t>e&&t})).catch(console.error);var s=this.yi[u];return s>e?di.resolve(s):di.resolve(!1)},i.shouldPowerDown=function(t,n){var i=t.indexOf(n);if(-1===i){var e=this.isTimeInBuffer(this.scanner.F.duration,this.scanner.F.buffered,this.scanner.F.duration);return this.whitelisted.length||this.blacklisted.length||!e?di.resolve(t.length-1):di.resolve(!1)}if(1===this.whitelisted.length)return this.whitelisted[0]<i?di.resolve(0):di.resolve(!1);if(1===this.scanner.an.video.length)return di.resolve(!1);if(!this.canPowerDown(t,i))return di.resolve(!1);if(this.scrubInProgress)return di.resolve(!1);var r=this.Ji(n);if(null===r)return di.resolve(!1);var o={index:r.index,streamIndex:r.streamIndex},u=r.index;if(null!==this.wi&&this.wi.index===o.index&&this.wi.streamIndex===o.streamIndex)return di.resolve(!1);if(!(u in this.yi))return this.Xi(o,t,n).then((function(t){return t<i&&t})).catch(console.error);var s=this.yi[u];return s<i?di.resolve(s):di.resolve(!1)},i.getTotalBufferDuration=function(){var t=this.scanner.sorcerer.video.sourceBuffer,n=0;if(!t)return n;for(var i=0;i<t.buffered.length;i++){var e=t.buffered.start(i);n+=t.buffered.end(i)-e}return n},i.canPlayFromTimeInStream=function(t,n){return!!this.isTimeInBuffer(t,this.scanner.F.buffered,this.scanner.F.duration)&&!!n},i.Qi=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=t.slice(0);if(i.length<8){for(var e=8-i.length,r=0;r<e;r++)i.unshift(n);return i}return i.slice(i.length-8,i.length)},i.Zi=function(t,n){var i=this,e={240:1,360:2,480:3,540:3,720:4,1080:5,1440:6,2160:7},r={240:0,360:1,480:2,540:2,720:3,1080:4,1440:5,2160:6},o=[0,0,0,0,0,0,0,0],u=[0,0,0,0,0,0,0,0],s=[0,0,0,0,0,0,0,0];this.xi<3&&(s[s.length-1]=1);for(var a=0;a<n.length;a++){var c=n[a],h=parseInt(c.quality,10);h in e&&(o[e[h]]=1);var f=this.getAudioIndexFromVideo(n,this.Ui,a),l=null;"number"==typeof f&&(l=this.Ui[f]);for(var v=0;v<c.segments.length;v++)if(v===t&&h in r){var d=c.segments[v].size,p=0;l&&l.segments[v]&&(p=l.segments[v].size),u[r[h]]=d+p}}var m=this.ki.map((function(t){return parseInt(i.scanner.an.video[t].quality,10)}));return{availableQualities:o,nextChunkSizes:u,lastBufferSizes:this.Qi(this.bi),lastChunkDownloadTimes:this.Qi(this.gi),lastTtfb:this.Qi(this.Si,.1),lastChunkSizes:this.Qi(this.Ei),lastChunkQualities:this.Qi(m),numRemainingChunks:this.Qi(this.Ti),lastPlaybackHeads:this.Qi(this._i),geolocation:[[this.mi]],downloadTimeout:this.Qi(this.Ai),videoStart:s}},i.te=function(t,n){for(var i=-1,e=-1,r=0;r<t.length;r++)t[r]>e&&(e=t[r],i=r);for(var o=[],u=0;u<n.length;u++)1===n[u]&&o.push(u);return{1:240,2:360,3:540,4:720,5:1080,6:1440,7:2160}[o[i]]},i.ne=function(t,n){for(var i=0;i<n.length;i++){var e=parseInt(n[i].quality,10);if(e===t)return i;if(480===e&&540===t)return i}return 0},i.qi=function(t){t.startTime=je()},i.Wi=function(t,n){return n.duration=De(t.startTime),n},i.Xi=function(t,n,i){var e=this,r=this.Zi(t.index,n);return this.wi=t,Tr.post(this.pi,{json:{inputs:r},timeout:2e3}).then((function(i){e.Ri=i.perfTimings.duration;var o=JSON.parse(i.body),u=e.te(o.outputs[0],r.availableQualities),s=e.ne(u,n);if(e.yi[t.index]=s,e.Mi.length&&e.Oi){var a=e.Mi[e.Mi.length-1];e.scanner.fire(ie.BRAIN_ML_MODEL_INPUTS,P({chunkRequestID:a,duration:i.duration,geolocation:e.mi},e.Oi))}return e.Oi=r,e.wi=null,s})).catch((function(n){if(n instanceof sr){var i={status:n.response.status,resp:n.response.body,url:e.pi};e.scanner.fire(ie.BRAIN_ML_MODEL_ERR,i),e.Di++}if(n instanceof cr){var r={url:e.pi};e.scanner.fire(ie.BRAIN_ML_MODEL_TIMEOUT,r),e.Di++}if(n instanceof ar){var o={url:e.pi};e.scanner.fire(ie.BRAIN_ML_MODEL_NET_ERR,o),e.Di++}e.Di>=2&&e.scanner.resetBrain(!0);var u=t.streamIndex;return e.yi[t.index]=u,e.wi=null,u}))},i.Ji=function(t){var n=this.scanner.sorcerer.video.sourceBuffer,i=null;if(n&&(i=n.buffered),null===i)return null;for(var e=this.ee(t),r=0;r<e.length;r++){var o=e[r].segment;if(!this.vi(o,i,this.scanner.F.duration,this.scanner.an))return e[r]}return null},i.ee=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.STREAM_TYPE_VIDEO,i=this.scanner.F,e=this.scanner.currentTime,r=this.fi(e,i.duration,t),o=e+r,u=[],s=this.scanner.sorcerer[n].activeStreamIndex,a=this.scanner.an[n][s];if(!a)return u;for(var c=0;c<a.segments.length;c++){var h=a.segments[c];if(!(h.end<e||h.start>o)){var f=e>=h.start&&e<h.end;(f||o>=h.start)&&u.push({segment:h,index:c,streamIndex:s})}}return u},i.re=function(t,n){var i=this;Object.keys(this.yi).filter((function(n){return-1===t.indexOf(parseInt(n,10))})).forEach((function(t){var e=i.yi[t],r=i.scanner.an.video[e].segments[t];i.vi(r,n,i.scanner.F.duration,i.scanner.an)||delete i.yi[t]}))},i.getSegmentsToLoad=function(t,n,i){var e=this.ee(i,n),r=this.scanner.sorcerer[n].sourceBuffer,o=null;r&&(o=r.buffered),this.re(e.map((function(t){return t.index})),o);for(var u=[],s=0;s<e.length;s++){var a=e[s].segment,c=e[s].index,h=this.vi(a,o,this.scanner.F.duration,this.scanner.an),f=c in this.yi;h||!f&&1!==this.whitelisted.length&&1!==this.scanner.an.video.length||u.push(c)}return u},U(n,[{key:"audioStreams",get:function(){return this.Ui},set:function(t){this.Ui=t}},{key:"scrubInProgress",set:function(t){this.Ni=t},get:function(){return this.Ni}}]),n}(Yr),zr=function(){function t(t,n){this.F=t,this.oe=n}var n=t.prototype;return n.start=function(){return clearInterval(this.ue),this.ue=setInterval(this.se.bind(this),200),this.se()},n.stop=function(){clearInterval(this.ue)},n.onSegmentAppended=function(){this.se()},n.se=function(){var t=this.F.buffered,n=this.F.currentTime,i=this.ae(t,n);if(0===this.F.readyState)return!1;if(this.F.paused)return!1;var e=this.F.duration;if(n>=e)return this.F.currentTime=e-.1,!0;if(t.length<=i)return!1;var r=t.start(i);return!(r>=e||r-n>.5||0!==i||(this.stop(),this.ce("audio",r),this.ce("video",r),this.F.currentTime=r,0))},n.ae=function(t,n){if(!t||!t.length)return null;for(var i=0;i<t.length;i++){var e=t.start(i),r=t.end(i);if(e>n&&(0===i||r-n<=.1))break}return i>=0?i:null},n.ce=function(t,n){var i=this.oe(0,t);i&&i.segments&&i.segments[0]&&(i.segments[0].start=n)},t}(),Jr=(x(Br={},"br","CMCD-Object"),x(Br,"bl","CMCD-Request"),x(Br,"bs","CMCD-Status"),x(Br,"pr","CMCD-Session"),x(Br,"sid","CMCD-Session"),x(Br,"cid","CMCD-Session"),x(Br,"sf","CMCD-Session"),x(Br,"st","CMCD-Session"),x(Br,"tb","CMCD-Object"),x(Br,"d","CMCD-Object"),x(Br,"dl","CMCD-Request"),x(Br,"mtp","CMCD-Request"),x(Br,"rmt","CMCD-Status"),x(Br,"nor","CMCD-Request"),x(Br,"nrr","CMCD-Request"),x(Br,"ot","CMCD-Object"),x(Br,"su","CMCD-Request"),x(Br,"v","CMCD-Session"),function(){function t(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.he=t,this.sessionId=n.sessionId,this.clipId=n.clipId}var n=t.prototype;return n.getLogAsQueryParam=function(t,n){return this.fe(this.le(t,n))},n.le=function(t,n){var i={};return Object.assign(i,this.ve()),Object.assign(i,this.de(t,n)),i},n.fe=function(t){return ki({CMCD:this.pe(t)})},n.ve=function(){var t;return x(t={},"sid",'"'.concat(this.sessionId,'"')),x(t,"cid",'"'.concat(this.clipId,'"')),x(t,"st",this.me()),x(t,"sf",this.ye()),t},n.de=function(t,n){var i;return x(i={},"pr",this.he.playbackRate),x(i,"br",this.he.getBitrateAtTime(this.he.currentTime,n)/1e3),x(i,"ot",this.we(n)),x(i,"bl",this.be(t)),i},n.we=function(t){switch(t){case"audio":return"a";case"video":return"v";default:return"av"}},n.be=function(t){return Math.round(1e3*(parseFloat(t.end)-parseFloat(t.start)))},n.me=function(){switch(this.he.displayName){case"HLSLiveScanner":case"NativeHLSLiveScanner":return"l";case"MediaSourceScanner":default:return"v"}},n.ye=function(){switch(this.he.displayName){case"HLSLiveScanner":case"NativeHLSLiveScanner":return'"hls"';case"MediaSourceScanner":default:return'"dash"'}},n.pe=function(t){for(var n=[],i="",e=0,r=Object.entries(t);e<r.length;e++){var o=Y(r[e],2),u=o[0],s=o[1];n.push({key:u,value:s})}return n.sort((function(t,n){return t.key.localeCompare(n.key)})).forEach((function(t){var n=t.key,e=t.value;i+="".concat(n,"=").concat(e,",")})),i.replace(/,\s*$/,"")},t}()),Xr=window.Map||function(){var t,n,i,e=function(){n=[],i=[]},r=function(i){return-1<(t=n.indexOf(i))};return e(),{get size(){return n.length},has:r,clear:e,get:function(t){return i[n.indexOf(t)]},keys:function(){return n.slice()},values:function(){return i.slice()},entries:function(){return n.map((function(t,n){return[t,i[n]]}))},delete:function(e){return r(e)&&n.splice(t,1)&&!!i.splice(t,1)},forEach:function(t,e){var r=this;i.forEach((function(i,o){return t.call(e,i,n[o],r)}))},set:function(e,o){return r(e)?i[t]=o:i[n.push(e)-1]=o,this}}};function Qr(t,n,i){return i?n?n(t):t:(t&&t.then||(t=di.resolve(t)),n?t.then(n):t)}var Zr=["supported"];function to(t,n){var i=t();return i&&i.then?i.then(n):n(i)}var no=new Xr;function io(t){return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];try{return di.resolve(t.apply(this,n))}catch(t){return di.reject(t)}}}var eo=function(t,n){return function(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];["%c".concat("MediaCapabilities"),n].concat(i)}}(0,"color: white; background-color: green");function ro(t,n){try{var i=t()}catch(t){return n(t)}return i&&i.then?i.then(void 0,n):i}var oo=io((function(t){var n,i=co(t);return no.get(i)||to((function(){if(ke.mediaCapabilities){var e=t.codecs.replace(/,.+/,""),r={type:"media-source",video:{contentType:"".concat(t.mime_type,"; codecs=").concat(e),width:t.width,height:t.height,bitrate:t.bitrate,framerate:t.framerate}};return Qr(navigator.mediaCapabilities.decodingInfo(r),(function(t){n=t,no.set(i,n)}))}}),(function(){return n}))})),uo=io((function(){var t=!1,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=n,e=[],r=[];return to((function(){if(ke.mediaCapabilities)return function(){if(0!==n.length)return ro((function(){return Qr(di.all(n.map((function(t){return Qr(oo(t))}))),(function(o){if(o){if(0===(i=so(n,o)).length)return eo("No compatible streams found. Returning all available streams as safeguard."),t=!0,{compatibleStreams:n,incompatibleStreams:e,incompatibleStreamsAttributes:r};i.length<n.length?(e=n.filter((function(t){return-1===i.indexOf(t)})),r=e.map(ao),eo("Some streams are not supported. Returning compatible streams.")):eo("All streams are supported.")}}))}),(function(t){eo("Error checking stream capabilities",t)}));eo("No streams to check for MediaCapabilities support")}();eo("MediaCapabilities API not supported")}),(function(n){return t?n:{compatibleStreams:i,incompatibleStreams:e,incompatibleStreamsAttributes:r}}))}));function so(t,n){return t.filter((function(t,i){return Zr.every((function(t){return n[i][t]}))||(eo("Stream ".concat(t.quality," is not supported"),n[i]),!1)}))}function ao(t){var n=co(t),i=no.get(n);return i?Zr.filter((function(t){return!i[t]})):[]}function co(t){return"".concat(t.mime_type,";").concat(t.codecs,";").concat(t.width,";").concat(t.height,";").concat(t.bitrate,";").concat(t.framerate)}function ho(t,n,i){return i?n?n(t):t:(t&&t.then||(t=di.resolve(t)),n?t.then(n):t)}function fo(t){return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];try{return di.resolve(t.apply(this,n))}catch(t){return di.reject(t)}}}var lo=function(t){function n(n){var i,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(i=t.call(this,n,e)||this).reset(),i.manifestLoadDurations=[],i.ge=!1,e.mediaSourceScanner&&(i.Ee=e.mediaSourceScanner.maxPreloadStreamIndex),i}F(n,t),U(n,null,[{key:"displayName",get:function(){return"MediaSourceScanner"}},{key:"supported",get:function(){return"undefined"!=typeof MediaSource&&MediaSource.isTypeSupported}},{key:"supportedVideoTypes",get:function(){return["application/vnd.vimeo.dash+json","video/vnd.mpeg.dash.mpd"]}}]);var i=n.prototype;return i.deactivate=function(){t.prototype.deactivate.call(this),this.sorcerer&&this.sorcerer.destroy(),this.reset()},i.reset=function(){this._e=new er,this.ke={},ke.browser.safari&&(this.Te=new zr(this.F,this.oe.bind(this))),this.resetBrain(),this.Se(),this.Ae=!1,this.Me=!1,this._t=null,this.an={},this.an.audio=[],this.an.video=[],this.Ui=[],this.Oe=null,this.Re=null,this.Ie=null,this.Ce=null,this.Ne=null,this.je=null,this.De=!1,this.Ue=null,this.xe=!1,this.Le=!1,this.Pe=null,this.Fe=null,this.He=!1,this.Ve=[],this.Be={},this.qe=0,this.Ge=null,this.ge=!1,clearInterval(this.We),clearTimeout(this.Ye)},i.resetBrain=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.B.mediaSourceScanner||{};n.tests=this.B.tests;var i=ke.ie;if(this.$e&&this.$e.destroy(),t||i){var e=qe(this.$e);return this.$e=new $r(this,n),void((e||i)&&this.fire(ie.BRAIN_ML_SWITCH_TO_SKYFIRE))}this.$e=new $r(this,n);var r=Be(n,"ml_brain");r&&r.group&&r.data.use_model&&(this.$e=new Kr(this,n))},i.preloadStream=function(){var t=this;if(this.Pe)return this.Pe;var n=0,i=1;this.an.audio.length&&(i=2);var e=this.sorcerer.video.activeStreamIndex;this.Ve.length&&(e=this.Ve[0]);var r=0,o=this.$e.getSegmentsToLoad(!1,"video",e);o.length>0&&(r=o[0]);var u=function(){},s=function(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];n&&(e=t.sorcerer.video.activeStreamIndex),t.Ge=e,t.Ke(!0)},a=function(e){(n+=1)<i||(e.segment===r&&0===t.Ve.length?t.ze(!0).then((function(i){var r=i.index,o={reasonForSwitch:i.reasonForSwitch};if(!1!==r&&r>e.stream){if(t.sorcerer.video.switchTo(r,!1,o),t.an.audio.length){var a=t.$e.getAudioIndexFromVideo(t.an.video,t.an.audio,r);t.sorcerer.audio.switchTo(a,!1)}return n=0,void s(!0)}u()})).catch(console.error):u())};return this.Pe=new di((function(n,i){u=function(){var i=t.oe(e).segments[0].end,r=t.Je(!0);if(t.currentTime>=r&&(t.currentTime=r),t.currentTime>i&&(t.sorcerer.clear(),t._e=new er),t.sorcerer.video.switchTo(e,!1),t.an.audio.length){var o=t.$e.getAudioIndexFromVideo(t.an.video,t.an.audio,e);t.sorcerer.audio.switchTo(o,!1)}t.sorcerer.off("bufferqueueadd",a),t.Ge=null,t.Ae=!0,n()},t.sorcerer.on("bufferqueueadd",a),s()})),this.Pe},i.loadManifest=function(t){try{var n=this;return ho(n.video.metadata.p2pReady,(function(){var i=Date.now();return ke.browser.ie&&t&&-1!==t.indexOf("archive_playlist")?(setTimeout((function(){n.pt("MediaUnknownError","An unknown error occurred.")}),250),new di((function(){}))):Tr({url:t,timeout:1e4,type:"manifest"}).then((function(e){return e.url&&e.url!==t&&-1!==e.url.indexOf("live-archive")&&(n.Re=e.url.split("/").slice(0,-2).join("/")),n.manifestLoadDurations.push({url:t,status:e.status,duration:Date.now()-i}),n.fire(Qi.MANIFEST_LOADED),e.text()})).then(fo((function(i){var e;return function(r,o){var u=function(){if(-1!==t.indexOf(".mpd"))return ho(n.Xe(),(function(n){var r=n.parseMPD;e=r(i,t)}));e=JSON.parse(i)}();return u&&u.then?u.then(o):o()}(0,(function(){return e}))}))).catch((function(e){if(n.manifestLoadDurations.push({url:t,status:e.response&&e.response.status,duration:Date.now()-i}),n.reset(),e instanceof sr&&410===e.response.status)return n.fire(Qi.MEDIA_URL_EXPIRED),new di((function(){}));throw e instanceof sr&&400===e.response.status?n.fire(Qi.MEDIA_URL_BAD_REQUEST,e.response.url):e instanceof cr&&n.fire(Qi.MANIFEST_TIMEOUT),e}))}))}catch(t){return di.reject(t)}},i.setVideoSrc=function(t,n){var i=this,e=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e&&!n&&this.Oe){var r;if(("metadata"===this.Z||"none"===this.Z&&!this.paused)&&!this.Ae)return void this.Oe.then((function(){var n=i.paused;i.setVideoSrc(t,n,!1)})).catch(console.error);if("sd-fallback"===(null==(r=this.q.drmHandler)?void 0:r.state))return void this.Oe.then((function(){i.setVideoSrc(t,!0,!1)})).catch(console.error);if("auto"===this.Z)return void this.Oe.then((function(){i.setVideoSrc(t,!1,!1)})).catch(console.error)}n&&this.reset(),n||!this.paused||this.sorcerer||(n=!0);var o=this.Qe;n&&(o=this.Dt);var u=t.split("/");u.pop();var s="".concat(u.join("/"),"/");this.De=!n,this.Oe=this.Ze(t,this.Z).then(this.loadManifest.bind(this)).then((function(t){return"string"==typeof i.Re&&-1!==i.Re.indexOf("live-archive")||(i.Re=s),t})).then(o.bind(this)),n&&"auto"===this.Z&&(this.Oe=this.tr(this.Oe,this.preloadStream.bind(this),!1)),this.Oe=this.nr(this.Oe)},i.getBitrateAtTime=function(t,n){if(!this.sorcerer)return 0;var i=this.sorcerer.streamIndexAtTime(t,n);return this.an[n][i]?this.an[n][i].bitrate:0},i.lockStreamIndexes=function(){var t=this,n=this.Ve.map((function(n){return t.an.video.indexOf(t.an.video[n])})),i=!this.paused;if(i&&(this.ir=!0,this.F.pause()),this.Be.video=!1,this.$e.lock(n),this.Me||"auto"===this.Z){var e=Math.max(this.currentTime-7,0),r=Math.min(this.currentTime+7,this.F.duration);this.sorcerer.removeBuffer(e,r).then((function(){!t.Me&&"auto"===t.Z||t.ended?t.er():(t.seekToTime(t.currentTime),i&&t.paused&&(t.rr=!0,t.F.play()))})).catch(console.error)}},i.seekToTime=function(t){var n=this;if(t===this.currentTime)return di.resolve();var i=null===this.Ce;if(i||(this.or&&(this.or(),this.or=null),this.ur=null,this.Ce=null,this.Ne=null),this.Ce=t,this.sr(),this.Ae)for(var e in this.an)if(this.an[e].length>0){var r=this.sorcerer[e].activeStreamIndex;this.sorcerer[e].streams[r].abort()}return this.ur=this.ar(t),di.all([this.Oe,this.Fe]).then((function(){n.er()})).catch(console.error),this.cr&&0===t&&this.fire(Ki.SEEKING),i||this.play().catch(this.rt.bind(this)),this.Oe.then((function(){return n.ur})).catch((function(t){}))},i.takeSnapshot=function(){this.et&&t.prototype.takeSnapshot.call(this)},i.initDrm=function(){},i.onstalled=function(){return!1},i.onseeked=function(t){this.Me&&this.Ke()},i.onended=function(n){return t.prototype.onended.call(this,n),!0},i.onseeking=function(t){this.Me},i.sr=function(){var t=this;this.hr(),clearTimeout(this.lr),this.lr=setTimeout((function(){t.dr()}),200)},i.hr=function(){this.pr||(this.pr=!0,qe(this.$e)&&(this.$e.scrubInProgress=!0))},i.dr=function(){if(this.pr=!1,qe(this.$e)){this.$e.scrubInProgress=!1;var t=this.sorcerer.video.activeStreamIndex;this.$e.handleScrubEnd(t),this.er()}},i.ontimeupdate=function(n){if(!this.sorcerer)return!1;if(t.prototype.ontimeupdate.call(this),this.Te&&this.Te.stop(),0===this.currentTime)return this.Me;if(this.Ce)return!1;this.Me||(this.Me=!0),this.Le&&this.currentTime>=this.Le&&(this.sorcerer.removeBuffer(0,this.Le-2),this.Le=!1);var i=this.sorcerer.getDroppedFrameTotal();this.fire(Qi.DROPPED_FRAMES,i);var e=this.sorcerer.getResponseSpeeds(),r=this.an.video[this.sorcerer.video.activeStreamIndex],o=this.B.tests&&this.B.tests.download_bitrate;if((!o||!o.group)&&r&&this.$e.getCurrentSpeed){var u={speed:this.$e.getCurrentSpeed(),bitrate:r.bitrate,speeds:e};this.fire(Qi.BANDWIDTH,u)}var s=this.F.buffered.length;if(!s)return!0;var a=this.F.buffered.end(s-1);return Math.ceil(a)===Math.ceil(this.F.duration)||(Math.abs(this.currentTime-a)<.2?(this.He||(this.fire(Qi.STREAM_BUFFER_START,{hasLowerStreamIndex:this.sorcerer.video.activeStreamIndex>0}),this.He=!0),!1):void 0)},i.mr=function(){return!!this.ended||Math.ceil(this.currentTime)===Math.ceil(this.F.duration)},i.yr=function(){if(!this.sorcerer)return!1;if(this.mr())return!1;if(null!==this.Ge){try{this.wr()}catch(t){return this.br(t),!1}return!0}if(0===this.currentTime&&!this.Ae)return this.Me;var t=this.er();return t&&"function"==typeof t.catch&&t.catch(this.br.bind(this)),!0},i.br=function(t){t.code===DOMException.INVALID_STATE_ERR?this.fire(Qi.SCANNER_ERROR,{reason:t}):this.fire(Qi.LOAD_SEGMENT_FAILED,new TelecineError("".concat(Qi.LOAD_SEGMENT_FAILED," - ").concat(t.name),t.message)),clearInterval(this.We)},i.onprogress=function(){this.$e.canPlayFromTimeInStream(this.currentTime,this.oe())&&this.He&&(this.fire(Qi.STREAM_BUFFER_END),this.He=!1)},i.onwaiting=function(){return!this.Te||!this.Te.start()},i.onerror=function(){return!!this.F.error&&(this.F.error.code===this.F.error.MEDIA_ERR_DECODE?(this.fire(Qi.SCANNER_ERROR,{reason:"encountered media decode error"}),!1):this.F.error.code===this.F.error.MEDIA_ERR_SRC_NOT_SUPPORTED?(this.ge=!0,this.fire(Qi.SCANNER_ERROR,{reason:"encountered media source not supported error"}),!1):t.prototype.onerror.call(this))},i.pause=function(){t.prototype.pause.call(this)},i.play=function(){var n=this;return this.Ke(),t.prototype.play.call(this,(function(){return n.je&&n.je(),n.De||n.Ae||"auto"===n.Z||(n.Oe=n.tr(n.Oe,n.preloadStream.bind(n))),n.Oe.then((function(){return di.resolve(n.ur)}))}))},i.onpause=function(){return this.ir?(this.ir=!1,!1):(t.prototype.onpause.call(this),!0)},i.onplay=function(){return!this.rr||(this.rr=!1,!1)},i.tr=function(t,n){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],e=t.then(n);return i&&(e=this.nr(e)),e},i.nr=function(t){var n=this;return t.catch((function(t){return n.fire(Qi.FILE_ERROR,{reason:t}),new di((function(t,n){}))}))},i.gr=function(){this.Ae&&this.an.video[this.sorcerer.video.activeStreamIndex].bitrate/1e3>12e3&&(this.Fe=this.sorcerer.removeBuffer())},i.Ze=function(t,n){var i=this;return new di((function(e,r){"none"!==n||i.De&&!i.paused?e(t):i.je=function(){e(t),i.je=null}}))},i.ar=function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.Ce;return new di((function(i,e){var r=t.Me&&0===n,o=t.$e.canPlayFromTimeInStream(n,t.oe());r||o?i(n):(t.gr(),t.Ne=i)})).then((function(n){t.Ce=null,t.ur=null;var i=new di((function(n,i){t.or=i,t.F.addEventListener("seeked",(function i(){n(t.F.currentTime),t.F.removeEventListener("seeked",i)}))}));return t.F.currentTime=n,i}))},i.Er=function(t,n){"auto"!==t&&"auto"===n&&(this.Oe=this.tr(this.Oe,this.preloadStream.bind(this))),t!==n&&"none"!==n&&this.je&&this.je()},i._r=function(t){var n=t.audio.reduce((function(t,n){return t+n.duration}),0),i=t.video.reduce((function(t,n){return t+n.duration}),0),e=n/t.audio.length,r=i/t.video.length;return e+4<r?r-e:0},i.kr=function(t){return t.video.every((function(t){return t.segments.every((function(t){return"size"in t}))}))},i.Qe=function(t){var n=this;return new di(fo((function(i,e){if(n._t=t,n.an.video=n.Tr(t.video),t.audio){var r=n._r(t);if(r>0)return n.fire(Qi.AV_DURATION_MISMATCH,r),n.fire(Qi.SCANNER_ERROR,{reason:"Encountered A/V duration mismatch"}),void e();var o=t.audio.filter((function(t){return"opus"===t.codecs})),u=t.audio.filter((function(t){return"opus"!==t.codecs})),s=ke.browser.safari||ke.iOS||ke.iPadOS||!MediaSource.isTypeSupported('audio/mp4; codecs="opus"')||!o.length?u:o;n.an.audio=n.Sr(s)}for(var a=0;a<n.an.video.length;a++){var c=0;if(t.audio){var h=n.$e.getAudioIndexFromVideo(n.an.video,n.an.audio,a),f=n.an.audio[h];f&&(c=f.bitrate)}n.an.video[a].audioBitrate=c}return qe(n.$e)&&n.an.audio.length>0&&(n.$e.audioStreams=n.an.audio),n.Ar(n.an.video,n.an.audio,n._t.key_info),n.kr(t)||n.resetBrain(!0),n.fire(Qi.STREAMS_LOADED,n.an),ho(uo(n.an.video),(function(t){var e=t.compatibleStreams,r=t.incompatibleStreams,o=t.incompatibleStreamsAttributes;n.an.video=e,r.length&&(n.fire(Qi.AVAILABLE_STREAMS_CHANGED),n.fire(Qi.MEDIA_CAPABILITY_STREAMS_UNSUPPORTED,{incompatibleStreams:r,incompatibleStreamsAttributes:o})),i()}))})))},i.Mr=function(t,n){this.sorcerer&&this.sorcerer.destroy(),this.sorcerer=new Wr(t,n),this.F.src=URL.createObjectURL(this.sorcerer.mediaSource),this.successfulSegments=this.sorcerer.getSuccessfulSegments(),this.failedSegments=this.sorcerer.getFailedSegments(),this.Ke()},i.Ke=function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.Or(500),clearTimeout(this.Ye),this.Ye=setTimeout((function(){t.Or(5e3)}),6e4),n&&this.yr()},i.Or=function(t){var n=this;clearInterval(this.We),this.We=setInterval((function(){n.yr()}),t)},i.Je=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=t?1/0:0;for(var i in this.an)this.an[i].length&&(n=Math[t?"min":"max"](n,this.an[i][0].duration));return n},i.Dt=function(t){var n=this;return this.Qe(t).then((function(){var i=n.video&&n.video.metadata.percentShown?n.video.metadata.percentShown:null,e=n.$e.filterStreams(n.an.video,n.F.clientWidth,n.F.clientHeight,i).length-1,r=n.an.video[0];n.Ve.length&&(r=n.an.video[n.Ve[0]]),void 0!==n.Ee&&e<=n.an.video.indexOf(t.video[n.Ee])&&(r=n.an.video[e]),n.Mr(n.F,{duration:n.Je(),fetcherTimeout:8e3,fetcherRetryAbortErrors:!1}),n.sorcerer.on("srcnotsupported",(function(){n.fire(Qi.SCANNER_ERROR,{reason:"this codec is not supported for mediasource playback"})}));var o=n.an.video.indexOf(r),u=function(t){n.an[t].forEach((function(i,e){var r=n.Rr(e,"init",t);n.Ir(e,t)&&n.an[t][e].init_segment_range&&(r={url:r,byteRange:n.Cr(e,"init",t)}),n.sorcerer.addStream("".concat(i.mime_type,'; codecs="').concat(n.an[t][e].codecs,'"'),r)}))};for(var s in n.an)u(s);n.sorcerer.video.switchTo(o,!0,{reasonForSwitch:7}),n.sorcerer.on("queued",n.Nr.bind(n)),n.sorcerer.on("downloadabort",n.jr.bind(n)),n.sorcerer.on("appendbufferend",n.Hi.bind(n)),n.sorcerer.on("downloadstart",n.Pi.bind(n)),n.sorcerer.on("downloadend",n.Fi.bind(n)),n.sorcerer.on("downloaderror",n.Dr.bind(n)),n.sorcerer.on("downloadtimeout",n.Vi.bind(n)),n.sorcerer.on("quotaexceedederror",n.Ur.bind(n)),n.sorcerer.video.on("streamchange",n.xr.bind(n)),n.sorcerer.video.on("streamchangestart",n.Lr.bind(n)),n.sorcerer.mediaSource.addEventListener("sourceended",(function(){n.fire(Ki.PROGRESS)}))}))},i.Tr=function(t){var n=t.slice(0);return n.sort((function(t,n){var i=t.width*t.height*t.bitrate,e=n.width*n.height*n.bitrate;return t.width===n.width&&t.height===n.height?t.framerate-n.framerate:i-e})),n},i.Sr=function(t){var n=t.slice(0);return n.sort((function(t,n){return t.bitrate*t.channels-n.bitrate*n.channels})),n},i.Ir=function(t,n){return!!this.an[n][t].segments[0].range},i.Cr=function(t,n,i){return"init"===n?this.an[i][t].init_segment_range:this.an[i][t].segments[n].range},i.Pr=function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"video",e="init"===n;if(e)return 0;var r=this.an[i][t].segments[n].start;return r},i.Rr=function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"video",e=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r="init"===n;if(r&&!this.an[i][t].init_segment_range&&-1===this.an[i][t].init_segment.indexOf(".")){var o=this.an[i][t].init_segment;return Le(o)}var u=this.Re,s=this._t.base_url&&-1!==this._t.base_url.indexOf("//");if(s&&(u=this._t.base_url),this._t.base_url&&!s&&(u+=this._t.base_url),this.an[i][t].base_url&&(u+=this.an[i][t].base_url),this.Ir(t,i))return u;if("init"===n)return u+this.an[i][t].init_segment;var a=this.an[i][t].segments[n];a.url&&(u+=a.url);var c=-1!==u.indexOf("akamaized"),h=-1===u.indexOf("?")?"?":"&";return e&&this.CMCDLogger&&c&&(u+="".concat(h).concat(this.CMCDLogger.getLogAsQueryParam(a,i))),u},i.Fr=function(t,n,i){return"".concat(t,":").concat(n,":").concat(i)},i.Hr=function(t,n,i){return n===this.an[i][t].segments.length-1},i.Vr=function(t,n){var i=[],e=this.ke[t];if(!e)return i;for(var r=0;r<e.length;r++)this._e.has(this.Fr(e[r],t,n))&&i.push(e[r]);return i},i.getCurrentStream=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"video";return this.oe(0,t)},i.oe=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"video";return void 0!==this.sorcerer&&(t=this.sorcerer[n].activeStreamIndex),this.an[n][t]},i.ze=function(t){var n=this,i=this.an.video,e=this.video&&this.video.metadata.percentShown?this.video.metadata.percentShown:null;if(0===(i=this.$e.filterStreams(i,this.F.clientWidth,this.F.clientHeight,e)).length)return di.resolve({index:!1,reasonForSwitch:null});if(this.Be.video&&!qe(this.$e))return di.resolve({index:!1,reasonForSwitch:null});var r=i[i.length-1];if(r.id!==this.Ie){this.Ie=r.id;var o={index:this.an.video.indexOf(r),streams:this.an.video};this.fire(Qi.STREAM_TARGET_CHANGE,o)}var u=this.oe();return this.$e.shouldPowerUp(i,u,t).then((function(t){return!1===t.index?n.$e.shouldPowerDown(i,u).then((function(t){return!1===t.index?{index:t.index,reasonForSwitch:t.reasonForSwitch}:{index:n.an.video.indexOf(i[t.index]),reasonForSwitch:t.reasonForSwitch}})):{index:n.an.video.indexOf(i[t.index]),reasonForSwitch:t.reasonForSwitch}}))},i.Br=function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"video";return this.ze(!1).then((function(i){var e=i.index,r={reasonForSwitch:i.reasonForSwitch};"audio"===n&&(!1===e&&(e=t.sorcerer.video.activeStreamIndex),e=t.$e.getAudioIndexFromVideo(t.an.video,t.an.audio,e),t.sorcerer.audio.activeStreamIndex===e&&(e=!1));var o=!1;!1!==e&&(o=e>t.sorcerer[n].activeStreamIndex,t.Be[n]=!0,t.sorcerer[n].switchTo(e,!0,r).then((function(){t.Be[n]=!1})).catch(console.error));for(var u=o,s=t.$e.getSegmentsToLoad(u,n,t.oe()),a=t.sorcerer[n].activeStreamIndex,c=function(i){var e=t.Rr(a,s[i],n,!0),r=t.Vr(s[i],n);if(r.length>1)return"continue";if(1===r.length&&a<=r[0])return"continue";var o=t.Hr(a,s[i],n),u={stream:a,segment:s[i],type:n},c=t.sorcerer[n].streams[a],h=e;t.Ir(a,n)&&(h={url:h,byteRange:t.Cr(a,s[i],n)});var f=t.Pr(a,s[i],n),l="video"===n,v=null;0===a&&"video"===n&&(v=16e3);var d=null;try{d=t.an[n][a].segments[s[i]].size}catch(t){}c.addSegment(h,{identifier:u,isFinalSegment:o,priority:f,includeWithBandwidthChecks:l,timeout:v,size:d}).catch((function(t){}))},h=0;h<s.length;h++)c(h)})).catch((function(t){throw t}))},i.wr=function(){var t=this,n=function(n){if(0===t.an[n].length)return"continue";var i=0,e=t.$e.getSegmentsToLoad(!1,n,t.oe());e.length>0&&(i=e[0]);var r=t.Ge;"audio"===n&&(r=t.$e.getAudioIndexFromVideo(t.an.video,t.an.audio,t.Ge));var o=t.Fr(r,i,n);if(t._e.has(o))return"continue";var u=t.Rr(r,i,n),s=t.Hr(r,i,n),a=t.sorcerer[n].streams[r],c={stream:r,segment:i,type:n},h=u;t.Ir(r,n)&&(h={url:h,byteRange:t.Cr(r,i,n)}),a.addSegment(h,{identifier:c,isFinalSegment:s,loadOnly:!0,priority:0}).catch((function(t){}))};for(var i in this.an)n(i)},i.er=function(){var t=this;return this.Oe&&this.Oe.then((function(n){var i=[];for(var e in t.an)t.an[e].length>0&&i.push(t.Br(e));return di.all(i)}))},i.Nr=function(t){this._e.add(this.Fr(t.stream,t.segment,t.type)),this.ke[t.segment]||(this.ke[t.segment]=[]),-1===this.ke[t.segment].indexOf(t.stream)&&this.ke[t.segment].push(t.stream)},i.qr=function(t){var n=this;(this.ke[t.segment]||[]).forEach((function(i){n._e.delete(n.Fr(i,t.segment,t.type))}))},i.jr=function(t){this.ke[t.segment]&&this.qr(t)},i.Hi=function(t){this.fire(Qi.APPEND_BUFFER_END,{identifier:t}),this.Ke(),this.xe&&t.stream===this.Ue&&(this.xe=!1,this.Le=this.an.video[t.stream].segments[t.segment].start),this.ke[t.segment]&&this.qr(t);var n=this.$e.canPlayFromTimeInStream(this.Ce,this.oe());null!==this.Ce&&this.Ne&&n&&(this.Ne(this.Ce),this.Ne=null),this.Te&&this.Te.onSegmentAppended()},i.Pi=function(t){this.fire(Qi.DOWNLOAD_START,{identifier:t})},i.Fi=function(t,n){this.fire(Qi.DOWNLOAD_END,{identifier:t,data:n})},i.Dr=function(t,n){this.qr(t);var i=Qi.DOWNLOAD_ERROR;410===n&&(i=Qi.MEDIA_URL_EXPIRED),502===n&&this.video.metadata.drm&&(i=Qi.DRM_FAILURE),this.fire(i,{identifier:t,status:n})},i.Vi=function(t,n){this.fire(Qi.DOWNLOAD_TIMEOUT,{identifier:t,data:n}),this.ke[t.segment]&&this.qr(t),"video"===t.type?this.Be.video=!1:"audio"===t.type&&(this.Be.audio=!1)},i.Ur=function(t){this.fire(Qi.QUOTA_EXCEEDED_ERROR,{buffered:t})},i.Lr=function(t,n){var i={previousStreamIndex:this._t.video.indexOf(this.an.video[t]),index:this._t.video.indexOf(this.an.video[n]),streams:this._t.video};this.fire(Qi.STREAM_CHANGE_START,i)},i.xr=function(t,n){t>this.Ue&&this.currentTime>0&&(this.xe=!0),this.Ue=t;var i={index:this._t.video.indexOf(this.an.video[t]),streams:this._t.video,metadata:n};this.fire(Qi.STREAM_CHANGE,i)},i.Ar=function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.q.drmHandler;if(r){var o={audio:i.map((function(t){return"".concat(t.mime_type,';codecs="').concat(t.codecs,'"')})),video:n.map((function(t){return"".concat(t.mime_type,';codecs="').concat(t.codecs,'"')}))};r.init(this,o,e),r.setFallbackCallback((function(){return t.pause()}))}},i.Se=function(){var t,n;(null==(t=this.B.tests)||null==(n=t.cmcd)?void 0:n.group)&&(this.CMCDLogger=new Jr(this,this.B.sessionMetadata))},i.Xe=function(){return yi("module/media-manifest.js")},U(n,[{key:"preload",get:function(){return this.Z},set:function(t){this.Er(this.Z,t),this.Z=t}},{key:"videoElement",get:function(){return this.F}},{key:"videoWidth",get:function(){var t=this.oe();return t?t.width:this.F.videoWidth}},{key:"videoHeight",get:function(){var t=this.oe();return t?t.height:this.F.videoHeight}},{key:"restrictedStreamIndexes",get:function(){return this.Ve},set:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.Ve.join(",")!==n.join(",")&&(this.Ve=n,this.Oe.then((function(){return t.lockStreamIndexes()})).catch(console.error))}},{key:"currentTime",get:function(){return null!==this.Ce?this.Ce:this.F.currentTime},set:function(t){(this.Me||0!==t)&&this.seekToTime(t)}},{key:"downloadSpeed",get:function(){return this.qe}},{key:"brainDebug",get:function(){var t=this.sorcerer&&this.$e&&this.$e.getCurrentSpeed?this.$e.getCurrentSpeed():null,n=this.sorcerer&&this.sorcerer.getResponseSpeeds?this.sorcerer.getResponseSpeeds():null;return{currentSpeed:t,responseSpeeds:n=n?n.slice(-20):[]}}},{key:"isLowerProfileAvailable",get:function(){return this.sorcerer?this.sorcerer.video.activeStreamIndex>0:null}},{key:"videoStreams",get:function(){return this.an.video}}]),n}(nr),vo=function(){function t(t){this.he=t,this.Gr=0,this.Wr=setInterval(this.Yr.bind(this),500)}var n=t.prototype;return n.destroy=function(){clearInterval(this.Wr)},n.Yr=function(){var t=this.he.videoElement,n=this.he.getCurrentStream();if(t&&n){this.Gr=t.currentTime;var i=this.$r();null!==i&&(this.Kr=i,this.he.fire(Zi.LATENCY_UPDATED,i),this.he.lowLatencyMode&&(ke.browser.ie||ke.browser.safari||null!==this.he.presentationDelay&&(t.playbackRate=1)))}},n.zr=function(){var t=this.he.getCurrentStream();return t?t.edge+t.age:null},n.$r=function(){var t=this.zr();return null===t||0===this.Gr?null:t-this.Gr},n.Jr=function(){var t=this.he.videoElement,n=this.he.getCurrentStream();if(!t||!n)return 0;var i=t.buffered.length;return i?t.buffered.end(i-1):n.edge-this.Gr},U(t,[{key:"latency",get:function(){return this.Kr}},{key:"liveSyncPosition",get:function(){var t=this.zr(),n=this.he.presentationDelay,i=this.he.getCurrentStream();return null===t||null===n||null===i?0:t-n-this.edgeStalled}},{key:"edgeStalled",get:function(){var t=this.he.getCurrentStream();if(!t)return 0;var n=3*(this.he.lowLatencyMode&&t.partTargetDuration||t.targetDuration);return Math.max(t.age-n,0)}}]),t}(),po=[1,2,5],mo=function(t){function n(n){var i,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(i=t.call(this,n,e)||this).Xr=.4,i.Qr=.6,i.consecutiveStreamIndex={},i.isNewPlayback=!0,i}F(n,t),U(n,[{key:"displayName",get:function(){return"Live"}}]);var i=n.prototype;return i.optimalStream=function(t,n){var i,e;if(this.isNewPlayback&&(null==(e=this.scanner.sorcerer)?void 0:e.getResponseSpeeds().length)>=2&&(this.isNewPlayback=!1),1===t.length)return{index:0,reasonForSwitch:6};if(this.isNewPlayback){for(var r=0,o=0,u=this.scanner.videoElement.clientHeight,s=[],a=0;a<t.length;a++){var c=t[a].height;s.push(c),c<u&&c>o&&(r=a,o=t[a].height)}return{index:r=Math.max(0,r-1),reasonForSwitch:4}}for(var h=this.getCurrentSpeed(),f=n,l=n,v=0;v<t.length;v++)h*this.Xr>t[v].bandwidth&&(f=v),h*this.Qr>t[v].bandwidth&&(l=v);var d=n<f?f:l;this.Zr(d),this.consecutiveStreamIndex[d]++;var p=this.scanner.lowLatencyMode?.5:1.5,m=this.scanner.segmentLength*p,y=this.scanner.videoElement,w=y.buffered,b=null==(i=this.B.mediaSourceScanner)?void 0:i.droppedFrameSwitchPercent;return w&&0!==w.length?w.end(w.length-1)-y.currentTime<m?{index:0!==n?n-1:0,reasonForSwitch:1}:n>0&&!isNaN(b)&&this.hasTooManyDroppedFrames(n,this.scanner.getCurrentStream(),b)?(this.blacklist(n),this.scanner.fire(Qi.DROPPED_FRAME_PERCENT_EXCEEDED),{index:n-1,reasonForSwitch:2}):this.consecutiveStreamIndex[d]>2&&d!==n?{index:d,reasonForSwitch:3}:{index:n,reasonForSwitch:null}:{index:0,reasonForSwitch:5}},i.getCurrentSpeed=function(){var t;return null==(t=this.scanner.sorcerer)?void 0:t.getCurrentSpeed({type:"average",howMany:5,weights:po})},i.Zr=function(t){for(var n in this.consecutiveStreamIndex[t]||(this.consecutiveStreamIndex[t]=0),this.consecutiveStreamIndex)this.consecutiveStreamIndex.hasOwnProperty(n)&&parseInt(n,10)!==t&&(this.consecutiveStreamIndex[n]=0)},i.getAvailabilityStart=function(t){return this.to(t.edge)},i.getAvailabilityEnd=function(t){return this.no(t.edge)},i.canPlayFromTimeInStream=function(t,n){return!!n&&this.isTimeInBuffer(t,this.scanner.F.buffered,this.scanner.F.duration)},i.getSegmentsToLoad=function(t,n,i){var e,r,o,u=this,s=this.scanner,a=s.currentTime,c=s.liveTailTime,h=s.sorcerer,f=s.bufferTarget,l=s.atLiveEdge,v=null==(e=h[n])||null==(r=e.sourceBuffer)?void 0:r.buffered,d=(null==v?void 0:v.length)?v.start(v.length-1):0,p=function(t,n){if(!n||!n.length)return 0;if(1===n.length&&n.end(0)-n.start(0)<1e-6)return 0;for(var i=0,e=n.length-1;e>=0&&n.end(e)>t;--e)i+=n.end(e)-Math.max(n.start(e),t);return i}(Math.max(a,d),v);if(!t&&p>=f)return[];var m=Math.max(a,c),y=l?i.edge:m+this.scanner.bufferTarget,w=this.to(y),b=this.no(y),g=this.scanner.lowLatencyMode&&(null==(o=i.parts)?void 0:o.length),E=(g?i.parts:i.segments).filter((function(n){return!!n.uri&&(t||!u.scanner.isSegmentAdded(n))&&!(n.end<w||n.start>b)}));return g&&E.forEach((function(t,n){for(;t=t.dependentOn;)E.includes(t)||u.scanner.isStreamSegmentAdded(t)||E.splice(n,0,t)})),h[n].activeStreamIndex,E},i.to=function(t){var n=t-this.io();return Math.max(0,n)},i.no=function(t){var n=this.io(),i=this.scanner.bufferTarget,e=t-Math.max(0,n-i);return Math.max(0,e)},i.io=function(){return this.scanner.presentationDelay||this.scanner.manifest.presentationDelay},n}($r),yo=["disabled","hidden","showing"],wo=["subtitles","captions","descriptions","chapters","metadata"],bo=["ar","fa","he","iw","ku","ps","sd","ur","yi"],go=new re,Eo=new re,TelecineTextTrack=function(){function TelecineTextTrack(t,n){var i=t.kind,e=t.src,r=void 0===e?null:e,o=t.label,u=void 0===o?"":o,s=t.language,a=void 0===s?"":s,c=t.id,h=void 0===c?Ue():c;if(-1===wo.indexOf(i))throw Ye(12,"SYNTAX_ERR","Syntax Error");ai(this),Object.defineProperties(this,{kind:{value:i,enumerable:!0},label:{value:u,enumerable:!0},language:{value:a,enumerable:!0},id:{value:"".concat(h),enumerable:!0},rtl:{value:-1!==bo.indexOf(a.substr(0,2)),enumerable:!0}}),this.video=n,this.src=r,this.st=!1,go.set(this,"disabled")}return TelecineTextTrack.prototype.dispatchEvent=function(t){this.fire(t,{target:this})},U(TelecineTextTrack,[{key:"mode",get:function(){return go.get(this)},set:function(t){if(yo.indexOf(t)>-1){if(this.st=!0,go.get(this)===t)return;go.set(this,t),this.video.currentScanner&&this.video.currentScanner.setModeForTrack(this,t),this.dispatchEvent("modechange")}}},{key:"src",get:function(){return Eo.get(this)},set:function(t){Eo.set(this,t),this.video.fire(Qi.TEXT_SRC_UPDATE,this)}},{key:"cues",get:function(){return this.video.currentScanner?this.video.currentScanner.getCuesForTrack(this):[]}},{key:"activeCues",get:function(){return this.video.currentScanner?this.video.currentScanner.getActiveCuesForTrack(this):[]}},{key:"trackElement",get:function(){return document.getElementById("telecine-track-".concat(this.id))}}]),TelecineTextTrack}();function _o(t){var n=/^(?:(\d{2,}):)?(\d{2}):(\d{2})[,.](\d{3})$/.exec(t);if(!n)return-1;var i=parseInt(n[4],10)/1e3;return i+=parseInt(n[3],10),n[2]&&(i+=60*parseInt(n[2],10)),n[1]&&(i+=60*parseInt(n[1],10)*60),i}function ko(t){var n=0,i=t.split(/(?:(?:\r\n|\n){2,})/),e=[],r=null;do{0===n&&/^\uFEFF?WEBVTT(?: .*)?/.test(i[n])&&n++,(r=/^(?:(.*)(?:\r\n|\n))?([\d:,.]+) --> ([\d:,.]+)(.*)?(?:\r\n|\n)([\s\S]*)/.exec(i[n]))&&e.push({startTime:_o(r[2]),endTime:_o(r[3]),text:r[5]}),n++}while(n<i.length);return e}function To(t,n,i){return i?n?n(t):t:(t&&t.then||(t=di.resolve(t)),n?t.then(n):t)}function So(t,n){try{var i=t()}catch(t){return n(t)}return i&&i.then?i.then(void 0,n):i}function Ao(t,n){return t&&t.then?t.then(n):n(t)}function Mo(){}var Oo=ke.browser.ie||ke.browser.edge?.5:.2;function Ro(t,n){var i=t();return i&&i.then?i.then(n):n(i)}function Io(t){return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];try{return di.resolve(t.apply(this,n))}catch(t){return di.reject(t)}}}function Co(t,n){if(!n)return t&&t.then?t.then(Mo):di.resolve()}var No=function(t){function n(n){var i,e,r,o,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(o=t.call(this,n,u)||this).eo=!1,o.ro=!1,o.oo=!1,o.uo=!0,o.so=!1,o.ao=2e3,o.co=1e4,o.reset();var s=u.lowLatencyMode?5:12;return o.bufferTarget=u.bufferTarget||s,o.presentationDelay=u.presentationDelay||s,o.lowLatencyMode=u.lowLatencyMode,o.dvrEnabled=null!==(i=u.dvrEnabled)&&void 0!==i&&i,o.ho=null==(e=o.B.tests)||null==(r=e.llhls_timeout)?void 0:r.group,window.addEventListener("online",(function(){o.play()})),o}F(n,t),U(n,null,[{key:"displayName",get:function(){return"HLSLiveScanner"}},{key:"supported",get:function(){return"undefined"!=typeof MediaSource&&MediaSource.isTypeSupported}},{key:"supportedVideoTypes",get:function(){return["application/x-mpegURL"]}}]);var i=n.prototype;return i.deactivate=function(){t.prototype.deactivate.call(this),this.reset()},i.reset=function(){var t,n,i;null==(t=this.Qt)||t.destroy(),null==(n=this.fo)||n.stop(),null==(i=this.lo)||i.destroy(),this.vo=new bi,this.Qt=null,this.an={},this.an.video=[],this.an.audio=[],this.Ue=0,this.do=!1,this.po=!1,this.mo=0,this.yo=Number.NEGATIVE_INFINITY,this.wo=-1,this.Ce=null,this.Ne=null,this.bo=new mo(this,this.B),this.lo=new vo(this),this.Ve=[],this.Be={},this.Eo={},this._o={},this.ko={},this.To={}},i.endLive=function(){var n;this.do=!1,this.po=!0,this.dvrEnabled&&!this.atLiveEdge||(null==(n=this.fo)||n.stop(),this.Qt&&(this.Qt.abortFetches(),this.Qt.endOfStream()),this.dvrEnabled||t.prototype.deactivate.call(this),this.fire(Ki.ENDED))},i.So=function(){this.do||(this.do=!0,this.fire(Zi.STREAM_ONLINE))},i.Ao=function(){this.do&&(this.do=!1,this.fire(Zi.STREAM_OFFLINE))},i.Mo=function(t){t?this.So():this.Ao()},i.Oo=function(t){try{var n=this;if(n.po)return;n.fo&&(n.fo.stop(),n.fo.off());var i=[n.Xe()];return n.video.metadata.p2pReady&&i.push(n.video.metadata.p2pReady),To(di.allSettled(i),(function(i){var e=Y(i,1)[0].value,r=e.M3U8Loader,o=e.PLAYLIST_UPDATE,u=e.PLAYLIST_ERROR,s=e.convertTsCodecs;return n.fo=new r,n.fo.lowLatencyMode=n.lowLatencyMode,n.fo.dvrEnabled=n.dvrEnabled,n.fo.on(o,n.Ro.bind(n)),n.fo.on(u,(function(t){n.Ao()})),Ao(So((function(){var i=n.video.metadata.playlistRefreshUrl;return To(n.fo.start(t,i),(function(t){n._t=t,n.So()}))}),(function(t){throw n.Ao(),n.endLive(),t})),(function(t){n.an.video=jo(function(t){return t.filter((function(n){return n.codecs.split(".")[0]===t[0].codecs.split(".")[0]}))}(function(t){var n=t.slice(0);return n.sort((function(t,n){var i=t.width*t.height*t.bitrate,e=n.width*n.height*n.bitrate;return t.width===n.width&&t.height===n.height?t.framerate-n.framerate:i-e})),n}(n._t.video))),n.an.audio=jo(function(t){return t.filter((function(t,n,i){return i.indexOf(t)===n}))}(function(t,n){return t.reduce((function(t,n,i,e){return t.concat(function(t){return t.audio}(n))}),[])}(n.an.video)));var i=n.Io("video",!0),e=i.index,r={reasonForSwitch:i.reasonForSwitch};return To(n.fo.switchTo("video",e),(function(){var t,i=[];if(n.an.audio.length){var o=n.Io("audio",!0).index;t=o,i.push(n.fo.switchTo("audio",t))}if(n.manifest.captions&&n.manifest.captions.length>0){var u=n.Io("subtitles",!0).index;i.push(n.fo.switchTo("subtitles",u))}return To(di.all(i),(function(){var i,o;null==(i=n.Qt)||i.destroy(),n.Qt=new Wr(n.F,{fetcherRetryAbortErrors:!1,fetcherTimeout:8e3}),n.Qt.initFrameDropper(),n.an.video.forEach((function(t){n.Qt.addStream(s(He(n.fo.activeStream("video").mimeType,t.codecs)),t.initSegment)})),n.an.audio.forEach((function(t){n.Qt.addStream(s(He(n.fo.activeStream("audio").mimeType,t.codecs)),t.initSegment)})),n.fire(Qi.STREAMS_LOADED,n.an),n.manifest.captions&&n.manifest.captions.length>0&&(n.manifest.captions.forEach(n.Co.bind(n)),n.fire(Qi.TEXT_TRACKS_AVAILABLE)),n.No(),n.Qt.video.switchTo(e,!1,r),n.an.audio.length&&(null==(o=n.Qt.audio)||o.switchTo(t,!1))}))}))}))}))}catch(t){return di.reject(t)}},i.jo=function(){try{var t=this;return function(t){if(t&&t.then)return t.then(Mo)}(So((function(){return To(t.fo.update(),(function(){t.So()}))}),(function(){t.Ao()})))}catch(t){return di.reject(t)}},i.No=function(){this.Qt.video.on("streamchange",this.xr.bind(this)),this.Qt.video.on("streamchangestart",this.Lr.bind(this)),this.Qt.on("downloadend",this.Fi.bind(this)),this.Qt.on("downloadtimeout",this.Vi.bind(this)),this.Qt.on("downloadabort",this.Do.bind(this)),this.Qt.on("appendbufferend",this.Uo.bind(this))},i.Fi=function(t,n){if(!t||!t.isInitSegmentRequest){var i=this.oe();n.extraContext={liveAvail:{start:this.bo.getAvailabilityStart(i),end:this.bo.getAvailabilityEnd(i)}},this.fire(Qi.DOWNLOAD_END,{identifier:t,data:n})}},i.Vi=function(t,n){t&&t.isInitSegmentRequest||(this.Fr(t),this.xo(t),this.Be[t.type]=!1,this.fire(Qi.DOWNLOAD_TIMEOUT,{identifier:t,data:n}))},i.Do=function(t){t&&t.isInitSegmentRequest||(this.Fr(t),this.xo(t))},i.Lr=function(t,n){var i={previousStreamIndex:this.an.video.indexOf(this.an.video[t]),index:this.an.video.indexOf(this.an.video[n]),streams:this.an.video};this.fire(Qi.STREAM_CHANGE_START,i)},i.xr=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.fire(Qi.STREAM_CHANGE,{index:t,streams:this.an.video,metadata:n})},i.Uo=function(t){var n=t.type,i=t.stream,e=this.sorcerer[n].sourceBuffer.buffered,r=this.Lo(t);r&&e.length&&(this.an[n][i].playlist.timeOffset=e.end(e.length-1)-(r.end-r.timeOffset)),null!==this.Ce&&this.Ne&&(this.Ce<this.liveTailTime&&(this.Ce=this.liveTailTime),this.bo.canPlayFromTimeInStream(this.Ce,this.oe())&&(this.Ne(this.Ce),this.Ne=null))},i.Fr=function(t){var n=t.type,i=t.segment,e=t.part;return"".concat(n,"_").concat(i,"_").concat(e)},i.Lo=function(t){var n=t.type,i=t.stream,e=t.segment,r=t.part,o=this.an[n][i].getSegmentBySN(e);return(null==o?void 0:o.getPart(r))||o},i.xo=function(t){if(t.part>0){var n=P(P({},t),{},{part:t.part-1});this.xo(n)}var i=this.Fr(t);delete this.Eo[i]},i.isSegmentAdded=function(t){return!!this.Eo[this.Fr(t)]},i.isStreamSegmentAdded=function(t){var n=this.Fr(t),i=this.Qt[t.type].activeStreamIndex;return!!this.Eo[n]&&this.Eo[n].stream===i},i.Ro=function(t,n){try{var i,e,r=t.type;return null==(i=this.Qt)||i.setLiveSeekableRange(this.liveTailTime,this.liveEdgeTime),this.fire(Qi.STREAM_UPDATED,t),"subtitles"===r?void((this.ro||this.oo)&&(null==(e=this.manifest.captions)?void 0:e.length)>0&&this.Po()):(n||this.Br(r),this.Mo(this.Fo(r)||!this.Ho()),this.Vo(),(this.lowLatencyMode||this.video.metadata.p2pReady)&&this.Bo(),To())}catch(t){return di.reject(t)}},i.Co=function(t,n){var i=t.label,e=t.language;if(!this.qo){var r=new TelecineTextTrack({label:i,id:n,kind:"captions",language:e},this.q);this.q.textTracks=Ne([r]),this.qo=this.addTextTrack(r)}},i.Go=function(t){return"".concat(t.type,"_").concat(t.mediaSequenceNumber)},i.Wo=function(t){var n=this.Go(t),i=this._o[n],e=t.end>=this.currentTime&&t.start<=this.currentTime+this.bufferTarget;return this.ro&&!i&&e},i.Yo=function(t){var n=this.Go(t),i=this.ko[n],e=t.end>=this.liveEdgeTime-t.duration&&t.start<=this.liveEdgeTime+this.bufferTarget;return this.oo&&!i&&e},i.$o=function(t){try{var n=this,i=n.Go(t);return Ro((function(){if(!n.To[i])return To(Tr(t.url).text(),(function(t){var e=ko(t),r=function(t){var n=t.match(/=MPEGTS:(\d+),/);return(n&&n[1]||0)/9e4}(t),o=e.map((function(t){return t.startTime=r+t.startTime,t.endTime=r+t.endTime,new(window.VTTCue||window.TextTrackCue)(t.startTime,t.endTime,t.text)}));n.To[i]=o}))}),(function(){return n.To[i]}))}catch(t){return di.reject(t)}},i.Po=function(){try{var t=this;return To(t.vo,(function(){t.manifest.captions&&t.manifest.captions[0].segments.forEach(Io((function(n){var i=t.Go(n),e=t.Wo(n),r=t.Yo(n);return function(o){var u=function(){if(e||r)return To(t.$o(n),(function(n){e&&(t._o[i]=!0,n.forEach((function(n){t.qo.addCue(n)}))),r&&(t.ko[i]=!0,t.fire(Qi.SEGMENT_CUES_LOADED,n))}))}();if(u&&u.then)return u.then(Mo)}()})))}))}catch(t){return di.reject(t)}},i.Fo=function(t){var n,i=this.oe(t),e=3*(this.lowLatencyMode?3:1);return(null==(n=i.playlist)?void 0:n.misses)<e},i.er=function(){try{var t=this;return To(t.vo,(function(){for(var n in t.an)t.an[n].length>0&&t.Br(n)}))}catch(t){return di.reject(t)}},i.Br=function(t){try{var n=this;return To(n.vo,(function(){var i,e=n.Io(t),r=e.index,o=e.reasonForSwitch;return Ro((function(){if(r>=0&&r!==n.sorcerer[t].activeStreamIndex)return i=r>n.sorcerer[t].activeStreamIndex,n.Be[t]=!0,To(n.fo.switchTo(t,r),(function(){var i={reasonForSwitch:o};n.sorcerer[t].switchTo(r,!0,i).then((function(){n.Be[t]=!1})).catch(console.error)}))}),(function(){return To(pi(0),(function(){var e=n.lowLatencyMode&&void 0!==i,r=n.Qt[t].activeStreamIndex,o=n.oe(t,r),u=n.bo.getSegmentsToLoad(e,t,o),s=n.Ko();u.forEach((function(i){var e=n.Fr(i),u={type:t,stream:r,segment:i.segment,part:i.part},a="video"===t&&!i.hint,c=s;if(i.hint&&n.eo&&i.start>n.currentTime){var h=1e3*(i.start-n.currentTime);c=Math.min(8e3,h+s)}var f=o.bitrate/8*i.duration,l=n.sorcerer[t].streams[r],v=n.zo(i);l.addSegment(v,{identifier:u,includeWithBandwidthChecks:a,priority:i.programDateTime,excludeConnectTime:n.lowLatencyMode,timeout:n.ho||n.lowLatencyMode?c:8e3,size:n.ho||n.lowLatencyMode?f:void 0}).catch((function(t){t instanceof Nr||t instanceof ur||n.xo(u)})),n.Eo[e]=u}))}))}))}))}catch(t){return di.reject(t)}},i.zo=function(t){var n,i=null==t?void 0:t.url,e=null==(n=this.fo)?void 0:n.baseUrl;return e&&i&&!i.startsWith(e)&&(i="".concat(e).concat(t.uri)),i},i.Io=function(t){var n,i,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.Be[t])return{index:-1,reasonForSwitch:null};if("subtitles"===t){var r=this.fo.activeStream("video");return{index:r.subtitles[r.currentRenditions.subtitles].index,reasonForSwitch:null}}if("audio"===t){var o=this.fo.activeStream("video");return{index:o.audio[o.currentRenditions.audio].index,reasonForSwitch:null}}if(!e&&De(this.mo)<this.ao)return{index:this.Ue,reasonForSwitch:null};this.mo=je();var u=null==(n=this.video)||null==(i=n.metadata)?void 0:i.percentShown,s=this.bo.filterStreams(this.an.video,this.F.clientWidth,this.F.clientHeight,u);if(0===s.length)return{index:this.Ue,reasonForSwitch:null};var a=this.bo.optimalStream(s,this.Ue),c=a.index,h=a.reasonForSwitch,f=s[c],l=this.an.video.indexOf(f);if(l>=0&&(e||l!==this.Ue)){var v=l>this.Ue;if(v&&De(this.yo)<this.co)return{index:this.Ue,reasonForSwitch:h};var d=l<this.Ue;d&&(this.yo=je());var p={index:l,streams:this.an.video};return this.fire(Qi.STREAM_TARGET_CHANGE,p),this.Ue=l,{index:l,reasonForSwitch:h}}return{index:this.Ue,reasonForSwitch:h}},i.getCurrentStream=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"video";return this.oe(t)},i.oe=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"video",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return void 0!==this.Qt&&null!==this.Qt&&(n=this.Qt[t].activeStreamIndex),this.an[t][n]},i.Bo=function(){if(this.F.currentTime===this.wo&&je()-this.Jo>=1e3&&this.Xo()){var t="Jumping forward ".concat(.1,"s")+" because of stall at time of ".concat(this.F.currentTime);this.fire(Zi.STALL_JUMP,{msg:t}),this.F.currentTime+=.1}this.wo=this.F.currentTime,this.Jo=je()},i.Xo=function(){return 0!==this.F.readyState&&!!this.F.buffered.length&&!this.F.paused&&this.Qo(this.F.buffered,this.F.currentTime)},i.Qo=function(t,n){for(var i=0;i<t.length;i++)if(!(n<t.start(i)-.1||n>t.end(i)-.5))return!0;return!1},i.Vo=function(){var t=this.buffered;if(t.length){var n,i=t.length,e=this.F.currentTime;try{n=function(t,n){if(!t||!t.length)return null;if(1===t.length&&t.end(0)-t.start(0)<1e-6)return null;for(var i,e=0;e<t.length;e++)if(t.start(e)>n&&(0===e||t.end(e-1)-n<=.5)){i=e;break}return i>=0?i:null}(t,e)}catch(t){throw DOMException,t}if(null!==n&&0!==this.F.readyState&&!(this.F.paused||i<=n)){var r,o;try{r=t.start(n),o=t.end(i-1)}catch(t){throw DOMException,t}var u=r-e,s=o-r,a=this.lowLatencyMode?1:2;if(s>0&&s<=this.segmentLength*a){var c="Preventing jump too close to buffered end time."+" Would have jumped to: ".concat(r,".")+" Last buffered end time ".concat(o,".");this.fire(Zi.BUFFER_GAP_JUMP_PREVENT,{msg:c})}else{if(0===n){var h="Jumping forward ".concat(u)+" seconds because of gap before start time of ".concat(r);this.fire(Zi.BUFFER_GAP_JUMP,{msg:h})}else{var f="Jumping forward ".concat(u," seconds because of gap starting at")+" ".concat(t.end(n-1)," and ending at ").concat(r);this.fire(Zi.BUFFER_GAP_JUMP,{msg:f})}this.F.currentTime=r+.1}}}},i.Ho=function(){var t=this.buffered;return!!(t&&t.length&&this.F.currentTime+Oo>t.end(t.length-1))},i.setVideoSrc=function(t){try{var n=this;return To(n.Ze(n.Z),(function(){return To(n.Oo(t),(function(){n.F.src=URL.createObjectURL(n.Qt.mediaSource),n.vo.resolve()}))}))}catch(t){return di.reject(t)}},i.Ze=function(t){try{return this.Zo=new bi,"none"===t&&this.paused||this.Zo.resolve(),this.Zo}catch(t){return di.reject(t)}},i.getBitrateAtTime=function(t,n){if(!this.Qt)return 0;var i=this.Qt.streamIndexAtTime(t,n);return this.an[n][i]?this.an[n][i].bandwidth:0},i.onprogress=function(){this.Vo()},i.ondurationchange=function(){this.Vo()},i.ontimeupdate=function(){if(this.Qt&&(t.prototype.ontimeupdate.call(this),null===this.Ce)){this.atLiveTail=this.tu(this.F.currentTime),this.nu(this.F.currentTime)?this.atLiveEdge=!0:(this.F.playbackRate<1||this.iu())&&(this.atLiveEdge=!1),this.fire(Qi.DROPPED_FRAMES,this.Qt.getDroppedFrameTotal());var n=this.oe();if(n){var i={speed:this.bo.getCurrentSpeed(),bitrate:n.bitrate,speeds:this.Qt.getResponseSpeeds()};this.fire(Qi.BANDWIDTH,i)}!this.do&&this.Ho()&&this.fire(Zi.STREAM_OFFLINE),!this.lowLatencyMode&&De(this.mo)>this.ao&&this.er()}},i.nu=function(t){return t>=this.liveEdgeTime-1*this.segmentLength},i.iu=function(t){return t>=this.liveEdgeTime-2*this.segmentLength},i.tu=function(t){return t<=this.liveTailTime+2*this.segmentLength},i.ar=function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.Ce;return new di((function(i,e){t.bo.canPlayFromTimeInStream(n,t.oe())?i(n):t.Ne=i})).then((function(n){return t.Ce=null,t.ur=null,t.F.currentTime=n,new di((function(n,i){t.or=i,t.F.addEventListener("seeked",(function i(){n(t.F.currentTime),t.F.removeEventListener("seeked",i)}))}))}))},i.seekToTime=function(t){var n=this;if(!this.dvrEnabled||t===this.currentTime)return di.resolve();var i,e=null===this.Ce;if(e||(this.or&&(this.or(),this.or=null),this.ur=null,this.Ce=null,this.Ne=null),this.Ce=t,!this.bo.canPlayFromTimeInStream(t,this.oe()))try{for(var r in this.Eo={},this.an)if(this.an[r].length>0){var o=this.sorcerer[r].activeStreamIndex;this.sorcerer[r].streams[o].abort()}i=this.Qt.removeBuffer()}catch(t){}return this.ur=this.ar(t),di.all([this.vo,i]).then((function(){return n.er(),e||n.play().catch(n.rt.bind(n)),n.ur})).catch((function(t){}))},i.onpause=function(){var n;t.prototype.onpause.call(this),this.dvrEnabled?this.atLiveEdge=!1:(null==(n=this.fo)||n.stop(),this.Qt&&(this.Qt.abortFetches(),this.Eo={},this.Qt.removeBuffer().catch((function(){}))))},i.onplay=function(){this.dvrEnabled||this.eo&&this.jo()},i.pause=function(){this.dvrEnabled&&(this.uo=!1),t.prototype.pause.call(this)},i.play=function(){var n=this;return t.prototype.play.call(this,Io((function(){return n.Zo.resolve(),null!==n.Ce?di.resolve(n.ur):Ro((function(){if(n.eo&&!n.dvrEnabled)return n.Eo={},Ao(So((function(){return Co(n.Qt.removeBuffer())}),(function(t){})),(function(){return Co(n.jo())}))}),(function(){return To(n.vo,(function(){return n.er(),To(n.eu(),(function(){var t=Math.max(n.lo.liveSyncPosition,n.F.buffered.start(0));return n.uo?n.currentTime=t:n.currentTime=n.F.currentTime,n.eo=!0,di.resolve()}))}))}))})))},i.eu=function(){var t=this;return new di((function(n){var i=function i(){t.buffered.length&&(t.Qt.off("appendbufferend",i),n())};t.Qt.on("appendbufferend",i),i()}))},i.Ko=function(){return this.bo.getSegmentRelativeTimeout(this.an.video,this.oe("video"),1e3*this.segmentLength)},i.Xe=function(){return yi("module/media-manifest.js")},i.setCaptionsShouldDisplay=function(t){this.ro=t},i.setCaptionsShouldLoad=function(t){this.oo=t},U(n,[{key:"preload",get:function(){return this.Z},set:function(t){this.Z!==t&&"none"!==t&&this.Zo.resolve(),this.Z=t}},{key:"supportsPlaybackRate",get:function(){return t.prototype.supportsPlaybackRate&&this.dvrEnabled}},{key:"latency",get:function(){var t;return null==(t=this.lo)?void 0:t.latency}},{key:"lowLatencyMode",get:function(){return this._lowLatencyMode},set:function(t){this._lowLatencyMode=t,this.fo&&(this.fo.lowLatencyMode=t)}},{key:"downloadSpeed",get:function(){return this.bo.getCurrentSpeed()}},{key:"restrictedStreamIndexes",get:function(){return this.Ve},set:function(t){this.Ve.join(",")!==t.join(",")&&(this.Ve=t,this.bo.lock(this.Ve))}},{key:"videoWidth",get:function(){return this.ru?this.ru.width:this.F.videoWidth}},{key:"videoHeight",get:function(){return this.ru?this.ru.height:this.F.videoHeight}},{key:"currentTime",get:function(){return null!==this.Ce?this.Ce:this.F.currentTime},set:function(t){this.F.readyState<=0||(this.dvrEnabled&&this.eo?this.nu(t)?(this.atLiveEdge=!0,this.seekToTime(this.liveEdgeTime)):(this.atLiveEdge=!1,this.seekToTime(Math.max(t,this.liveTailTime))):this.F.currentTime=t)}},{key:"liveEdgeTime",get:function(){return this.lo.liveSyncPosition}},{key:"atLiveEdge",get:function(){return this.uo},set:function(t){this.dvrEnabled&&(this.uo=t,this.F.playbackRate>1&&t&&(this.F.playbackRate=1))}},{key:"atLiveTail",get:function(){return this.so},set:function(t){this.dvrEnabled&&(this.so=t,this.F.playbackRate<1&&t&&(this.F.playbackRate=1))}},{key:"liveTailTime",get:function(){var t,n,i,e,r=null!==(t=null==(n=this.oe())||null==(i=n.segments)||null==(e=i[0])?void 0:e.start)&&void 0!==t?t:0;return Math.max(r,0)}},{key:"ended",get:function(){return this.po}},{key:"isLowerProfileAvailable",get:function(){return this.Qt?this.Qt.video.activeStreamIndex>0:null}},{key:"sorcerer",get:function(){return this.Qt}},{key:"segmentLength",get:function(){var t,n,i,e;return this.lowLatencyMode&&(null==(t=this.fo)||null==(n=t.activeStream("video"))?void 0:n.partTargetDuration)||(null==(i=this.fo)||null==(e=i.activeStream("video"))?void 0:e.targetDuration)}}]),n}(nr);function jo(t){return t.forEach((function(t,n){t.index=n})),t}var Do=document.createElement("video"),Uo={"application/x-mpegURL":"application/x-mpegURL"},xo=function(t){function n(n){var i,e,r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(r=t.call(this,n,o)||this).ou=null,r.eo=!1,r.uo=!0,r.so=!1,r.uu=0,r.su=!1,r.reset(),r.dvrEnabled=null!==(i=o.dvrEnabled)&&void 0!==i&&i,r.liveEventStartTimeEpoch=null!==(e=o.liveEventStartTime)&&void 0!==e?e:0,window.addEventListener("online",(function(){r.play()})),r}F(n,t),U(n,null,[{key:"displayName",get:function(){return"NativeHLSLiveScanner"}},{key:"supported",get:function(){return n.supportedVideoTypes.length>0}},{key:"supportedVideoTypes",get:function(){var t=[];if("function"!=typeof Do.canPlayType)return t;for(var n in Uo){var i=Uo[n];Do.canPlayType(i).replace(/^no$/,"")&&t.push(n)}return t}}]);var i=n.prototype;return i.deactivate=function(){t.prototype.deactivate.call(this),this.reset()},i.reset=function(){this.au&&clearTimeout(this.au),this.Oe=null,this.au=null,this.do=!1,this.po=!1,this.cu=null,this.hu=0,this.au=null,this.uu=0,this.su=!1,this.bo=new mo(this,this.B),this.Ve=[]},i.endLive=function(){var n=this;this.do=!1,this.po=!0,clearTimeout(this.au),this.F.pause(),setTimeout((function(){t.prototype.deactivate.call(n),n.fire(Ki.ENDED)}),0)},i.fu=function(){var t=this,n=Ti(this.video.metadata.playlistRefreshUrl.split("?")[1]);n.expires&&(this.au=setTimeout((function(){t.lu()}),1e3*(n.expires-10)))},i.lu=function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=this.video.metadata.playlistRefreshUrl;return Tr(i).json().then((function(e){if(!("url"in e))throw new Error("Error parsing 'url' key from player live API refresh endpoint: ".concat(i," ").concat(e));return t.vu(e.url.hls).then((function(){return t.play(),t.du(5e3),null})).catch((function(){return t.lu(++n)}))})).catch((function(){if(n>=3)throw new Error("Manifest failed to load after ".concat(n," attempts."));return++n,t.lu(n)}))},i.pu=function(){var t=this;this.on(Zi.STREAM_OFFLINE,(function(){t.do=!1}))},i.mu=function(t){return this.pu(),this.do=!0,this.fire(Zi.STREAM_ONLINE),this.du(5e3),di.resolve(t)},i.vu=function(t){var n=this;return this.ou=t,/json=1/.test(t)?Tr(t).json().then((function(t){if(!("url"in t))throw new Error("Error parsing 'url' key from Live API manifest endpoint: ".concat(n.ou," ").concat(t));n.F.src=t.url,n.fu()})).catch((function(t){var i=n.video.metadata.playlistRefreshUrl;return Tr(i).json().then((function(t){if(!("url"in t))throw new Error("Error parsing 'url' key from player live API refresh endpoint: ".concat(i," ").concat(t));n.ou=t.url.ios,n.F.src=t.url.ios,n.fu()}))})):(this.F.src=t,this.fu(),di.resolve())},i.yu=function(){var t=this.F.textTracks;if(null==t?void 0:t.length)for(var n=0;n<t.length;n++){var i=t[n];this.Co(i)}},i.Co=function(t){if(t&&!this.qo){var n=t.label,i=t.kind,e=t.language,r=t.id,o=new TelecineTextTrack({label:n,kind:i,language:e,id:r},this.q);this.q.textTracks=Ne([o]),this.ut(o,t),this.fire(Qi.TEXT_TRACKS_AVAILABLE),this.qo=t}},i.setModeForTrack=function(t,n){return this.qo&&this.qo.mode!==n&&(this.qo.mode=n),this},i.getActiveCuesForTrack=function(t){return this.qo&&"disabled"!==this.qo.mode?this.qo.activeCues:[]},i.addTextTrack=function(t){return this.qo||this.yu(),this.qo},i.du=function(t){var n=this;"number"==typeof ke.iOS&&ke.iOS<9||this.cu||(this.cu=setTimeout((function(){if(n.do){var t=new XMLHttpRequest;t.onload=function(){410!==t.status?(200!==t.status&&n.fire(Zi.STREAM_OFFLINE),t.response.match(/^#EXTM3U\n#EXT-X-VERSION:3\n$/)&&n.fire(Zi.STREAM_OFFLINE)):n.lu()},t.onerror=function(){n.fire(Zi.STREAM_OFFLINE)},/json=1/.test(n.ou)?Tr(n.ou).json().then((function(i){"url"in i||n.fire(Zi.STREAM_OFFLINE),t.open("GET",i.url),t.send()})).catch((function(){t.open("GET",n.ou),t.send()})):(t.open("GET",n.ou),t.send())}}),t))},i.nu=function(t){return t>=this.liveEdgeTime-3},i.iu=function(t){return t>=this.liveEdgeTime-6},i.tu=function(t){return t<=this.liveTailTime+6},i.setVideoSrc=function(t){var n=this;this.Oe=this.mu(t).then((function(){return n.ou=t,n.vu(t)}))},i.ontimeupdate=function(){t.prototype.ontimeupdate.call(this),this.atLiveTail=this.tu(this.F.currentTime),this.nu(this.F.currentTime)?this.atLiveEdge=!0:(this.F.playbackRate<1||this.iu())&&(this.atLiveEdge=!1)},i.onplaying=function(){this.eo=!0},i.oncanplay=function(){if(!this.eo){var t=this.F.seekable.length;t>0&&(this.F.currentTime=this.F.seekable.end(t-1))}if(!this.su){this.su=!0;var n=this.F.getStartDate().getTime()/1e3;this.uu=n-this.liveEventStartTimeEpoch}this.yu()},i.onprogress=function(){this.cu&&(clearTimeout(this.cu),this.cu=null)},i.onstalled=function(){this.du(1e4)},i.onerror=function(){var n=this;return this.F.error.code===this.F.error.MEDIA_ERR_SRC_NOT_SUPPORTED?(Tr(this.ou).then((function(){t.prototype.onerror.call(n)})).catch((function(i){i instanceof ar?n.fire(Ki.ERROR,new TelecineError("MediaNetworkError","A network error ocurred while fetching the media.")):t.prototype.onerror.call(n)})),!1):t.prototype.onerror.call(this)},i.onwaiting=function(){this.du(1e4)},i.pause=function(){this.dvrEnabled&&(this.atLiveEdge=!1),t.prototype.pause.call(this)},i.play=function(){var n=this;return t.prototype.play.call(this,(function(){return n.Oe}))},U(n,[{key:"currentTime",get:function(){return this.uu+this.F.currentTime},set:function(t){if(this.liveEdgeTime){var n=t>=this.liveEdgeTime-3;this.atLiveEdge=n}this.F.currentTime=t-this.uu}},{key:"liveEdgeTime",get:function(){var t=this.F.seekable.length;return t>0?this.uu+this.F.seekable.end(t-1):0}},{key:"atLiveEdge",get:function(){return this.uo},set:function(t){this.dvrEnabled&&(this.uo=t,this.F.playbackRate>1&&t&&(this.F.playbackRate=1))}},{key:"atLiveTail",get:function(){return this.so},set:function(t){this.dvrEnabled&&(this.so=t,this.F.playbackRate<1&&t&&(this.F.playbackRate=1))}},{key:"liveTailTime",get:function(){return this.F.seekable.length>0?this.uu+this.F.seekable.start(0):0}},{key:"ended",get:function(){return this.po}},{key:"supportsPlaybackRate",get:function(){return t.prototype.supportsPlaybackRate&&this.dvrEnabled}}]),n}(nr),Lo=function(){function t(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.wu=t,this.V=t.V,this.B=n}U(t,null,[{key:"displayName",get:function(){return"Effect"}},{key:"supported",get:function(){return!1}},{key:"supportedScanners",get:function(){return[]}}]);var n=t.prototype;return n.activate=function(){throw new TelecineError("NotImplemented","The effect must implement the activate method.")},n.deactivate=function(){throw new TelecineError("NotImplemented","The effect must implement the deactivate method.")},t}(),Po=new re,Fo=new re,TelecineFile=function(){function TelecineFile(t,n){var i=t.src,e=t.mime,r=t.id,o=void 0===r?Ue():r,u=t.priority,s=void 0===u?0:u,a=t.metadata,c=void 0===a?{}:a;if(!i)throw new TypeError("Must provide a src for the file.");if(!e)throw new TypeError("Must provide a mime type for the file.");Object.defineProperties(this,{mime:{value:e,enumerable:!0},id:{value:"".concat(o),enumerable:!0},metadata:{value:c,enumerable:!0}}),this.video=n,this.priority=s,this.src=i}return U(TelecineFile,[{key:"priority",get:function(){return Po.get(this)},set:function(t){if(!("number"==typeof(t=parseInt(t,10))&&isFinite(t)&&Math.floor(t)===t&&t>=0))throw new TypeError("The file priority must be an integer greater than or equal to 0.");Po.set(this,t)}},{key:"src",get:function(){return Fo.get(this)},set:function(t){Fo.set(this,t),this.video.fire(Qi.FILE_SRC_UPDATE,this)}},{key:"restrictedStreamIndexes",get:function(){if(!Object.getOwnPropertyDescriptor(Object.getPrototypeOf(this.video.currentScanner),"restrictedStreamIndexes"))throw new ReferenceError("The current scanner does not support streams.");return this.video.currentScanner.restrictedStreamIndexes},set:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!Array.isArray(t))throw new TypeError("Indexes must be an array.");if(!Object.getOwnPropertyDescriptor(Object.getPrototypeOf(this.video.currentScanner),"restrictedStreamIndexes"))throw new ReferenceError("The current scanner does not support streams.");this.video.currentScanner.restrictedStreamIndexes=t}}]),TelecineFile}(),Ho=function(){function t(t,n){var i=t.enabled,e=void 0!==i&&i,r=t.id,o=void 0===r?Ue():r,u=t.kind,s=void 0===u?"":u,a=t.label,c=void 0===a?"":a,h=t.language,f=void 0===h?"":h;this.bu=e,ai(this),Object.defineProperties(this,{kind:{value:s,enumerable:!0},label:{value:c,enumerable:!0},language:{value:f,enumerable:!0},id:{value:"".concat(o),enumerable:!0}}),this.video=n}return t.prototype.dispatchEvent=function(t){this.fire(t,{target:this})},U(t,[{key:"enabled",get:function(){return this.bu},set:function(t){this.bu=t}},{key:"active",get:function(){return this.bu}}]),t}();function Vo(){return!!(window.MediaKeys&&window.navigator&&window.navigator.requestMediaKeySystemAccess&&window.MediaKeySystemAccess&&window.MediaKeySystemAccess.prototype.getConfiguration||window.WebKitMediaKeys)}function Bo(t,n,i){"string"==typeof n&&(n=function(t){for(var n=new ArrayBuffer(2*t.length),i=new Uint16Array(n),e=0,r=t.length;e<r;e++)i[e]=t.charCodeAt(e);return i}(n));var e=0,r=new ArrayBuffer(t.byteLength+4+n.byteLength+4+i.byteLength),o=new DataView(r);new Uint8Array(r,e,t.byteLength).set(t),e+=t.byteLength,o.setUint32(e,n.byteLength,!0),e+=4;var u=new Uint8Array(r,e,n.byteLength);return u.set(n),e+=u.byteLength,o.setUint32(e,i.byteLength,!0),e+=4,new Uint8Array(r,e,i.byteLength).set(i),new Uint8Array(r,0,r.byteLength)}function qo(t){for(var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=n?t.buffer:t,e=String.fromCharCode.apply(null,new Uint16Array(i)),r=(new DOMParser).parseFromString(e,"application/xml"),o={},u=r.getElementsByTagName("HttpHeader"),s=0;s<u.length;++s){var a=u[s].querySelector("name"),c=u[s].querySelector("value");o[a.textContent]=c.textContent}var h=r.querySelector("Challenge");return[o,t=xe(h.textContent)]}function Go(t,n,i,e){var r=e.audio||[],o=e.video||[],u=[{video:"HW_SECURE_ALL",audio:"SW_SECURE_CRYPTO"},{video:"HW_SECURE_DECODE",audio:"SW_SECURE_CRYPTO"},{video:"HW_SECURE_CRYPTO",audio:"SW_SECURE_CRYPTO"},{video:"SW_SECURE_DECODE",audio:"SW_SECURE_CRYPTO"},{video:"SW_SECURE_CRYPTO",audio:"SW_SECURE_CRYPTO"}].map((function(t){var n={persistentState:"optional",sessionTypes:["temporary"]};return o.length&&(n.videoCapabilities=o.map((function(n){return{contentType:n,robustness:t.video}}))),r.length&&(n.audioCapabilities=r.map((function(n){return{contentType:n,robustness:t.audio}}))),n})),s=Object.keys(t).map((function(e){var r=t[e].id;if(n||i){var o=null,s=n?window.WebKitMediaKeys:window.MSMediaKeys;try{o=new s(r)}catch(t){}return di.resolve({name:r,keySystem:o})}return navigator.requestMediaKeySystemAccess(r,u).then((function(t){return t.createMediaKeys()})).catch((function(t){})).then((function(t){return{name:r,keySystem:t}}))}));return di.all(s)}function Wo(t,n){var i={},e="".concat(window.screen.availWidth,"x").concat(window.screen.availHeight),r=window.devicePixelRatio;return i.merchant="vimeo",i.sessionId=JSON.stringify({ua:navigator.userAgent,token:t,resolution:e,pixelRatio:r}),i.userId=n,i}function Yo(t,n){var i=null;return Object.keys(t).forEach((function(e){n.name===t[e].id&&(i=t[e])})),i}var $o=function(){function t(t,n){this.gu=t.cdms,this.Eu=t.lr_token,this._u=t.user,this.ku=t.asset,this.Tu=n,this.Su=null,this.Au=null,this.Mu=null,this.Ou=null,this.Ru=this.Iu.bind(this)}var n=t.prototype;return n.init=function(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.F=t.F,this.he=t,Vo()?(this.Cu=Wo(this.Eu,this._u),Go(this.gu,this.Tu,!1,i).then((function(t){if(t.forEach((function(t){t.keySystem&&(n.Mu=t)})),!n.Mu)return n.he.fire(Qi.EME_UNSUPPORTED),!1;var i=Yo(n.gu,n.Mu);return n.Ou="encrypted",n.Su=i.license_url,n.Tu&&(n.Nu=i.certificate_url,n.Ou="webkitneedkey"),n.F.addEventListener(n.Ou,n.Ru),n.Tu?(n.F.webkitSetMediaKeys(n.Mu.keySystem),!0):n.F.mediaKeys?(n.Au=n.F.mediaKeys.createSession(),n.Au.addEventListener("message",(function(t){return n.ju(t)})),!0):(n.Au=n.Mu.keySystem.createSession(),n.Au.addEventListener("message",(function(t){return n.ju(t)})),n.F.setMediaKeys(n.Mu.keySystem),!0)}))):(this.he.fire(Qi.EME_UNSUPPORTED),!1)},n.destroy=function(){this.Au&&this.Au.sessionId&&this.Au.close(),this.F.removeEventListener(this.Ou,this.Ru)},n.Iu=function(t){var n=this;return"com.apple.fps.1_0"===this.Mu.name?(this.Du().then((function(i){n.Uu="assetId=".concat(n.ku);var e=Bo(t.initData,n.Uu,i);return n.Au=n.Mu.keySystem.createSession("video/mp4",e),n.Au.addEventListener("webkitkeymessage",(function(t){return n.ju(t)})),i})).catch((function(t){n.he.fire(t.error,t.payload)})),!0):!this.Au.sessionId&&!this.xu&&(this.xu=this.Au.generateRequest(t.initDataType,t.initData).catch((function(){n.he.fire(Qi.DRM_FAILURE)})),!0)},n.ju=function(t){var n=this;return new di((function(i,e){n.xu=null;var r=new XMLHttpRequest;r.keySession=t.target,r.responseType="arraybuffer",r.open("POST",n.Su),r.setRequestHeader("dt-custom-data",window.btoa(JSON.stringify(n.Cu)));var o=t.message;if("com.microsoft.playready"===n.Mu.name){var u=qo(t.message,!1),s=u[0];Object.keys(s).forEach((function(t){r.setRequestHeader([t],s[t])})),o=u[1]}if("com.apple.fps.1_0"===n.Mu.name){var a=btoa(String.fromCharCode.apply(null,o));a=encodeURIComponent(a),o="spc=".concat(a,"&").concat(n.Uu),r.setRequestHeader("Content-type","application/x-www-form-urlencoded")}r.onload=function(){if(403!==r.status)if(r.status>=400)e({error:Qi.DRM_FAILURE});else try{n.he.fire(Qi.DRM_AUTH_SUCCESS);var t=new Uint8Array(r.response),o=t.buffer;"com.apple.fps.1_0"===n.Mu.name&&(o=function(t){var n=window.atob(t.trim());return"<ckc>"===n.substr(0,5)&&"</ckc>"===n.substr(-6)&&(n=n.slice(5,-6)),new Uint8Array(atob(n).split("").map((function(t){return t.charCodeAt(0)})))}(btoa(String.fromCharCode.apply(null,t)))),r.keySession.update(o),i()}catch(t){e("Error updating key session: ".concat(t))}else{var u=JSON.parse(r.getResponseHeader("x-dt-error-message"));e({error:Qi.DRM_AUTH_FAILURE,payload:{text:u.error,code:u.error_code}})}},r.onerror=e,r.send(o)})).catch((function(t){n.he.fire(t.error,t.payload)}))},n.Du=function(){var t=this;return new di((function(n,i){var e=new XMLHttpRequest;e.responseType="arraybuffer",e.open("GET",t.Nu),e.setRequestHeader("dt-custom-data",window.btoa(JSON.stringify(t.Cu))),e.onload=function(){if(403!==e.status)if(e.status>=400)i({error:Qi.DRM_FAILURE});else try{n(new Uint8Array(e.response))}catch(t){i(t)}else{var t=JSON.parse(e.getResponseHeader("x-dt-error-message"));i({error:Qi.DRM_AUTH_FAILURE,payload:{text:t.error,code:t.error_code}})}},e.onerror=i,e.send()}))},t}(),Ko=function(){function t(){this.Lu={},this.Pu={},this.Fu={},this.Hu={},this.Vu={},this.Bu={},this.qu="default",this.Gu={KEYCHAIN_DEFAULT:"default",KEYCHAIN_SD_FALLBACK:"sd-fallback"}}var n=t.prototype;return n.getAllKeySessions=function(){return Object.values(this.Bu)||[]},n.getCdms=function(t){return this.Lu[t]},n.getAllPreferredKeySystems=function(){return this.Pu},n.addCdms=function(t,n){this.Lu[n]=t},n.addKeySession=function(t,n){this.Bu[n]=t},n.addLicenseTokenUrl=function(t,n){this.Fu[n]=t},n.addLicenseUrl=function(t,n){this.Hu[n]=t},n.addPreferedKeySystem=function(t,n){this.Pu[n]=t},n.closeAllKeySessions=function(){for(var t in this.Bu)this.Bu[t]&&this.Bu[t].sessionId&&this.Bu[t].close()},U(t,[{key:"state",get:function(){return this.qu},set:function(t){Object.values(this.Gu).indexOf(t)<0||(this.qu=t)}},{key:"activeKeySession",get:function(){return this.Bu[this.qu]}},{key:"activeKeySystem",get:function(){return this.Pu[this.qu]}},{key:"keyTypes",get:function(){return this.Gu}},{key:"activeLicenseTokenUrl",get:function(){return this.Fu[this.qu]}},{key:"activeLicenseUrl",get:function(){return this.Hu[this.qu]}}]),t}(),zo=function(){function t(t,n){this.Wu=!!t.fallback_asset,this.Tu=n,this.Yu=function(){return null},this.Gr=0,this.Ou=null,this.Ru=this.Iu.bind(this),this.$u=this.Ku.bind(this),this.zu=new Ko,this.Gu=this.zu.keyTypes,this.zu.state=this.Gu.KEYCHAIN_DEFAULT,this.zu.addCdms(t.cdms,this.Gu.KEYCHAIN_DEFAULT),this.Wu&&this.zu.addCdms(t.fallback_cdms,this.Gu.KEYCHAIN_SD_FALLBACK)}var n=t.prototype;return n.init=function(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.F=t.F,this.he=t,this.Ju=!!window.MSMediaKeys,Vo()||this.Ju?this.zu.state===this.Gu.KEYCHAIN_SD_FALLBACK?this.setUpKeySystem(i,e,this.Gu.KEYCHAIN_SD_FALLBACK).then((function(){n.he.currentTime=n.Gr,n.he.play()})):this.setUpKeySystem(i,e).then((function(){return n.setUpKeySystem(i,e,n.Gu.KEYCHAIN_SD_FALLBACK)})):(this.he.fire(Qi.EME_UNSUPPORTED),di.reject())},n.setUpKeySystem=function(t,n){var i=this,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.Gu.KEYCHAIN_DEFAULT;return new di((function(r,o){var u=i.zu.getCdms(e);return u||o(),Go(u,i.Tu,i.Ju,t).then((function(t){i.zu.addPreferedKeySystem(t.find((function(t){return t.keySystem})),e);var r=i.zu.activeKeySystem&&Yo(u,i.zu.activeKeySystem);if(!r)throw i.he.fire(Qi.EME_UNSUPPORTED),new Error("No valid key system was found.");i.zu.addLicenseTokenUrl(r.license_url,e);var o=n&&n.inits&&n.inits[r.id];return o||i.Xu(r,e),i.Qu(e).then((function(){var t=i.zu.state===e;return o&&t&&i.Iu(o.cenc,e)}))})).then(r)}))},n.destroy=function(){this.zu&&this.zu.closeAllKeySessions(),this.F&&this.F.removeEventListener(this.Ou,this.Ru)},n.Zu=function(t){var n=this;return new di((function(i){n.zu.state=t,n.zu.activeKeySession.addEventListener("message",(function(t){return n.ju(t)})),i()}))},n.Xu=function(t,n){this.Ou="encrypted",this.zu.addLicenseUrl(t.license_url,n),this.Tu?(this.Nu=t.certificate_url,this.Ou="webkitneedkey"):this.Ju&&(this.Ou="msneedkey"),this.F.addEventListener(this.Ou,this.Ru)},n.Qu=function(t){var n=this;return new di((function(i){if(n.Ju){var e=function t(){n.F.msSetMediaKeys(n.zu.activeKeySystem.keySystem),n.F.removeEventListener("loadedmetadata",t),i()};n.F.readyState>=1?e():n.F.addEventListener("loadedmetadata",e)}else{if(n.Tu)n.F.webkitSetMediaKeys(n.zu.activeKeySystem.keySystem);else{var r=n.F.mediaKeys||n.zu.activeKeySystem.keySystem;n.zu.addKeySession(n.ts(r),t),t===n.zu.state&&n.zu.activeKeySession.addEventListener("message",(function(t){return n.ju(t)})),n.F.mediaKeys||n.F.setMediaKeys(n.zu.activeKeySystem.keySystem)}i()}}))},n.ts=function(t,n,i){var e=t.createSession(n,i);if(!e)throw new Error("Could not create key session");return e},n.Iu=function(t,n){var i=this;n=n||this.zu.state;var e=new Error("A decryption key error was encountered");return"com.apple.fps.1_0"===this.zu.activeKeySystem.name?(this.Du(this.Nu).then((function(r){i.Uu=function(t){var n=function(t){var n=new Uint16Array(t.buffer);return String.fromCharCode.apply(null,n)}(t),i=document.createElement("a");return i.href=n,i.hostname}(t.initData);var o=Bo(t.initData,i.Uu,r);return i.zu.addKeySession(i.ts(i.zu.activeKeySystem.keySystem,"video/mp4",o),n),i.zu.activeKeySession.contentId=i.Uu,i.zu.activeKeySession.addEventListener("webkitkeymessage",(function(t){return i.ju(t)})),i.zu.activeKeySession.addEventListener("webkitkeyerror",(function(t){throw e})),r})).catch((function(t){i.he.fire(t.error,t.payload)})),!0):"com.microsoft.playready"===this.zu.activeKeySystem.name?(this.zu.addKeySession(this.ts(this.F.msKeys,"video/mp4",t.initData),n),this.zu.activeKeySession.addEventListener("mskeymessage",(function(t){return i.ju(t)})),this.zu.activeKeySession.addEventListener("mskeyerror",(function(t){throw e})),!0):!this.zu.activeKeySession.sessionId&&!this.xu&&(this.zu.activeKeySession.addEventListener("keystatuseschange",this.$u),this.xu=this.zu.activeKeySession.generateRequest(t.initDataType,t.initData).catch((function(){i.he.fire(Qi.DRM_FAILURE)})),!0)},n.Ku=function(){var t=this,n=!1,i=se(this.zu.activeKeySession.keyStatuses.values());if(i.forEach((function(t,i){switch(t){case"expired":n=!0}})),i.every((function(t){return"output-restricted"===t}))){if(this.Wu)return this.Gr=this.he.currentTime,void this.Zu(this.Gu.KEYCHAIN_SD_FALLBACK).then((function(){t.Yu(),t.he.fire(Qi.DRM_KEY_SWITCH,t.Gu.KEYCHAIN_SD_FALLBACK)})).catch((function(n){t.he.fire(Qi.DRM_OUTPUT_RESTRICTED)}));this.he.fire(Qi.DRM_OUTPUT_RESTRICTED)}n&&this.zu.activeKeySession.close()},n.ju=function(t){var n=this;return this.ns(this.zu.activeLicenseTokenUrl).then((function(i){return new di((function(e,r){n.zu.addLicenseUrl(i,n.zu.state),n.xu=null;var o=new XMLHttpRequest;o.keySession=t.target,o.open("POST",n.zu.activeLicenseUrl),o.responseType="arraybuffer";var u=t.message;if("com.microsoft.playready"===n.zu.activeKeySystem.name){var s=qo(t.message),a=s[0];Object.keys(a).forEach((function(t){o.setRequestHeader(t,a[t])})),u=s[1]}"com.apple.fps.1_0"===n.zu.activeKeySystem.name&&(u=new Uint8Array(u),o.setRequestHeader("Content-type","application/octet-stream")),o.onload=function(){if(403!==o.status)if(o.status>=400)r(new TelecineError(Qi.DRM_FAILURE));else try{n.he.fire(Qi.DRM_AUTH_SUCCESS);var t=new Uint8Array(o.response);o.keySession.update(t),e()}catch(t){r(new TelecineError(Qi.DRM_FAILURE,"Error updating key session: ".concat(t)))}else r(new TelecineError(Qi.DRM_AUTH_FAILURE))},o.onerror=r,o.send(u)})).catch((function(t){n.he.fire(t.name,{text:t.message||"License request failed."})}))}))},n.ns=function(t){return new di((function(n,i){var e=new XMLHttpRequest;e.open("GET",t),e.onload=function(){if(e.status>=400)i(new TelecineError(Qi.DRM_FAILURE));else try{try{var t=JSON.parse(e.response),r=t.licenseAcquisitionUrl,o=t.token;if(!r&&!o)throw new Error;n("".concat(r,"?ExpressPlayToken=").concat(o))}catch(t){n(e.response)}}catch(t){i(new TelecineError(Qi.DRM_FAILURE,"Error retrieving License Acquisition URL (LA_URL): ".concat(t)))}},e.onerror=i,e.send()}))},n.Du=function(t){return new di((function(n,i){var e=new XMLHttpRequest;e.open("GET",t),e.responseType="arraybuffer",e.setRequestHeader("Pragma","Cache-Control: no-cache"),e.setRequestHeader("Cache-Control","max-age=0"),e.onload=function(){if(403!==e.status)if(e.status>=400)i({error:Qi.DRM_FAILURE});else try{n(new Uint8Array(e.response))}catch(t){i(t)}else i({error:Qi.DRM_AUTH_FAILURE})},e.onerror=i,e.send()}))},n.setFallbackCallback=function(t){this.Yu=function(){return t()}},U(t,[{key:"state",get:function(){return this.zu.state}},{key:"hasFallbackAssets",get:function(){return this.Wu}}]),t}(),Jo=new re,TelecineVideo=function(){function TelecineVideo(t){var n=this,i=t.files,e=t.id,r=void 0===e?Ue():e,o=t.title,u=void 0===o?null:o,s=t.subtitle,a=void 0===s?null:s,c=t.metadata,h=void 0===c?{}:c,f=t.textTracks,l=void 0===f?Ne():f,v=t.audioTracks,d=void 0===v?Ne():v,p=t.externalDisplayFiles,m=void 0===p?{}:p,y=t.chapters,w=void 0===y?[]:y,b=t.duration;if(!i||!Array.isArray(i))throw new TypeError("Must provide files for the video.");ai(this);var g=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.getFileById=Ce,t}(i.map((function(t){return t instanceof TelecineFile?(t.video=n,t):new TelecineFile(t,n)}))),E=Ne(l.map((function(t){return t instanceof TelecineTextTrack?(t.video=n,t):new TelecineTextTrack(t,n)})));this.es=d,Object.keys(m).forEach((function(t){!m[t]||m[t]instanceof TelecineFile||(m[t]=new TelecineFile(m[t],n))})),Object.defineProperties(this,{id:{value:"".concat(r),enumerable:!0},title:{value:u,enumerable:!0},subtitle:{value:a,enumerable:!0},metadata:{value:h,enumerable:!0},files:{value:g,enumerable:!0},textTracks:{value:E,enumerable:!0,writable:!0},chapters:{value:w,enumerable:!0},duration:{value:b,enumerable:!0},externalDisplayFiles:{value:m,enumerable:!0}}),h.drm&&(h.drm.fastly||"vimeo"===h.drm.system?this.rs=new zo(h.drm,h.useHls):this.rs=new $o(h.drm,h.useHls))}return TelecineVideo.prototype.deactivate=function(){var t=this;this.rs&&this.rs.destroy(),this.textTracks.forEach((function(n){return t.currentScanner.removeTextTrack(n)}))},U(TelecineVideo,[{key:"drmHandler",get:function(){return this.rs||null}},{key:"currentFile",get:function(){return this.currentScanner.currentFile},set:function(t){this.currentScanner.currentFile=t}},{key:"currentScanner",get:function(){return Jo.get(this)},set:function(t){var n=this;this.currentScanner&&this.currentScanner.constructor.supportsTextTracks&&this.textTracks.forEach((function(t){return n.currentScanner.removeTextTrack(t)})),t.constructor.supportsTextTracks&&this.textTracks.forEach((function(n){return t.addTextTrack(n)})),Jo.set(this,t)}},{key:"chapters",get:function(){return this.chapters}},{key:"audioTracks",get:function(){var t=this;return Ne((this.currentScanner.constructor.supportsVideoElementAudioTracks?se(this.currentScanner.audioTracks):this.es).map((function(n){return n instanceof Ho?(n.video=t,n):new Ho(n,t)})))}}]),TelecineVideo}(),Xo=function(){function t(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.wu=t,this.B=n,this.os=null,this.us=this.B.embedTime?this.B.embedTime:0,this.ss=!1,this.as=!1,this.cs=!1,this.playInitiated=!1,this.hs=!1,this.fs=250,ai(this),this.ls=this.vs.bind(this),this.ds=this.ps.bind(this),this.ms=this.ys.bind(this),this.ws=this.bs.bind(this),this.Es=this._s.bind(this),this.ks=this.Ts.bind(this),this.Ss(this.wu.on),this.B.noInterval||this.As()}var n=t.prototype;return n.destroy=function(){clearInterval(this.os),this.Ss(this.wu.off),this.vs()},n.Ss=function(t){t(Ki.PAUSE,this.ds),t(Ki.PLAYING,this.ls),t(Ki.SEEKING,this.ms),t(Ki.SEEKED,this.ws),t(Zi.STREAM_ONLINE,this.Es),t(Zi.STREAM_OFFLINE,this.ks)},n.ps=function(){this.userPlayState=!1},n.vs=function(){this.ss&&(this.ss=!1,this.fire(Qi.BUFFER_ENDED))},n.ys=function(){this.as=!0},n.bs=function(){this.as=!1},n._s=function(){this.hs=!0},n.Ts=function(){this.hs=!1},n.As=function(){clearInterval(this.os),this.os=setInterval(this.runIntervalCheck.bind(this),this.fs)},n.runIntervalCheck=function(){if(this.wu.video){var t=this.wu.video.currentScanner;if(t){var n=this.wu.isLive(),i=t.currentTime,e=this.fs/2/1e3;if(this.playInitiated&&(!this.as||n)&&(!this.wu.paused||this.userPlayState)&&!this.ss&&i<this.us+e){if(n&&!this.hs)return;for(var r=this.wu.buffered,o=0;o<r.length;o++)if(i>=r.start(o)&&i+.2<=r.end(o))return;if(i+e>=this.wu.duration)return;this.ss=!0,this.fire(Qi.BUFFER_STARTED)}(this.playInitiated&&this.ss&&i>this.us+e||n&&!this.hs&&this.ss)&&(this.ss=!1,this.fire(Qi.BUFFER_ENDED)),this.us=i}}},U(t,[{key:"userPlayState",get:function(){return this.cs},set:function(t){this.cs=t,t||this.vs()}}]),t}();function Qo(){var t,n;function i(){t.src?document.createElement("video").load():t.load()}function e(){if(!n)return di.reject();t.preload="";var i=t.play();return void 0===i&&(i=new di((function(n){t.addEventListener("playing",n)}))),i}function r(){n&&(n.resolve(),n=null)}function o(t){n&&(n.reject(t),n=null)}return{set video(n){t=n},get video(){return t},get active(){return!!n},start:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:di.resolve.bind(di);return n||(n=new bi),i(),t().then(e).then(r).catch(o),n},cancel:function(){n&&(n.reject(new TelecineError("PlayInterrupted","The play() request was interrupted by a call to pause()")),n=null)}}}var Zo=function(){function t(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.V=t,this.Ms=n,this.B=i,this.F=null,this.ot=Ne(),this.Os={},this.Rs=new nr(t),this.B.playRequest=new Qo,this.Is=[],this.Cs=[],this.Ns=null,this.et=!1,this.Ds=!1,ai(this)}var n=t.prototype;return n.supportsEffect=function(t){var n=this;return!!t.supported&&t.supportedScanners.some((function(t){return n.Us(n.Rs)===t.displayName}))},n.getEffectByName=function(t){var n=this,i=null;return this.Cs.forEach((function(e){t===n.xs(e)&&(i=e)})),i},n.activateEffect=function(t,n){var i=new t(this,n);return i.activate(),this.Cs.push(i),i},n.deactivateEffect=function(t){var n=this;return this.Cs.some((function(i,e){return i.constructor===t&&(i.deactivate(),n.Cs.splice(e,1),!0)}))},n.deactivateEffects=function(){var t=this;this.Cs.forEach((function(n){return t.deactivateEffect(n.constructor)}))},n.play=function(){if(!this.F||this.F.files.length<1)throw new TelecineError("NoFiles","There are no files to play.");this.Ls.playInitiated||(this.Ls.playInitiated=!0),this.Ls.userPlayState=!0;var t=this.Rs.play();return this.Os.paused=!1,t},n.pause=function(){if(!this.F||this.F.files.length<1)throw new TelecineError("NoFiles","There are no files to play.");return this.Ls.userPlayState=!1,this.Rs.pause(),this.Os.paused=!0,this},n.isLive=function(){return this.currentScannerName.includes("Live")},n.endLive=function(){this.Rs.endLive()},n.getBitrateAtTime=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"video";return"MediaSourceScanner"!==this.Us(this.Rs)&&"HLSLiveScanner"!==this.Us(this.Rs)||"audio"===n&&this.Rs.an[n].length<=1?0:this.Rs.getBitrateAtTime(t,n)},n.getCurrentStream=function(){var t,n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"video";return null==(t=(n=this.Rs).getCurrentStream)?void 0:t.call(n,i)},n.showExternalDisplayPicker=function(t){this.Rs.showExternalDisplayPicker(t)},n.requestPictureInPicture=function(){return this.Rs.requestPictureInPicture()},n.exitPictureInPicture=function(){return this.Rs.exitPictureInPicture()},n.addChapter=function(t,n){this.Rs.addChapter(t,n)},n.removeChapter=function(t){this.Rs.removeChapter(t)},n.addCuePoint=function(t,n){return this.Rs.addCuePoint(t,n)},n.removeCuePoint=function(t){return this.Rs.removeCuePoint(t)},n.removeAllCuePoints=function(){return this.Rs.removeAllCuePoints()},n.enableAudioTrack=function(t){return this.Rs.enableAudioTrack(t)},n.addVideoEventListeners=function(){return this.Rs.addVideoEventListeners()},n.removeVideoEventListeners=function(){return this.Rs.removeVideoEventListeners()},n.Ps=function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.textTrackSupport,e=void 0!==i&&i,r=this.F.files.sort((function(t,n){return t.priority-n.priority})),o=this.Ms,u=function(n){var i=r[n];for(var u in o){var s=o[u];if(s.supported&&(!e||s.supportsTextTracks)&&-1===t.Is.indexOf(t.Us(s))&&s.supportedVideoTypes.some((function(t){return i.mime===t})))return{v:s}}};for(var s in r){var a=u(s);if("object"===j(a))return a.v}return null},n.reactivate=function(){var t;(null==(t=this.Rs)?void 0:t.reactivate)&&this.Rs.reactivate(),this.play()},n.checkRebuffer=function(t,n){this.Ls&&(this.Ls.playInitiated=t,this.Ls.userPlayState=n,this.Ls.runIntervalCheck())},n.Fs=function(t,n){var i=this;if(this.Rs.constructor!==t||this.Rs.video!==n){var e=!this.isLive()&&this.Rs.ge;this.et?(this.Ns=this.Rs,this.Ns.et=!0,this.Ds||(this.Ns.takeSnapshot(),this.Ds=!0),this.Ns.deactivate()):this.Rs.deactivate();var r=new t(this.V,this.B);Object.keys(ee).forEach((function(t){var n=ee[t];r.on(n,(function(t){return i.Hs(n,t,r)}))})),this.Rs=r,n.currentScanner=r,this.Rs.video=n;for(var o=Object.keys(this.Os),u=0;u<o.length;u++){var s=o[u];"paused"!==s?("currentTime"!==s||e)&&(this.Rs[s]=this.Os[s]):!1===this.Os.paused&&this.Rs.play()}this.Rs.addChapters(n.chapters,n.duration),this.fire(Qi.SCANNER_CHANGE,this.Us(this.Rs)),this.Rs.on(["canplay","playing"],(function(){i.Ns&&(i.Ns.et=!1,i.Ns.removeSnapshot(),i.Ns=null,i.Ds=!1)}))}},n.Vs=function(){if(null!==this.F){var t=this.Ps({textTrackSupport:this.F.textTracks.length>0});t?this.Fs(t,this.F):this.pt("FilesNotPlayable","None of the files could be played in this browser.")}},n.Bs=function(){this.Rs.deactivate(),this.Rs=new nr(this.V)},n.Hs=function(t,n,i){if(i===this.Rs){switch(t){case Ki.ERROR:return void(n instanceof TelecineError&&this.fire(Ki.ERROR,n));case Qi.SCANNER_ERROR:this.pt("ScannerError","The current scanner can no longer be used because ".concat(n.reason)),this.Is.push(this.Us(this.Rs)),this.Vs([]);break;case Qi.FILE_ERROR:this.pt("FileError","The current file can no longer be used because ".concat(n.reason)),this.Rs.yt();break;case Qi.DOWNLOAD_ERROR:this.pt("DownloadError",n),this.Rs.yt();break;case Qi.EME_UNSUPPORTED:this.pt("DRMFailure",{text:null,code:"emeunsupported"});break;case Qi.DRM_FAILURE:case Qi.DRM_AUTH_FAILURE:this.pt("DRMFailure",{text:n.text,code:n.code});break;case Qi.DRM_OUTPUT_RESTRICTED:this.pt("DRMFailure",{text:null,code:"outputrestricted"});break;case Qi.DRM_AUTH_SUCCESS:this.fire(Qi.DRM_AUTH_SUCCESS);break;case Ki.TIME_UPDATE:this.Os.currentTime=this.Rs.currentTime;break;case Qi.MEDIA_URL_EXPIRED:this.pt("MediaUrlExpired",n);break;case Qi.MEDIA_URL_BAD_REQUEST:this.pt("MediaUrlBadRequest",n);break;case ie.BRAIN_ML_MODEL_ERR:this.pt("MimirError",n);break;case ie.BRAIN_ML_MODEL_NET_ERR:this.pt("MimirNetworkError",n);break;case ie.BRAIN_ML_MODEL_TIMEOUT:this.pt("MimirNetworkTimeout",n);break;case te.SPATIAL_UNSUPPORTED:this.getEffectByName("ThreeSixtyEffect").deactivate();break;case Ki.ENDED:var e=!this.B.dvrEnabled||this.atLiveEdge;this.Os.paused=e;break;case Ki.WAITING:this.fire(Ki.WAITING)}this.Cs.forEach((function(n){"function"==typeof n["on".concat(t)]&&n["on".concat(t)]()})),this.fire(t,n)}},n.pt=function(t,n){this.fire(Ki.ERROR,new TelecineError(t,n))},n.Us=function(t){return t instanceof nr?t.constructor.displayName:t.prototype.constructor.displayName},n.As=function(){var t=this;this.Ls&&this.Ls.destroy(),this.Ls=new Xo(this,this.B),this.Ls.on(Qi.BUFFER_STARTED,(function(){t.fire(Qi.BUFFER_STARTED)})),this.Ls.on(Qi.BUFFER_ENDED,(function(){t.fire(Qi.BUFFER_ENDED)}))},n.xs=function(t){return t instanceof Lo?t.constructor.displayName:t.prototype.constructor.displayName},n.setCaptionsShouldDisplay=function(t){"HLSLiveScanner"===this.Us(this.Rs)&&this.Rs.setCaptionsShouldDisplay(t)},n.setCaptionsShouldLoad=function(t){"HLSLiveScanner"===this.Us(this.Rs)&&this.Rs.setCaptionsShouldLoad(t)},U(t,[{key:"element",get:function(){return this.V}},{key:"videoElement",get:function(){return this.Rs.videoElement}},{key:"manifest",get:function(){return this.Rs.manifest||{video:[]}}},{key:"supportsSettingVolume",get:function(){return this.Ms.some((function(t){return t.supported&&t.supportsSettingVolume}))}},{key:"supportsPlaybackRate",get:function(){return this.Rs.supportsPlaybackRate}},{key:"supportsTextTracks",get:function(){return this.Ms.some((function(t){return t.supported&&t.supportsTextTracks}))}},{key:"supportsVideoElementAudioTracks",get:function(){return this.Rs.constructor.supportsVideoElementAudioTracks}},{key:"activeEffects",get:function(){return this.Cs}},{key:"latency",get:function(){return this.Rs.latency}},{key:"downloadSpeed",get:function(){return this.Rs.downloadSpeed||0}},{key:"pictureInPictureActive",get:function(){return this.Rs.pictureInPictureActive}},{key:"pictureInPictureEnabled",get:function(){return this.Rs.pictureInPictureEnabled}},{key:"isLowerProfileAvailable",get:function(){return this.Rs.isLowerProfileAvailable}},{key:"buffered",get:function(){return this.Rs.buffered}},{key:"bufferTarget",get:function(){return this.Rs.bufferTarget},set:function(t){this.Os.bufferTarget=t,this.Rs.bufferTarget=t}},{key:"presentationDelay",get:function(){return this.Rs.presentationDelay},set:function(t){this.Os.presentationDelay=t,this.Rs.presentationDelay=t}},{key:"lowLatencyMode",get:function(){return this.Rs.lowLatencyMode},set:function(t){this.Os.lowLatencyMode=t,this.Rs.lowLatencyMode=t}},{key:"manifestLoadDurations",get:function(){return this.Rs.manifestLoadDurations?this.Rs.manifestLoadDurations:[]}},{key:"successfulSegments",get:function(){return this.Rs.successfulSegments?this.Rs.successfulSegments:[]}},{key:"failedSegments",get:function(){return this.Rs.failedSegments?this.Rs.failedSegments:[]}},{key:"cuePoints",get:function(){return this.Rs.cuePoints}},{key:"currentChapterID",get:function(){if(this.Rs&&this.Rs.chaptersTrack&&this.Rs.chaptersTrack.activeCues.length){var t=this.Rs.chaptersTrack.activeCues;return t[t.length-1].id}return null}},{key:"chapters",get:function(){return this.Rs.chaptersTrack?this.Rs.chaptersTrack.cues:[]}},{key:"chaptersTrack",get:function(){return this.Rs.chaptersTrack}},{key:"currentFile",get:function(){return this.Rs.currentFile},set:function(t){if("string"==typeof t&&(t=this.gt.filter((function(n){return n.id===t}))[0]),!t)throw new TelecineError("FileNotValid","The file is not valid.");this.Rs.currentFile=t}},{key:"currentScannerName",get:function(){return this.Us(this.Rs)}},{key:"currentScanner",get:function(){return this.Rs}},{key:"currentTime",get:function(){return this.Rs.currentTime},set:function(t){this.Os.currentTime=t,this.Rs.currentTime=t}},{key:"liveEdgeTime",get:function(){var t=this.Rs.liveEdgeTime;return null==t?this.qs:(this.qs=t,t)}},{key:"atLiveEdge",get:function(){var t;return null!==(t=this.Rs.atLiveEdge)&&void 0!==t?t:this.isLive()}},{key:"liveTailTime",get:function(){var t=this.Rs.liveTailTime;return null==t?this.Gs:(this.Gs=t,t)}},{key:"atLiveTail",get:function(){var t;return null!==(t=this.Rs.atLiveTail)&&void 0!==t&&t}},{key:"duration",get:function(){return this.Rs.duration}},{key:"ended",get:function(){return this.Rs.ended}},{key:"externalDisplayAvailable",get:function(){return this.Rs.externalDisplayAvailable}},{key:"externalDisplayActive",get:function(){return this.Rs.externalDisplayActive}},{key:"loop",get:function(){return this.Rs.loop},set:function(t){this.Os.loop=t,this.Rs.loop=t}},{key:"muted",get:function(){return this.Rs.muted},set:function(t){this.Os.muted=!!t,this.Rs.muted=!!t}},{key:"playsinline",get:function(){return this.Rs.playsinline},set:function(t){this.Os.playsinline=!!t,this.Rs.playsinline=!!t}},{key:"paused",get:function(){return this.Rs.paused}},{key:"played",get:function(){return this.Rs.played}},{key:"seekable",get:function(){return this.Rs.seekable}},{key:"seeking",get:function(){return this.Rs.seeking}},{key:"defaultPlaybackRate",get:function(){return this.Rs.defaultPlaybackRate},set:function(t){this.Os.defaultPlaybackRate=t,this.Rs.defaultPlaybackRate=t}},{key:"playbackRate",get:function(){return this.Rs.playbackRate},set:function(t){this.Os.playbackRate=t,this.Rs.playbackRate=t}},{key:"preload",get:function(){return this.Rs.preload},set:function(t){this.Os.preload=t,this.Rs.preload=t}},{key:"autoPictureInPicture",get:function(){return this.Rs.autoPictureInPicture},set:function(t){this.Os.autoPictureInPicture=!!t,this.Rs.autoPictureInPicture=!!t}},{key:"disablePictureInPicture",get:function(){return this.Rs.disablePictureInPicture},set:function(t){this.Os.disablePictureInPicture=!!t,this.Rs.disablePictureInPicture=!!t}},{key:"video",get:function(){return this.F},set:function(t){this.F&&this.F.deactivate(),this.Is=[],this.As(),null===t?(this.F=null,this.Bs()):(this.F=new TelecineVideo(t),this.Vs())}},{key:"videoWidth",get:function(){return this.Rs.videoWidth}},{key:"videoHeight",get:function(){return this.Rs.videoHeight}},{key:"volume",get:function(){return this.Rs.volume},set:function(t){if(t<0||t>1)throw new TelecineError("IndexSizeError","Failed to set the 'volume' property: The volume provided (".concat(t,") is outside of the range [0, 1]."));this.Os.volume=t,this.Rs.volume=t}},{key:"videoElementAudioTracks",get:function(){return this.Rs.audioTracks}},{key:"brainDebug",get:function(){return this.Rs.brainDebug}}]),t}(),tu=function(t){function n(n){var i,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(i=t.call(this,n,e)||this).Ws=!1,i.F=i.wu.Rs.F,i}F(n,t),U(n,null,[{key:"displayName",get:function(){return"CanvasEffect"}},{key:"supported",get:function(){return!0}},{key:"supportedScanners",get:function(){return[nr,lo]}}]);var i=n.prototype;return i.activate=function(){this.Ws=!0,this.Ys=document.createElement("canvas"),this.Ys.className="vp-canvas-effect",this.Ys.style.cssText="\n            position: absolute;\n            top:0;\n            left:0;\n            bottom:0;\n            right:0;\n        ",this.$s=this.Ys.getContext("2d",{alpha:!1}),this.V.appendChild(this.Ys),this.Ks()},i.deactivate=function(){this.Ys&&this.V.removeChild(this.Ys),this.zs(),this.Ws=!1},i.Ks=function(){this.Js()},i.Js=function(){this.Xs=window.requestAnimationFrame(this.Qs.bind(this))},i.Qs=function(){var t=this.F,n=this.Ys;n.width=t.clientWidth,n.height=t.clientHeight;var i=Math.floor(this.Zs()),e=Math.floor(this.ta()),r=Math.floor((t.clientWidth-i)/2),o=Math.floor((t.clientHeight-e)/2);this.$s.fillStyle="#000",this.$s.fillRect(0,0,n.width,n.height),this.$s.drawImage(t,r,o,i,e),this.Js()},i.na=function(){return this.F.videoHeight/this.F.videoWidth},i.Zs=function(){return Math.min(this.F.clientHeight/this.na(),this.F.clientWidth)},i.ta=function(){return Math.min(this.F.clientWidth*this.na(),this.F.clientHeight)},i.zs=function(){this.Xs&&(window.cancelAnimationFrame(this.Xs),this.Xs=null)},n}(Lo),nu=function(){function t(){}return U(t,null,[{key:"Equirect",get:function(){return"equirectangular"}}]),t}(),iu=function(){function t(){}return U(t,null,[{key:"Mono",get:function(){return"mono"}},{key:"TopBottom",get:function(){return"top-bottom"}},{key:"LeftRight",get:function(){return"left-right"}}]),t}(),eu=function(){function t(t,n,i){switch(this.isStereo=n!==iu.Mono,this.ia=null,this.ea=null,t){case nu.Equirect:this.createEquirectProjection(i,n);break;default:this.createEquirectProjection(i,iu.Mono)}}var n=t.prototype;return n.createEquirectProjection=function(t,n){n!==iu.Mono?(this.ia=this.ra(t),this.ea=this.ra(t),this.ia.layers.set(1),this.ea.layers.set(2),n===iu.TopBottom&&(this.oa(this.ia.geometry,.5,.5),this.oa(this.ea.geometry,.5,0)),n===iu.LeftRight&&(this.oa(this.ia.geometry,.5,0,0),this.oa(this.ea.geometry,.5,.5,0))):this.ia=this.ra(t)},n.ra=function(n,i,e,r){var o=new THREE.SphereBufferGeometry(i||t.SPHERE_RADIUS,e||t.TESSELATION_WIDTH,r||t.TESSELATION_HEIGHT);o.scale(-1,1,1);var u=new THREE.MeshBasicMaterial({map:n});return new THREE.Mesh(o,u)},n.oa=function(t,n,i){for(var e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=0;r<t.attributes.uv.array.length;r+=2)t.attributes.uv.array[r+e]*=n,t.attributes.uv.array[r+e]+=i},U(t,[{key:"left",get:function(){return this.ia}},{key:"right",get:function(){return this.ea}}],[{key:"TESSELATION_WIDTH",get:function(){return 120}},{key:"TESSELATION_HEIGHT",get:function(){return 80}},{key:"SPHERE_RADIUS",get:function(){return 500}}]),t}(),ru=function(){function t(t){this.sa=t}var n=t.prototype;return n.hasVRHeadset=function(){var t=this;return ke.webvr?navigator.getVRDisplays().then((function(n){return n.length>0?(t.sa.vr.setDevice(n[0]),n[0]):null})):null},n.enter=function(){return this.sa.vr.getDevice()&&this.sa.vr.getDevice().requestPresent([{source:this.sa.domElement}])},n.exit=function(){return this.sa.vr.getDevice()&&this.sa.vr.getDevice().exitPresent()},U(t,[{key:"supported",get:function(){return ke.webvr}},{key:"device",get:function(){return this.sa&&this.sa.vr.getDevice()?this.sa.vr.getDevice():null}},{key:"isPresenting",get:function(){return!(!this.sa||!this.sa.vr.getDevice())&&this.sa.vr.getDevice().isPresenting}}]),t}(),ou=function(t){function n(n){var i,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(i=t.call(this,n,e)||this).Ws=!1,i.aa=null,i.ca=null,i.sa=null,i.isUserInteracting=!1,i.ha=0,i.fa=0,i._coordinates={lat:0,long:0},i.la={lat:0,long:0},i.va={lat:0,long:0},i.da=i.cameraProps,i.pa=0,i.ma=0,i.ya=0,i.F=i.wu.Rs.F,i.wa=null,i.ba={x:0,y:0},i.ga={lat:0,long:0},i.Ea={videoFps:i.B.fps,motionRenderSpeed:60},i._a=1e3/i.Ea.videoFps,i.ka=[],i.Ta=!1,i.Sa=!1,i.Aa=!1,i.Ma={up:!1,down:!1,left:!1,right:!1},i}F(n,t),U(n,[{key:"isUserInteracting",set:function(t){t!==this.Oa&&(this.Oa=t,t?this.B.isMobile||this.wu.fire(te.MOTION_START):this.B.isMobile||this.wu.fire(te.MOTION_END))},get:function(){return this.Oa}}],[{key:"displayName",get:function(){return"ThreeSixtyEffect"}},{key:"supported",get:function(){try{var t=document.createElement("canvas");return!!window.WebGLRenderingContext&&(t.getContext("webgl")||t.getContext("experimental-webgl"))}catch(t){return this.wu.Rs.fire(te.SPATIAL_UNSUPPORTED),!1}}},{key:"supportedScanners",get:function(){return[nr,lo]}}]),n.frustumSurfaceArea=function(t,n,i){var e=2*eu.SPHERE_RADIUS*2*Math.sin(Math.PI/180*(t/2));return e*(e*n/i)/(4*Math.PI*Math.pow(eu.SPHERE_RADIUS,2))};var i=n.prototype;return i.activate=function(){var t=this;return new di((function(n,i){if(window.THREE)n();else{var e=document.createElement("script");e.src=t.B.threeUrl,document.body.appendChild(e),e.onload=function(){n()}}})).then((function(){return t.Dt()}))},i.Dt=function(){var t=this;this.Ws=!0,this.aa=new THREE.PerspectiveCamera(this.B.fieldOfView,this.F.clientWidth/this.F.clientHeight,1,2*eu.SPHERE_RADIUS),this.aa.target=new THREE.Vector3(0,0,0),this.aa.layers.enable(1),this.Ra(this.B.directorTimeline),this.ca=new THREE.Scene,this.Ia=new THREE.VideoTexture(this.F),this.Ia.generateMipmaps=!1,this.Ia.minFilter=THREE.NearestFilter,this.Ia.maxFilter=THREE.NearestFilter,this.Ia.format=THREE.RGBFormat,this.Ca=new eu(this.B.projection,this.B.stereoMode,this.Ia),this.Ca.isStereo&&this.ca.add(this.Ca.right),this.ca.add(this.Ca.left),this.sa=new THREE.WebGLRenderer,this.sa.vr.enabled=!0,this.sa.setPixelRatio(window.devicePixelRatio),this.Na=document.createElement("div"),this.Na.appendChild(this.sa.domElement),this.V.appendChild(this.Na),this.ja(),this.wu.Rs.F.setAttribute("crossorigin","anonymous"),this.Ks(),this.wu.Rs.paused||this.Da(),this.Ua=new ru(this.sa),this.Ua.supported&&this.Ua.hasVRHeadset().then((function(n){setTimeout((function(){t.wu.fire(te.WEBVR_HARDWARE_AVAILABLE,t.Ua.device)}),100)})).catch((function(t){}))},i.toggleVR=function(){var t=this;if(this.Ua.isPresenting)this.Ua.exit().then((function(){t.adjustRenderSize()})).catch((function(t){}));else{if(this.wu.Rs.paused)return;this.Ua.enter().then((function(){t.adjustRenderSize()})).catch((function(t){}))}},i.onplay=function(){this.Ws&&(this.Da(),this.adjustRenderSize())},i.deactivate=function(){this.Na&&this.V.removeChild(this.Na),this.zs(),this.Ws=!1},i.snapToCenter=function(){var t=this;this.ka.forEach((function(t){return clearTimeout(t)}));var n=((this._coordinates.long>=180?360:0)-this._coordinates.long)/11,i=(0-this._coordinates.lat)/11;this.ya=0;for(var e=function(e){t.ka.push(setTimeout((function(){0===e&&(t.Ta=!0,t.B.isMobile||(t._a=1e3/t.Ea.motionRenderSpeed)),49===e&&(t.Ta=!1,t.B.isMobile||(t._a=1e3/t.Ea.videoFps)),t.xa(t._coordinates.lat+i/Math.pow(1.1,e),t._coordinates.long+n/Math.pow(1.1,e)),t.ga.lat=THREE.Math.radToDeg(t.ba.x)+t._coordinates.lat+i/Math.pow(1.1,e),t.ga.long=THREE.Math.radToDeg(t.ba.y)+t._coordinates.long+i/Math.pow(1.1,e)}),e*t._a))},r=0;r<50;r++)e(r)},i.isStereo=function(){return!!this.Ca&&this.Ca.isStereo},i.Ra=function(t){t&&t[0]&&void 0!==t[0].p&&"undefined"!==t[0].y&&this.xa(t[0].p,t[0].y)},i.xa=function(t,n){this.la.long=this._coordinates.long,this.la.lat=this._coordinates.lat,t%=360,this._coordinates.lat=Math.max(-85,Math.min(85,t)),n=(n%=360)>=0?n:360+n,this._coordinates.long=n},i.makeContact=function(t){this.isUserInteracting=!0,this.ka.forEach((function(t){return clearTimeout(t)})),this.Ta=!1,this.La={x:t.x,y:t.y},this.va.long=this._coordinates.long,this.va.lat=this._coordinates.lat,this.Pa={long:this._coordinates.long,lat:this._coordinates.lat},this.B.isMobile||(this._a=1e3/this.Ea.motionRenderSpeed)},i.move=function(t){this.ga.lat=THREE.Math.radToDeg(this.ba.x)+this.la.lat,this.ga.long=THREE.Math.radToDeg(this.ba.y)+this.la.long;var n=this.Pa.lat-.2*(this.La.y-t.y),i=.2*(this.La.x-t.x)+this.Pa.long;this.xa(n,i)},i.moveWheel=function(t){this.ga.lat=THREE.Math.radToDeg(this.ba.x)+this.la.lat,this.ga.long=THREE.Math.radToDeg(this.ba.y)+this.la.long;var n=this._coordinates.lat-.1*t.y,i=this._coordinates.long+.1*t.x;this.xa(n,i)},i.moveDevice=function(t,n,i,e){this.Aa=!0;var r=new THREE.Quaternion,o=window.orientation;null===o&&(o=this.F.clientWidth>this.F.clientHeight?90:0),t=t?THREE.Math.degToRad(t):0,n=n?THREE.Math.degToRad(n):0,i=i?THREE.Math.degToRad(i):0;var u=o?THREE.Math.degToRad(o):0,s=new THREE.Vector3(0,0,1),a=new THREE.Euler,c=new THREE.Quaternion,h=new THREE.Quaternion(-Math.sqrt(.5),0,0,Math.sqrt(.5));a.set(n,t,-i,"YXZ"),r.setFromEuler(a),r.multiply(h),r.multiply(c.setFromAxisAngle(s,-u)),this.ba=(new THREE.Euler).setFromQuaternion(r,"YXZ"),this.ya=this.ba.z,this.isUserInteracting||this.Ta||this.xa(THREE.Math.radToDeg(this.ba.x)-this.ga.lat,-THREE.Math.radToDeg(this.ba.y)+this.ga.long),this.Sa||(this.snapToCenter(),this.wu.fire(te.MOTION_START),this.Sa=!0)},i.releaseContact=function(t){if(this.ga.lat=THREE.Math.radToDeg(this.ba.x)-this._coordinates.lat,this.ga.long=THREE.Math.radToDeg(this.ba.y)+this._coordinates.long,this.isUserInteracting=!1,this.Pa&&!t){var n=Math.hypot(this._coordinates.long-this.Pa.long,this._coordinates.lat-this.Pa.lat);this.Fa(n)}},i.abandonMotion=function(){this.isUserInteracting=!1,this.Pa=null},i.keyPress=function(t){this.B.keyboardDisabled||(this.Ha()||(this.isUserInteracting=!0,this.ka&&this.ka.forEach((function(t){return clearTimeout(t)}))),this.Ma[t]||(this.Ma[t]=!0))},i.keyUp=function(t){this.Ma[t]=!1,this.Ha()||(this.isUserInteracting=!1,this.Fa(1/0))},i.Va=function(){var t=this;Object.keys(this.Ma).forEach((function(n){if(t.Ma[n])switch(n){case"up":t.xa(t._coordinates.lat+2,t._coordinates.long);break;case"down":t.xa(t._coordinates.lat-2,t._coordinates.long);break;case"left":t.xa(t._coordinates.lat,t._coordinates.long-2);break;case"right":t.xa(t._coordinates.lat,t._coordinates.long+2)}}))},i.Ha=function(){var t=this;return Object.keys(this.Ma).map((function(n){return t.Ma[n]})).some((function(t){return t}))},i.Fa=function(t){var n=this;t>=20&&function(){var i={long:n._coordinates.long-n.la.long,lat:n._coordinates.lat-n.la.lat};t===1/0&&(i.long/=2,i.lat/=2);for(var e=function(t){n.ka.push(setTimeout((function(){1===t&&(n.Ta=!0),49===t&&(n.Ta=!1,n._a=1e3/n.Ea.videoFps);var e=2/Math.pow(t,1.5);n.ga.lat=THREE.Math.radToDeg(n.ba.x)+n._coordinates.lat+i.lat,n.ga.long=THREE.Math.radToDeg(n.ba.y)+n._coordinates.long+i.long,n.xa(n._coordinates.lat+i.lat*e,n._coordinates.long+i.long*e)}),t*n._a))},r=1;r<50;r++)e(r)}()},i.onseeked=function(){this.Ws&&this.Ba()},i.onresize=function(){this.adjustRenderSize(),this.isUserInteracting=!1},i.Ba=function(){if(!this.isVRPresenting){this.pa=THREE.Math.degToRad(90+this._coordinates.lat),this.ma=THREE.Math.degToRad(this._coordinates.long),this.aa.position.set(Math.sin(this.pa)*Math.cos(this.ma),Math.cos(this.pa),Math.sin(this.pa)*Math.sin(this.ma)),this.aa.lookAt(this.aa.target),this.aa.rotation.z+=this.ya;var t=this.cameraProps;this.wu.fire(te.CAMERA_UPDATE,t),this.da.yaw===t.yaw&&this.da.pitch===t.pitch&&this.da.roll===t.roll&&this.da.fov===t.fov||(this.da=t,this.wu.fire(te.CAMERA_CHANGE,t))}this.sa.render(this.ca,this.aa)},i.adjustRenderSize=function(){if(this.isVRPresenting)this.aa.aspect=this.F.clientWidth/this.F.clientHeight,this.aa.updateProjectionMatrix(),this.sa.setSize(this.F.clientWidth,this.F.clientHeight);else{this.F.clientWidth>this.F.clientHeight?this.aa.aspect=Math.max(1,Math.min(2,this.F.clientWidth/this.F.clientHeight)):this.aa.aspect=Math.max(1/3,Math.min(3,this.F.clientWidth/this.F.clientHeight)),this.aa.updateProjectionMatrix();var t=Pe(this.F.clientWidth,this.F.clientHeight,this.aa.aspect,1);this.sa.setSize(t.width,t.height),this.Na.style.paddingTop="".concat(t.top,"px")}},i.Ks=function(){var t=this;this.sa.setAnimationLoop((function(){t.Ha()&&t.Va(),t.Ba()}))},i.zs=function(){this.sa.setAnimationLoop(null)},i.Da=function(){this.qa({backgroundColor:"#000",display:"block"})},i.ja=function(){this.qa({backgroundColor:"#000",display:"none"})},i.qa=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.backgroundColor,i=t.display;this.Na.style.cssText="position:absolute;left:0;top:0;margin-left:auto;margin-right:auto;padding:0;background:".concat(n,";width:100%;height:100%;text-align:center;display:").concat(i)},U(n,[{key:"currentCoordinates",get:function(){return this._coordinates},set:function(t){var n=Y(t,2),i=n[0],e=n[1];if(i>90||i<-90)throw new RangeError("Latitude should be a float between -90 and 90.");if(e<0||e>360)throw new RangeError("Longitude should be a float between 0 and 360.");this.xa(i,e),this.Ba()}},{key:"cameraProps",get:function(){return{yaw:this._coordinates.long,pitch:this._coordinates.lat,roll:this.roll,fov:this.fieldOfView}},set:function(t){t=P(P({},this.cameraProps),t),this.fieldOfView=t.fov,this.roll=t.roll,this.currentCoordinates=[t.pitch,t.yaw]}},{key:"roll",get:function(){return 180*this.ya/Math.PI},set:function(t){if(t<-180||t>180)throw new RangeError("Roll should be a float between -180 and 180.");this.ya=THREE.Math.degToRad(t)}},{key:"isVRPresenting",get:function(){return this.Ua&&this.Ua.isPresenting}},{key:"fieldOfView",get:function(){return this.aa?this.aa.fov:this.B.fieldOfView},set:function(t){this.aa.fov=t,this.aa.updateProjectionMatrix(),this.sa.render(this.ca,this.aa)}},{key:"hasVRHeadset",get:function(){return this.Ua&&!!this.Ua.device}}]),n}(Lo),uu=function(t){function n(n){var i,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(i=t.call(this,n,e)||this).connected=!1,i.Ga=null,i.Wa=null,i.Ya=null,i.$a=null,i.Ka=null,i}F(n,t),U(n,null,[{key:"displayName",get:function(){return"AmbisonicEffect"}},{key:"supported",get:function(){return void 0!==window.AudioContext}},{key:"supportedScanners",get:function(){return[nr,lo]}}]);var i=n.prototype;return i.activate=function(){var t=this;return this.Ga=new AudioContext,new di((function(n,i){if("undefined"==typeof ambisonics){var e=document.createElement("script");e.src=t.B.ambisonicsUrl,document.body.appendChild(e),e.onload=function(){return n()},e.onerror=function(){return i()}}else n()})).then((function(){return t.toggleAmbisonics()})).catch((function(){t.wu.Rs.fire(te.AMBISONIC_UNSUPPORTED)}))},i.deactivate=function(){this.za(!0)},i.toggleAmbisonics=function(){var t,n;(null!==(t=null==(n=this.wu.getCurrentStream("audio"))?void 0:n.ambisonic_order)&&void 0!==t?t:0)<1?this.za():this.Ja()},i.Ja=function(){var t,n;if(this.Ga){var i=null!==(t=null==(n=this.wu.getCurrentStream("audio"))?void 0:n.ambisonic_order)&&void 0!==t?t:0;if(!(this.connected||i<1)){var e=this.wu.Rs.F;this.Wa=this.Ga.createMediaElementSource(e),this.Ya=new ambisonics.sceneMirror(this.Ga,i),this.$a=new ambisonics.sceneRotator(this.Ga,i),this.Ka=new ambisonics.binDecoder(this.Ga,i),this.Wa.connect(this.Ya.in),this.Ya.out.connect(this.$a.in),this.$a.out.connect(this.Ka.in),this.Ka.out.connect(this.Ga.destination),this.Ya.mirror(1),this.connected=!0}}},i.za=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.Wa&&this.Wa.disconnect(),t&&this.Ga&&(this.Ga.close(),this.Ga=null),this.Wa=null,this.Ya=null,this.$a=null,this.Ka=null,this.connected=!1},i.updateRotation=function(t,n,i){this.$a&&(this.$a.yaw!==t||this.$a.pitch!==n||this.$a.roll!==i)&&(this.$a.yaw=t,this.$a.pitch=n,this.$a.roll=i,this.$a.updateRotMtx())},n}(Lo),su={h264:"video/mp4",hls:"application/vnd.apple.mpegurl",hlsLive:"application/x-mpegURL",dash:"application/vnd.vimeo.dash+json",dashMpd:"video/vnd.mpeg.dash.mpd",vp6:"video/x-flv",vp8:"video/webm",webm:"video/webm",hds:"application/f4m"},au={"application/vnd.apple.mpegurl":"hls","application/vnd.vimeo.dash+json":"dash","video/vnd.mpeg.dash.mpd":"dash","video/mp4":"progressive","video/webm":"progressive","video/x-flv":"progressive","application/x-mpegURL":"hlslive"};function cu(t){return"symbol"==j(t)||Lt(t)&&"[object Symbol]"==ht(t)}var hu=/^\s+|\s+$/g,fu=/^[-+]0x[0-9a-f]+$/i,lu=/^0b[01]+$/i,vu=/^0o[0-7]+$/i,du=parseInt;function pu(t){if("number"==typeof t)return t;if(cu(t))return NaN;if(ft(t)){var n="function"==typeof t.valueOf?t.valueOf():t;t=ft(n)?n+"":n}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(hu,"");var i=lu.test(t);return i||vu.test(t)?du(t.slice(2),i?2:8):fu.test(t)?NaN:+t}var mu=et?et.prototype:void 0,yu=mu?mu.toString:void 0;function wu(t){if("string"==typeof t)return t;if(qt(t))return function(t,n){for(var i=-1,e=null==t?0:t.length,r=Array(e);++i<e;)r[i]=n(t[i],i,t);return r}(t,wu)+"";if(cu(t))return yu?yu.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}function bu(t){return null==t?"":wu(t)}var gu=it.isFinite,Eu=Math.min,_u=function(t){var n=Math.round;return function(t,i){if(t=pu(t),(i=null==i?0:Eu(function(t){var n=function(t){return t?(t=pu(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}(t),i=n%1;return n==n?i?n-i:n:0}(i),292))&&gu(t)){var e=(bu(t)+"e").split("e");return+((e=(bu(n(e[0]+"e"+(+e[1]+i)))+"e").split("e"))[0]+"e"+(+e[1]-i))}return n(t)}}();function ku(t){return!isNaN(t)}function Tu(t){return _u(t,3)}var Su=0;function Au(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"b",n=++Su;return"".concat(t).concat(n)}Au(),Au();var Mu=Au(),Ou=Au(),Ru=Au(),Iu=Au(),Cu=Au(),Nu=Au(),ju=Au(),Du=Au(),Uu=Au(),xu=Au(),Lu=Au(),Pu=Au(),Fu=Au(),Hu=Au(),Vu=Au(),Bu=Au(),qu=Au(),Gu=Au(),Wu=Au(),Yu=Au(),$u=Object.freeze({__proto__:null,CONFIG_CHANGED:ju,TELECINE_READY:Du,TELECINE_VIDEO_INIT:Uu,PLAY_INITIATED:xu,QUALITY_CHANGED:Lu,FORCED_QUALITY:Pu,CUE_CHANGED:Fu,CAPTIONS_CHANGED:Hu,SPATIAL_PLAYBACK_TOGGLED:Vu,PICTURE_IN_PICTURE_AVAILABLE_SAFARI:Bu,HLS_QUALITY_CHANGED:qu,REQUEST_COMPLETE_LIVE_SUBTITLES:Gu,COMPLETE_LIVE_SUBTITLES_LOADED:Wu,COMPLETE_LIVE_SUBTITLES_ERROR:Yu}),Ku=Object.freeze({__proto__:null,EVENT_PENDING:"liveeventpending",EVENT_ACTIVE:"liveeventactive",EVENT_STARTING:"liveeventstarting",EVENT_STARTED:"liveeventstarted",EVENT_ENDED:"liveeventended",ARCHIVE_STARTED:"livearchivestarted",ARCHIVE_DONE:"livearchivedone",ARCHIVE_ERROR:"livearchiveerror",SETTINGS_UPDATED:"livesettingsupdated",LOW_LATENCY_FALLBACK:"lowlatencyfallback",LIVE_STATS_SUCCESS:"livestatssuccess",LIVE_STATS_FAILURE:"livestatsfailure"}),zu=(P(P(P(P(P(P(P(P(P({},Ki),Qi),Zi),Ku),te),Ji),ne),ie),$u),P(P({},Zi),Ku));function Ju(t){var n;return"done"===(null==t||null==(n=t.archive)?void 0:n.status)}function Xu(t){return"pending"===(null==t?void 0:t.status)}function Qu(t){return"started"===(null==t?void 0:t.status)}function Zu(t){return"ended"===(null==t?void 0:t.status)}function ts(t){return ns(t,"/playlist/refresh")}function ns(t,n){var i,e=null==(i=t.request.files.hls)?void 0:i.default_cdn,r=t.request,o=r.signature,u=r.timestamp,s=r.expires,a="https://".concat(t.player_url,"/live/").concat(t.video.id),c="?signature=".concat(o,"&time=").concat(u,"&expires=").concat(s,"&cdn=").concat(e);return"".concat(a).concat(n).concat(c)}var is=Object.prototype.hasOwnProperty;function es(t){if(null==t)return!0;if(dn(t)&&(qt(t)||"string"==typeof t||"function"==typeof t.splice||$t(t)||on(t)||Bt(t)))return!t.length;var n=Gn(t);if("[object Map]"==n||"[object Set]"==n)return!t.size;if(cn(t))return!vn(t).length;for(var i in t)if(is.call(t,i))return!1;return!0}function rs(t){var n=this,i={},e={get attributes(){return Object.assign({},n)},get previousAttributes(){return i},clear:function(){r();var t=n.attributes;for(var i in t)delete n[i]},set:function(t){for(var i in r(),t=si(t))n[i]=t[i]},clone:function(){return new rs(n.attributes)},toJSON:function(){return si(n.attributes)}};function r(){es(n.attributes)||(i=si(n.attributes))}return e.set(t),hi(n,e)}function os(t,n){var i=new rs(Yi(t,n)),e=!1;return fi(i,{reset:function(t){return i.clear(),function(t){e=!0,i.set(t),Yi(i,n)}(t),i},isNewVideo:function(){var t=i.previousAttributes;return!e||t.video.id!==i.video.id||t.video.version.current!==i.video.version.current||t.video.live_event&&!Ju(t.video.live_event)&&(!i.video.live_event||Ju(i.video.live_event))}})}var us=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ss=/^\w*$/;function as(t,n){if("function"!=typeof t||null!=n&&"function"!=typeof n)throw new TypeError("Expected a function");var i=function i(){var e=arguments,r=n?n.apply(this,e):e[0],o=i.cache;if(o.has(r))return o.get(r);var u=t.apply(this,e);return i.cache=o.set(r,u)||o,u};return i.cache=new(as.Cache||It),i}as.Cache=It;var cs=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,hs=/\\(\\)?/g,fs=function(t){var n=as((function(t){var n=[];return 46===t.charCodeAt(0)&&n.push(""),t.replace(cs,(function(t,i,e,r){n.push(e?r.replace(hs,"$1"):i||t)})),n}),(function(t){return 500===i.size&&i.clear(),t})),i=n.cache;return n}();function ls(t){if("string"==typeof t||cu(t))return t;var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}function vs(t,n,i){var e=null==t?void 0:function(t,n){for(var i=0,e=(n=function(t,n){return qt(t)?t:function(t,n){if(qt(t))return!1;var i=j(t);return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=t&&!cu(t))||ss.test(t)||!us.test(t)||null!=n&&t in Object(n)}(t,n)?[t]:fs(bu(t))}(n,t)).length;null!=t&&i<e;)t=t[ls(n[i++])];return i&&i==e?t:void 0}(t,n);return void 0===e?i:e}function ds(t){return t.quality||t.metadata.quality}function ps(t,n){t.embed.settings.audio_tracks||(n=null);var i=t.request.files,e=gs(i),r=As(t),o=t.request.cookie.quality||r||function(t){var n=gs(t.request.files),i=n.some(Ts);ke.mobileAndroid&&(i=!1);var e="720p";if(i){var r=n.map(ds);-1!==r.indexOf("1080p")&&-1===r.indexOf("720p")&&(e="1080p")}return t.request.cookie.hd||t.video.default_to_hd?e:"360p"}(t),u=function(t){var n=t.files,i=void 0===n?[]:n,e=t.preference,r=void 0===e?"360p":e,o=t.priorityOffset,u=void 0===o?0:o;(i=se(i)).sort(Os());var s=i.map(ds);if(r){-1===s.indexOf(r)&&(s.push(r),s.sort((function(t,n){return Ss(n)-Ss(t)})));var a=s.indexOf(r),c=s.splice(0,a);c.reverse(),s.push.apply(s,$(c))}return i.map((function(t){return{id:t.id,src:t.url,mime:t.mime,priority:s.indexOf(t.quality)+1+u,metadata:{profile:t.profile,cdn:t.cdn,origin:t.origin,quality:t.quality,fps:t.fps}}}))}({files:e,preference:o,priorityOffset:3});return i.hls&&(u=u.concat(ws(t,!1,n)),t.request.drm&&ke.browser.safari)||i.dash&&(u=u.concat(bs(t,!1,n))),u}function ms(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],e=t.url;if("avc_url"in t&&(e=t.avc_url),i)return e;var r=ke.hevc&&(!n||ke.spatialHEVC),o=ke.hdr&&ke.hevcMain10&&(!n||ke.spatialHEVC),u=ke.dolbyVision;return u&&"hevc_dvh1_url"in t?e=t.hevc_dvh1_url:o&&"hevc_hdr_url"in t?e=t.hevc_hdr_url:r&&"hevc_sdr_url"in t?e=t.hevc_sdr_url:ke.av1&&"av1_url"in t&&(e=t.av1_url),e}function ys(t){return t.fallback_url}function ws(t){var n,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=t.request.files,o=r.hls.default_cdn,u=t.request.drm,s=r.hls.cdns[o],a=null==s||null==(n=s.alternatives)?void 0:n[e],c=a||s,h=i?ys(c):ms(c,t.video.spatial,u);return{id:"hls-".concat(o,"-").concat(t.video.id),src:h,mime:su.hls,priority:3,metadata:{cdn:o,origin:r.hls.cdns[o].origin,quality:"sd"}}}function bs(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,e=t.request.files;return es(e.dash)?[]:Object.keys(e.dash.cdns).map((function(r){var o,u=e.dash.cdns[r],s=(null==u||null==(o=u.alternatives)?void 0:o[i])||u,a=n?ys(s):ms(s,t.video.spatial);return{id:"dash-".concat(r,"-").concat(t.video.id),src:a,mime:t.request.drm?su.dashMpd:su.dash,priority:r===e.dash.default_cdn?1:2,metadata:{cdn:r,origin:e.dash.cdns[r].origin,quality:"sd"}}}))}function gs(t){if(es(t.progressive))return[];var n=t.progressive;return"progressive_avc"in t&&(n=t.progressive_avc),n.filter(_s(n))}function Es(t){if("number"==typeof t)return t;var n=t.split("-");return 5===n.length?n[0]:parseInt(n[0],10)}function _s(t){var n=t.filter(ks).map(ds);return function(t){return-1===n.indexOf(ds(t))||ks(t)}}function ks(t){var n=t.fps;return"metadata"in t&&(n=t.metadata.fps),n>30}function Ts(t){return Ss(t)>=720}function Ss(t){return"string"!=typeof t&&(t=ds(t)),parseInt(t,10)}function As(t){var n=gs(t.request.files).map((function(t){return t.quality}));return Ms(t,t.embed.quality,n)}function Ms(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return t.embed.on_site||ke.android||ke.iOS||ke.windowsPhone||!n||i.length&&-1===i.indexOf(n)?null:n}function Os(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"desc";return function(n,i){var e=Ss(n),r=Rs(n),o=Ss(i),u=Rs(i);return"asc"===t?e-o||r-u:o-e||u-r}}function Rs(t){return"object"!==j(t)?0:"fps"in t?t.fps:"metadata"in t&&"fps"in t.metadata?t.metadata.fps:0}function Is(t){var n=t.video.live_event,i=t.request.files;if(!es(i.hls)){var e=i.hls.default_cdn,r=i.hls.cdns[e].json_url||function(t){var n,i,e,r=t.dvr,o=t.low_latency;return r?null==(i=t.playback_urls)?void 0:i["akamai-fmp4"].hls_noredirect:o?null==(e=t.playback_urls)?void 0:e["akamai-low-latency"].hls_noredirect:null==(n=t.playback)?void 0:n.hls_noredirect}(n),o=t.request.flags.live_dash?2:1;return{id:"hls-".concat(e,"-").concat(t.video.id),src:r,mime:su.hlsLive,priority:o,metadata:{cdn:e,origin:i.hls.cdns[e].origin,quality:"sd"}}}return null}function Cs(t,n){var i=[];if(n.video){var e=n.video.currentFile.mime;if(e===su.hlsLive)return n.manifest.video.map((function(t){return P(P({},t),{},{quality:"".concat(t.height,"p")})}));if([su.dash,su.dashMpd].includes(e)){var r,o=!!n.video.drmHandler,u=o&&"sd-fallback"===n.video.drmHandler.state;i=function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!t)return[];var e=t.streams;"streams_avc"in t&&(e=t.streams_avc);var r=n?ke.spatialHEVC&&ke.hevc:ke.hevc,o=n?ke.spatialHEVC&&ke.hdr:ke.hdr,u=ke.dolbyVision;return u&&"streams_hevc_dvh1"in t?e=t.streams_hevc_dvh1:o&&"streams_hevc_hdr"in t?e=t.streams_hevc_hdr:r&&"streams_hevc_sdr"in t?e=t.streams_hevc_sdr:ke.av1&&"streams_av1"in t&&(e=t.streams_av1),i&&"streams_fallback"in t&&(e=t.streams_fallback),e}(t.request.files.dash,t.video.spatial,u),!o&&(null==n||null==(r=n.currentScanner)?void 0:r.manifestLoaded)&&(i=function(t,n){var i=n.map((function(t){return t.id}));return t.filter((function(t){var n=Es(t.id);return i.includes(t.id)||i.includes(n)}))}(i,n.currentScanner.videoStreams))}else i=n.video.files.filter((function(t){return"progressive"===au[t.mime]}))}return i.filter(_s(i)).sort(Os())}function Ns(t){var n=ds(t),i={"1440p":"2K","2160p":"4K","2700p":"5K","3240p":"6K","3780p":"7K","4320p":"8K"};for(var e in i)n=n.replace(e,i[e]);return n}function js(t){return ke.spatialPlayback&&t.video.spatial?35:75}function Ds(t){return t.request.text_tracks.map((function(t){return{id:t.id,src:t.url,kind:t.kind,label:t.label,language:t.lang}}))}var Us={captureException:function(t){},captureMessage:function(t){},captureBreadcrumb:function(){}},xs=Us,Ls=function(t){xs=Object.assign({},Us,t)},Ps=function(t,n){return xs.captureException(t,n)},Fs=function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"backbone",e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"info";return xs.captureBreadcrumb(t,n,i,e)};function Hs(t,n,i){var e=!0===ke.iOS,r=t.embed.playsinline&&(ke.mobileAndroid||ke.iOS>=10||e),o=!1,u=!1,s=!1,a=!0,c="auto";function h(t){var n,e,r,o,u,s,a=t.embed;i.disablePictureInPicture=!(null===(n=null!==(e=a.pip)&&void 0!==e?e:null==(r=a.settings)?void 0:r.pip)||void 0===n||n),i.autoPictureInPicture=null===(o=null!==(u=a.auto_pip)&&void 0!==u?u:null==(s=a.settings)?void 0:s.auto_pip)||void 0===o||o}function f(t){if(!a&&i.buffered&&i.buffered.length>0){t=t||i.currentTime;var e=function(t,n){var i=t.length-1;if(t.length>1)for(var e=0,r=t.length;e<r;e++)if(t.start(e)<=n&&t.end(e)>=n){i=e;break}return i}(i.buffered,t),r=i.buffered.end(e),u=r/i.duration,c=i.duration;if(n.fire(Ki.PROGRESS,{loaded:r,duration:c,loadProgress:u}),s&&o&&r===i.duration)return void(o&&i.paused&&i.play().catch(Ps))}}function l(n){if("auto"!==n){var e=Cs(t,i).reverse().map((function(t){return t.quality})).indexOf(n);-1!==e&&(Fs("Switched to ".concat(n),{},"video"),i.video.currentFile.restrictedStreamIndexes=[e])}else i.video.currentFile.restrictedStreamIndexes=[]}function v(e){var r=Cs(t,i).map((function(t){return t.quality})),o=Ms(t,t.embed.quality,r);o&&n.fire(Pu,o),l(o||"auto")}return n.on(Uu,(function(){var n;i.playsinline=r,i.muted=t.embed.muted,i.lowLatencyMode=null==(n=t.video.live_event)?void 0:n.low_latency})),n.on(Ou,(function(){a=!0,i.paused||i.pause(),u=!1,o=!1,i.currentTime=0})),n.on(Ru,(function(){i.paused||i.pause(),i.video=null})),i.on(Ki.PLAY,(function(){a=!1,n.fire(Ki.PLAY,i.currentTime)})),i.on(Ki.PAUSE,(function(){o=!1,n.fire(Ki.PAUSE,i.currentTime,i.ended)})),i.on(Ki.PLAYING,(function(t){f()})),i.on(Ki.TIME_UPDATE,(function(){if(!a){var t=i.currentTime,e=i.liveEdgeTime,r=i.atLiveEdge,o=i.liveTailTime,u=i.atLiveTail,s=i.duration,c=i.playbackRate,h=t/s;n.fire(Ki.TIME_UPDATE,{currentTime:t,liveEdgeTime:e,atLiveEdge:r,liveTailTime:o,atLiveTail:u,duration:s,playbackRate:c,timeProgress:h})}})),i.on(Ki.ENDED,(function(t){i.loop?i.play().catch(Ps):(o=!1,n.fire(Ki.ENDED,t))})),i.on(Ki.LOADED_METADATA,(function(n){var e=i.duration;if(isFinite(e)&&e>0){if(e<t.video.duration-1||e>t.video.duration+1)return;t.video.duration=e}t.video.video_width=i.videoWidth,t.video.video_height=i.videoHeight})),i.on(Ki.DURATION_CHANGE,(function(n){var e=i.duration;isFinite(e)&&(t.video.duration>0&&(e<t.video.duration-1||e>t.video.duration+1)||(t.video.duration=e))})),i.on(Ki.PROGRESS,f),i.on(Qi.BUFFER_STARTED,(function(){s=!0})),i.on(Qi.BUFFER_ENDED,(function(){s=!1})),n.on(Mu,(function(n){i.isLive()&&0===i.liveEdgeTime||(n=function(t,n,i){return void 0===i&&(i=n,n=void 0),void 0!==i&&(i=(i=pu(i))==i?i:0),void 0!==n&&(n=(n=pu(n))==n?n:0),function(t,n,i){return t==t&&(void 0!==i&&(t=t<=i?t:i),void 0!==n&&(t=t>=n?t:n)),t}(pu(t),n,i)}(n,Tu(i.isLive()?i.liveTailTime:0),Tu(i.isLive()?i.liveEdgeTime:i.duration||t.video.duration)),i.currentTime=n)})),i.on(Ki.SEEKING,(function(){var t=i.currentTime,e=i.duration,r=t/e;n.fire(Ki.SEEKING,{currentTime:t,duration:e,timeProgress:r})})),i.on(Ki.SEEKED,(function(){f();var t=i.currentTime,e=i.duration,r=t/e;n.fire(Ki.SEEKED,{currentTime:t,duration:e,timeProgress:r})})),i.on(Qi.CURRENT_FILE_CHANGE,(function(e){Fs("Current file changed",{id:e.id,mime:e.mime,src:e.src,metadata:e.metadata},"video"),e.metadata.quality,[su.dash,su.dashMpd].includes(e.mime)&&v(),[su.hlsLive].includes(e.mime)?i.once(Qi.STREAMS_LOADED,(function(){v()})):function(i){var e=As(t);e&&n.fire(Pu,e)}()})),i.on(Ki.RESIZE,(function(){i.video.currentFile.mime===su.hls&&i.videoHeight&&n.fire(qu,{height:i.videoHeight})})),h(t),n.on(ju,(function(t,n){var i,e;(null==n||null==(i=n.embed.settings)?void 0:i.pip)!==(null==(e=t.embed.settings)?void 0:e.pip)&&h(t)})),{play:function(){return o=!0,u||(n.fire(xu),u=!0),i.play()},pause:function(){o=!1,i.pause()},get quality(){return c},set quality(e){!function(e){var r=i.video.currentFile.mime;if([su.dash,su.dashMpd,su.hlsLive].includes(r))l(e);else{var o=Cs(t,i).filter((function(t){return t.metadata.quality===e}));o.length>0&&(a=!0,i.video.currentFile=o[0])}c=e,n.fire(Lu,e)}(e)}}}function Vs(t,n,i){var e=null;ke.spatialPlayback&&(n.on(Uu,(function(){e&&(i.deactivateEffect(ou),e=null,n.fire(Vu,e));var r=t.video.spatial;r&&(t.request.drm||i.supportsEffect(ou)&&(e=i.activateEffect(ou,{threeUrl:t.request.urls.three_js,fps:t.video.fps,fieldOfView:r.fov,directorTimeline:r.director_timeline,projection:r.projection,stereoMode:r.stereo_mode,initialView:r.initial_view,isMobile:ke.android,dimensions:t.embed.on_site?{width:1080,height:540}:{width:640,height:360},keyboardDisabled:!t.embed.keyboard}),n.fire(Vu,e)))})),i.on(te.SPATIAL_UNSUPPORTED,(function(){e&&(i.deactivateEffect(ou),e=null,n.fire(Vu,e))})))}function Bs(t,n,i){var e=null;n.on(Uu,(function(){e&&(i.deactivateEffect(tu),e=null),t.video.canvas&&(t.request.drm||i.supportsEffect(tu)&&(e=i.activateEffect(tu)))}))}var qs=Gi((function(t,n,i){Bi(t,n,i)}));function Gs(t,n,i){return i?n?n(t):t:(t&&t.then||(t=di.resolve(t)),n?t.then(n):t)}function Ws(t,n){try{var i=t()}catch(t){return n(t)}return i&&i.then?i.then(void 0,n):i}var Ys=function(){function t(t,n,i,e){ai(this),this.Xa=new bi,this.Qa=si(t),this.Za=t.session_url||t.sessionUrl,this.tc=t.subtitleUrl,this.nc=n,this.ic=e,this.ec=i,this.rc=!1,this.oc=!1,this.uc=t.dvr,this.sc()}var n=t.prototype;return n.requestCompleteLiveSubtitles=function(){try{var t=this;return Ws((function(){return Gs(Tr({url:t.tc,retry:3,retryStatus:function(t){return[410].includes(t)||rr.retryStatus(t)},hooks:{beforeRetry:[t.ac.bind(t)]}}).json(),(function(t){if(!(null==t?void 0:t.url))throw new Error("No webvtt url was available to fetch");return Gs(Tr(t.url).text(),ko)}))}),(function(t){throw t}))}catch(t){return di.reject(t)}},n.ac=function(t,n){try{return Gs(this.cc(),(function(n){t.url=n}))}catch(t){return di.reject(t)}},n.cc=function(){try{var t=this;return Gs(Tr(t.ic).json(),(function(n){return t.tc=n.url,n.url}))}catch(t){return di.reject(t)}},n.disable=function(){this.oc=!0},n.forcePolling=function(){this.isForcePolling||(this.rc=!0,this.sc())},n.unforcePolling=function(){this.rc=!1},n.sc=function(){!1!==this.Qa.polling&&(this.Qa.id&&this.Xa.resolve(),this.hc()?this.fc():this.lc()&&this.vc())},n.lc=function(){var t;return!(Zu(this.Qa)&&"started"!==(null==(t=this.Qa.archive)?void 0:t.status)||!this.isForcePolling&&Qu(this.Qa))},n.hc=function(){return!this.Za||!(!Xu(this.Qa)||null!==this.Qa.id)},n.dc=function(){try{var t=this;return Gs(Tr(t.nc).json(),(function(n){return t.Za=n.url,n.url}))}catch(t){return di.reject(t)}},n.vc=function(){try{var t=this;if(t.oc)return;var n,i={};return ke.browser.ie&&(i={Pragma:"no-cache","Cache-Control":"no-cache"}),function(t,n){return t&&t.then?t.then(n):n()}(Ws((function(){return Gs(Tr({url:t.Za,retry:3,retryStatus:function(t){return[410].includes(t)||rr.retryStatus(t)},hooks:{beforeRetry:[t.qt.bind(t)]},headers:i}).json(),(function(t){n=t}))}),(function(){throw new Error("Hit max retries polling ".concat(t.Za))})),(function(i){if(t.uc&&(n.dvr=t.uc),n.status!==t.Qa.status){var e;if(Zu(n)&&"provision_expire"===n.terminate_reason)return t.Za=null,t.Qa.id=null,void setTimeout(t.sc.bind(t),5e3);var r=(x(e={},"active",zu.EVENT_ACTIVE),x(e,"pending",zu.EVENT_PENDING),x(e,"started",zu.EVENT_STARTED),x(e,"ended",zu.EVENT_ENDED),e)[n.status];try{t.fire(r,n)}catch(t){throw new Error("Error firing live event status change ".concat(t))}}if(n.archive&&(!t.Qa.archive||n.archive.status!==t.Qa.archive.status)){var o,u=(x(o={},"started",zu.ARCHIVE_STARTED),x(o,"done",zu.ARCHIVE_DONE),x(o,"error",zu.ARCHIVE_ERROR),o)[n.archive.status];t.fire(u,n)}t.Qa=qs(t.Qa,n),t.lc()&&setTimeout(t.vc.bind(t),5e3)}))}catch(t){return di.reject(t)}},n.qt=function(t,n){try{return Gs(this.dc(),(function(n){t.url=n}))}catch(t){return di.reject(t)}},n.fc=function(){try{var t=this;if(t.oc)return;return Gs(Tr(t.ec).json(),(function(n){var i=!1;return function(e,r){var o=function(){if(null!==n.ingest.session_id)return t.Xa.resolve(),t.Qa.id=n.ingest.session_id,Gs(t.dc(),(function(){t.vc(),i=!0}))}();return o&&o.then?o.then(r):r(o)}(0,(function(n){if(i)return n;setTimeout(t.fc.bind(t),5e3)}))}))}catch(t){return di.reject(t)}},U(t,[{key:"isForcePolling",get:function(){return this.rc}},{key:"liveEventIDReady",get:function(){return this.Xa}}]),t}();function $s(){}function Ks(t){return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];try{return di.resolve(t.apply(this,n))}catch(t){return di.reject(t)}}}function zs(t,n,i){var e,r,o,u=Ks((function(){return function(t,n){return t&&t.then?t.then($s):di.resolve()}({hive:function(){},kollective:function(){}}[t.video.ecdn.ecdn_provider]())})),s=!1,a=0,c=0;function h(){r&&(r.disable(),r=null)}function f(){i.endLive()}return n.on(ju,(function(){e&&!t.isNewVideo()||(e=!0,h(),t.video.live_event&&!Ju(t.video.live_event)&&(function(i){(r=new Ys(i,function(t){return ns(t,"/session/refresh")}(t),function(t){return"https://".concat(t.vimeo_url,"/live_event/status?clip_id=").concat(t.video.id)}(t),function(t){return ns(t,"/subtitle/refresh")}(t))).on(zu.EVENT_ENDED,f),Object.keys(zu).forEach((function(t){var i=zu[t];r.on(i,(function(t){n.fire(i,t)}))})),n.on(Gu,Ks((function(){return function(t){if(t&&t.then)return t.then($s)}(function(t,i){try{var e=function(){var t;return function(t,n,i){return t&&t.then||(t=di.resolve(t)),n?t.then(n):t}(null==(t=r)?void 0:t.requestCompleteLiveSubtitles(),(function(t){n.fire(Wu,t)}))}()}catch(t){return i()}return e&&e.then?e.then(void 0,i):e}(0,(function(t){n.fire(Yu)})))})))}(t.video.live_event),function(){a=0,c=0;var t=!1;i.once(Ki.PLAYING,(function(){return t=!0}));var e=Ei();clearInterval(o),o=setInterval((function(){i.paused||(a+=_i(e)/1e3),t&&s&&(c+=_i(e)/1e3),function(t){i.lowLatencyMode&&t>12&&i.latency>10&&s&&(n.fire(zu.LOW_LATENCY_FALLBACK,{msg:"Rebuffer ratio > 12% and latency > 10s, fallback to normal HLS w/ target latency of 12s."}),i.lowLatencyMode=!1,i.presentationDelay=12,i.bufferTarget=12)}(c/a*100),e=Ei()}),500)}()),t.video.ecdn&&u())})),n.on(Ru,(function(){h()})),i.on(zu.STREAM_ONLINE,(function(){r.isForcePolling&&r.unforcePolling()})),i.on(zu.STREAM_OFFLINE,(function(){r.isForcePolling||r.forcePolling()})),i.on(Qi.BUFFER_STARTED,(function(){s=!0})),i.on(Qi.BUFFER_ENDED,(function(){s=!1})),{get p2pReady(){}}}function Js(t,n,i){if(i)return n?n(t()):t();try{var e=di.resolve(t());return n?e.then(n):e}catch(t){return di.reject(t)}}function Xs(t,n){var i=t();return i&&i.then?i.then(n):n(i)}function Qs(t,n){try{var i=t()}catch(t){return n(t)}return i&&i.then?i.then(void 0,n):i}function Zs(t){return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];try{return di.resolve(t.apply(this,n))}catch(t){return di.reject(t)}}}function ta(t,n,i){var e,r,o,u,s=Zs((function(){return Qs((function(){return Js(m,(function(n){return n(i,t)}))}),(function(t){throw Ps(t),new Error("Failed to create Hive Module",t)}))})),a=Zs((function(){return Qs((function(){return Js(p,(function(t){return t(i)}))}),(function(t){return Ps(t),null}))})),c=Zs((function(){return Xs((function(){if(!r)return Js(a,(function(t){r=t}))}),(function(){var n;return null==(n=r)?void 0:n.setUp(t.video.ecdn)}))})),h=Zs((function(){return Qs((function(){return Xs((function(){if(!o)return Js(s,(function(t){o=t}))}),(function(){var t;return null==(t=o)?void 0:t.setUp(l)}))}),(function(t){var n;return null==(n=o)||n.stop(),null}))})),f=!1,l=!1,v=!1,d=null==(e=t.video.ecdn)?void 0:e.ecdn_provider;function p(){return yi("module/kollective.js")}function m(){return yi("module/hive.js")}function y(){try{r&&(r.destroy(),r=null),o&&(o.destroy(),o=null)}catch(t){}}return n.on(ju,(function(){var n;t.isNewVideo()&&(f=!1),!0!==t.preload||!1!==v||"kollective"!==d?f||("pending"!==(null==(n=t.video.live_event)?void 0:n.status)?(f=!0,y(),d&&(u={hive:h,kollective:c}[d]())):l=!0):v=!0})),n.on(Ru,y),{get p2pReady(){return u}}}function na(t,n,i){var e=null;function r(){i.deactivateEffect(uu),e=null}n.on(xu,(function(){var n;e&&r(),(null==(n=t.video.channel_layout)?void 0:n.startsWith("ambisonic"))&&i.supportsEffect(uu)&&(e=i.activateEffect(uu,{ambisonicsUrl:t.request.urls.ambisonics_js}))})),i.on(te.CAMERA_UPDATE,(function(t){var n=t.yaw,i=t.pitch,r=t.roll;e&&e.updateRotation(n,i,r)})),i.on(te.AMBISONIC_UNSUPPORTED,(function(){e&&r()})),i.on(Qi.STREAM_CHANGE,(function(){e&&e.toggleAmbisonics()}))}function ia(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!t||"null"===t||0===n.length)return{track:null};var i=t.split("."),e=Y(i,2),r=e[0],o=e[1],u=r.split(/[-_]/),s=Y(u,1),a=s[0],c=r!==a,h=n.filter((function(t){return c&&t.language===r||t.language===a})).sort((function(t,n){var i=2*(t.language===a&&t.kind===o)+2*(t.language===r)+1*(t.kind===o);return 2*(n.language===a&&n.kind===o)+2*(n.language===r)+1*(n.kind===o)-i}));return h.length>0?{track:h[0],exactMatch:h[0].language===r&&h[0].kind===o}:{track:null}}function ea(t){var n=t.split(/\n/g),i=[],e=[];return n.forEach((function(t){var n=t.match(/<[a-zA-Z]+ ?.*?>/g)||[],r=t.match(/<\/[a-zA-Z]+ ?.*?>/g)||[],o=e.map((function(t){return t.startTag}));e=[],(n=o.concat(n)).forEach((function(t){var n=Y(t.replace(/<|>/g,"").split(" "),1)[0],i=r.indexOf("</".concat(n,">"));-1!==i?r.splice(i,1):e.push({startTag:t,closeTag:"</".concat(n,">")})}));var u=e.map((function(t){return t.closeTag})).reverse().join(""),s=o.join(""),a="".concat(s).concat(t).concat(u);i.push(a)})),i.join("<br>")}function ra(t){return t?t.split(/\n/g).join(""):t}function oa(t,n,i,e){var r;function o(){return n.pictureInPictureActive?"showing":"hidden"}function u(){if(0!==n.video.textTracks.length){if(n.video.textTracks.forEach((function(t){t.on("cuechange",s),t.on("modechange",a)})),n.video.textTracks.language&&Y(n.video.textTracks.language.split(/[-_]/),1)[0]!=Y(n.video.textTracks.language.split(/[-_]/),1)[0]){var i="".concat(n.video.textTracks.language,".subtitles");if(ia(i,n.video.textTracks).track)return void t.fire(Iu,i)}t.fire(Cu)}else t.fire(Cu)}function s(n){for(var i,e=n.target,r=e.activeCues,o=[],u=0,s=r.length;u<s;u++)""!==r[u].text.replace(/^\s+|\s+$/gm,"")&&((i=document.createElement("span")).appendChild(r[u].getCueAsHTML()),o.push({html:ea(i.innerHTML),text:ra(r[u].text)}));t.fire(Fu,e,o)}function a(n){var e=n.target,r=i.querySelector("video");ke.iOS&&function(t){var n=[document.fullscreenElement,document.webkitFullscreenElement,document.webkitCurrentFullScreenElement,document.mozFullScreenElement,document.msFullscreenElement].find((function(t){return void 0!==t}));return void 0!==n?!!n:t.webkitDisplayingFullscreen}(r)&&"showing"===e.mode&&t.fire(Hu,e)}t.on(Uu,u),t.on(Iu,(function(i){if(!r||r.id!==i){var e=n.video.textTracks.getTrackById(i),u=!0;if(!e){var s=ia(i,n.video.textTracks);e=s.track,u=s.exactMatch}e!==r&&setTimeout((function(){n.video&&n.video.textTracks.forEach((function(t){t.mode=t===e?o():"disabled"})),t.fire(Hu,e,!u),r=e}),0)}})),t.on(Cu,(function(){setTimeout((function(){n.video&&n.video.textTracks.forEach((function(t){t.mode="disabled"})),t.fire(Fu),r&&(r=null,t.fire(Hu,null))}),0)})),t.on(Qi.TEXT_TRACKS_AVAILABLE,u),t.on([Ki.ENTER_PICTURE_IN_PICTURE,Ki.LEAVE_PICTURE_IN_PICTURE],(function(){!function(t){r&&r.mode!==t&&(r.mode=t)}(o())}))}var ua=["main","translation"];function sa(t,n){return se(t).map((function(t){return P(P({},t),{},{enabled:t.id===n})}))}function aa(t){return se(t).find((function(t){return t.enabled}))}function ca(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(null==t?void 0:t.length))return[];var i=n.language,e=n.kind,r=null==n?void 0:n.id;if(r)return sa(t,r);if(e&&i){var o=t.find((function(t){return t.language===i&&t.kind===e}));if(r=null==o?void 0:o.id)return sa(t,r)}if(i){var u=t.find((function(t){return t.language===i&&ua.includes(t.kind)}));if(r=null==u?void 0:u.id)return sa(t,r)}var s=t.find((function(t){return"main"===t.kind}));return sa(t,r=null==s?void 0:s.id)}function ha(t,n,i){var e,r,o,u,s,a;function c(){var n,i=t.video.live_event,r=null==i?void 0:i.dvr;if(Xu(i)||function(t){return"active"===(null==t?void 0:t.status)}(i)||Zu(i)&&!Ju(i))e.video=null;else if(!Qu(i)||!e.video||t.isNewVideo()){var o=function(t){return ca(t.request.audio_tracks,{language:t.request.cookie.audio_language,kind:t.request.cookie.audio_kind})}(t),u=null==(n=aa(o))?void 0:n.id,a=Qu(i)?function(t){var n=[],i=Is(t);i&&n.push(i);var e=function(t){var n,i=t.video.live_event,e=t.request.files;if(es(e.dash))return null;var r=e.dash.default_cdn,o=e.dash.cdns[r].url||(null==(n=i.playback)?void 0:n.dash_noredirect),u=t.request.flags.live_dash?2:1;return{id:"dash-".concat(r,"-").concat(t.video.id),src:o,mime:su.dashMpd,priority:u,metadata:{cdn:r,origin:e.dash.cdns[r].origin,quality:"sd"}}}(t);return e&&n.push(e),n}(t):ps(t,u),c=Ds(t);!e.video||t.isNewVideo()||s||r&&!Ju(i)?f({files:a,textTracks:c,audioTracks:o,switchingVideo:r,startTime:r&&e.currentTime}):h(a,c)}}function h(t,n){t.forEach((function(t){var n=e.video.files.getFileById(t.id);n&&n.src!==t.src&&(n.src=t.src)})),n.forEach((function(t){var n=e.video.textTracks.getTrackById(t.id);n&&n.src!==t.src&&(n.src=t.src)}))}function f(r){var s,c,h,f=r.files,l=r.textTracks,v=r.audioTracks,d=void 0===v?[]:v,p=r.switchingVideo,m=void 0!==p&&p,y=r.startTime,w=t.video.live_event,b=i.getBoundingClientRect(),g=Qu(w)?Is(t):function(t){var n=t.request.files;if(!es(n.hls)){var i=n.hls.default_cdn,e=n.hls.cdns[i],r=e.captions||e.url;return r?{src:r,mime:su.hls,metadata:{cdn:i,origin:e.origin,quality:"sd"}}:null}return null}(t);a||(a=(null==(h=e.played)?void 0:h.length)>0);var E=!e.paused||(null==(s=e.Ls)?void 0:s.ss);e.et=m,e.video={id:t.video.id,title:t.video.title,subtitle:"from ".concat(t.video.owner.name),files:f,textTracks:l,audioTracks:d,chapters:vs(t,"embed.chapters",[]),duration:t.video.duration,externalDisplayFiles:{AirPlay:g},metadata:{playlistRefreshUrl:ts(t),thumbnail:Si(t.video.thumbs.base,{w:"640"}),useHls:t.request.drm&&ke.browser.safari,drm:t.request.drm,p2pReady:t.video.ecdn&&(null!==(c=o.p2pReady)&&void 0!==c?c:u.p2pReady),percentShown:ou.frustumSurfaceArea(t.video.spatial.fov,b.width,b.height)}},m?e.checkRebuffer(a,E):n.fire(Uu),"number"==typeof y&&(e.currentTime=y)}return function(){var n,r,o,u;e=new Zo(i,[lo,No,xo,nr],{externalDisplays:[AirPlayExternalDisplay],mediaSourceScanner:{droppedFrameSwitchPercent:js(t)},tests:t.request.ab_tests,fileCodecs:t.request.file_codecs,bufferTarget:t.video.buffer_target,presentationDelay:t.video.presentation_delay,lowLatencyMode:null==(n=t.video.live_event)?void 0:n.low_latency,dvrEnabled:null==(r=t.video.live_event)?void 0:r.dvr,liveEventStartTime:null==(o=t.video.live_event)||null==(u=o.ingest)?void 0:u.start_time,sessionMetadata:{clipId:t.video.id,sessionId:t.request.session}})}(),Object.values(Ki).filter((function(t){return![Ki.TIME_UPDATE,Ki.PROGRESS,Ki.SUSPEND,Ki.ERROR].includes(t)})).forEach((function(t){e.on(t,(function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";Fs(t,n,"video event")}))})),e.on(Qi.STREAMS_LOADED,(function(n){n.video.forEach((function(n){var i=function(t,n){return n.find((function(n){return Es(n.id)===String(t)||Es(n.id)===Es(t)}))}(n.id,Cs(t,e));i?(n.profile=i.profile,n.quality=i.quality,n.fps=i.fps):(n.profile=null,n.quality="".concat(n.height,"p"),n.fps=n.framerate)}))})),e.on(Qi.STREAM_CHANGE,(function(t){var i=t.index,e=t.streams,r=t.metadata,o=e[i];Fs("Stream changed",o,"video"),n.fire(Qi.STREAM_CHANGE,o,i,e,r)})),e.on(Qi.STREAM_TARGET_CHANGE,(function(t){var i=t.index,e=t.streams,r=e[i];n.fire(Qi.STREAM_TARGET_CHANGE,r,i,e)})),e.on(Qi.DRM_KEY_SWITCH,(function(){if(t.request.drm.fallback_asset){var n=Ds(t);h(function(t){var n=t.request.files,i=[],e=t.request.drm&&ke.browser.safari;return(n.hls&&(ke.iPhone||ke.iPad)||e)&&(i=i.concat(ws(t,!0))),n.dash&&!e&&(i=i.concat(bs(t,!0))),i}(t),n)}})),function(t,n,i){i.forEach((function(i){t(i,(function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];n.apply(void 0,[i].concat(e))}))}))}(e.on,n.fire,[Ji.ACTIVATED,Ji.AVAILABLE,Ji.DEACTIVATED,Ji.UNAVAILABLE,Zi.STREAM_OFFLINE,Zi.STREAM_ONLINE,Zi.BUFFER_GAP_JUMP,Zi.BUFFER_GAP_JUMP_PREVENT,Zi.STALL_JUMP,Zi.LATENCY_UPDATED,ne.MEDIASESSION_PAUSE,ne.MEDIASESSION_PLAY,ne.MEDIASESSION_SEEK_BACKWARD,ne.MEDIASESSION_SEEK_FORWARD,Qi.AUDIO_TRACK_CHANGED,Qi.AV_DURATION_MISMATCH,Qi.BANDWIDTH,Qi.BUFFER_ENDED,Qi.BUFFER_OCCUPANCY,Qi.BUFFER_STARTED,Qi.CHAPTER_CUES_UPDATED,Qi.CUE_POINT,Qi.CURRENT_FILE_CHANGE,Qi.DOWNLOAD_END,Qi.DOWNLOAD_TIMEOUT,Qi.DRM_AUTH_SUCCESS,Qi.DRM_KEY_SWITCH,Qi.DROPPED_FRAMES,Qi.MANIFEST_LOADED,Qi.MANIFEST_TIMEOUT,Qi.QUOTA_EXCEEDED_ERROR,Qi.SCANNER_CHANGE,Qi.STREAM_CHANGE_START,Qi.STREAM_BUFFER_END,Qi.STREAM_BUFFER_START,Qi.AVAILABLE_STREAMS_CHANGED,Qi.MEDIA_CAPABILITY_STREAMS_UNSUPPORTED,Qi.TEXT_TRACKS_AVAILABLE,Qi.DROPPED_FRAME_PERCENT_EXCEEDED,Qi.LOAD_SEGMENT_FAILED,Qi.SEGMENT_CUES_LOADED,te.CAMERA_UPDATE,te.CAMERA_CHANGE,te.MOTION_END,te.MOTION_START,te.SPATIAL_UNSUPPORTED,te.WEBVR_ENTER,te.WEBVR_EXIT,te.WEBVR_HARDWARE_AVAILABLE,ie.BRAIN_ML_SWITCH_TO_SKYFIRE,ie.BRAIN_ML_MODEL_INPUTS,Ki.DURATION_CHANGE,Ki.ERROR,Ki.LOAD_START,Ki.LOADED_DATA,Ki.LOADED_METADATA,Ki.PLAYING,Ki.RATE_CHANGE,Ki.RESIZE,Ki.STALLED,Ki.VOLUME_CHANGE,Ki.WAITING,Ki.ENTER_PICTURE_IN_PICTURE,Ki.LEAVE_PICTURE_IN_PICTURE,Ki.WEBKIT_BEGIN_FULLSCREEN,Ki.WEBKIT_END_FULLSCREEN]),n.fire(Du),new oa(n,e,i,t),new Vs(t,n,e),new Bs(t,n,e),new na(t,n,e),o=new zs(t,n,e),r=new Hs(t,n,e),u=new ta(t,n,e),n.on(ju,c),n.on(Nu,(function(i){var r,o;if(null==(r=t.embed)||null==(o=r.settings)?void 0:o.audio_tracks)if(e.supportsVideoElementAudioTracks)e.enableAudioTrack(null==i?void 0:i.id);else{var u=ca(t.request.audio_tracks,i),s=aa(u);f({files:ps(t,null==s?void 0:s.id),textTracks:e.video.textTracks,audioTracks:u,switchingVideo:!0,startTime:e.currentTime}),n.fire(Qi.AUDIO_TRACK_CHANGED)}})),ke.browser.safari&&window.addEventListener("pageshow",(function(t){t.persisted&&(s=!0,c())})),li({telecine:e},r)}function fa(t,n,i){this.constructorName="BackboneError",this.message=t,this.name=n,this.source=i}fa.prototype=new Error;var la={embed:{},request:{cookie:{},files:{},flags:{},urls:{},text_tracks:[],file_codecs:{}},video:{owner:{},thumbs:{},version:{}},user:{}};function va(t,n){var i,e,r,o=ai(),u=null,s=new os(n,la);function a(t,n){return o.fire(ju,t,n),t}var c={play:function(){return e.play()},pause:function(){return e.pause()},get currentTime(){return r.currentTime>.1?Tu(r.currentTime):0},set currentTime(t){if(t=parseFloat(t),isNaN(t)||t<0)throw new fa("Seconds must be a positive number less than the duration of the video.","RangeError","setCurrentTime");o.fire(Mu,t)},get liveEdgeTime(){return r.liveEdgeTime},get atLiveEdge(){return r.atLiveEdge},get liveTailTime(){return r.liveTailTime},get atLiveTail(){return r.atLiveTail},get duration(){return Tu(s.video.duration)},get enabledTextTrack(){return u},loadVideo:function(t){var n=si(s);return s.reset(t),s=a(s,n),this},reactivate:function(){var t;return(null==(t=r)?void 0:t.reactivate)&&r.reactivate(),this},unload:function(){return o.fire(Ou),this},destroy:function(){return o.fire(Ru),this},on:function(t,n){return o.on(t,n),this},once:function(t,n){return o.once(t,n),this},off:function(t,n){return o.off(t,n),this},get events(){return o},hasTextTrack:function(t){var n,i,e=this.textTracks;if(ku(t))i=e.getTrackById(t);else{var r=t.split(".")[0];n=e.some((function(t){return t.language.toLowerCase()===r.toLowerCase()}))}return!(!i&&!n)},enableTextTrack:function(t){var n,i,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=this.textTracks;if(ku(t))u=s.getTrackById(t);else{var a=t.split("."),c=Y(a,2);n=c[0];var h=c[1];if(i=void 0===h?e:h,!this.hasTextTrack(t))throw new fa("There are no tracks for ".concat(n.toUpperCase(),"."),"InvalidTrackLanguageError","enableTextTrack");var f=i?"".concat(n,".").concat(i):n;u=ia(f,s).track}if(!u||i&&u.kind!==i)throw new fa("There are no ".concat(i," tracks for ").concat(n.toUpperCase(),"."),"InvalidTrackError","enableTextTrack");r.setCaptionsShouldDisplay(!0),o.fire(Iu,u.id)},disableTextTrack:function(){u=null,r.setCaptionsShouldDisplay(!1),o.fire(Cu)},enableAudioTrack:function(t){o.fire(Nu,t)},get qualities(){return function(t){var n,i=t.representations.map((function(n){var i=ds(n);return{id:i,label:Ns(n),active:t.quality===i}})),e=null==(n=t.video)?void 0:n.currentFile.mime;return[su.dash,su.dashMpd,su.hlsLive,su.hls].includes(e)&&i.unshift({id:"auto",label:"Auto",active:!t.quality||"auto"===t.quality}),i}(this)},get quality(){return e.quality},set quality(t){e.quality=t},get playbackRate(){return r?r.playbackRate:1},set playbackRate(t){r.playbackRate=t,r.defaultPlaybackRate=t},get textTracks(){return r.video?r.video.textTracks:[]},get representations(){return Cs(s,r)},get volume(){return r?r.volume:Tu(s.request.cookie.volume)},set volume(t){if(t=parseFloat(t),isNaN(t)||t<0||t>1)throw new fa("Volume should be a number between 0 and 1.","RangeError","setVolume");r.volume=t},get videoId(){return s.video.id},get videoWidth(){return r.videoWidth||s.video.width},get videoHeight(){return r.videoHeight||s.video.height},get readyState(){return r.videoElement.readyState},get telecine(){return r},get pictureInPictureEnabled(){var t=ke.spatialPlayback&&s.video.spatial,n=(ke.iOS>=17||ke.browser.safari)&&this.readyState<2;return n&&r.once(Ki.LOADED_DATA,(function(){return o.fire(Bu)})),!n&&!t&&r.pictureInPictureEnabled},get audioTracks(){var t,n;return(null==(t=r)||null==(n=t.video)?void 0:n.audioTracks)||[]},requestCompleteLiveSubtitles:function(){o.fire(Gu)},get hasAudio(){var t,n,i,e,o;return!!(null==(t=r)||null==(n=t.video)||null==(i=n.audioTracks)?void 0:i.length)||!!(null==(e=r.manifest)||null==(o=e.audio)?void 0:o.length)}};return s=a(s),e=new ha(s,o,t),r=e.telecine,i=Object.create(r),li(i,c)}var da={};function pa(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((null==(t=da.en)?void 0:t[n])&&(n=da.en[n]),Object.keys(i).forEach((function(t){n=n.replace(new RegExp("{".concat(t,"}"),"g"),i[t])})),n.match(/\{\w+}/))throw new Error("Missing token definition.");return n}function ma(t){return function(t){return/^(https?:)?\/\/(.+)\.(((vimeo(ws)?|vimeo-(enterprise|work))\.(com|dev|work))|(videoji|videoshipinurl)\.hk)(?=$|\/)/.test(t)}(t)?function(t){try{return new URL(t).origin}catch(t){}var n=document.createElement("a");return n.href=t,n.origin?n.origin:"".concat(n.protocol.replace(":",""),"://").concat(n.host)}(t):""}function ya(t,n,i){if(function(t){return/^(https?:)?\/\/(.+)\.((vimeo(ws)?|vimeo-(enterprise|work))\.(com|dev|work)|(videoji|videoshipinurl)\.hk)\/video\/\d+\/config(?=$|\?)/.test(t)}(n))return n;var e=function(t){if(function(t){return!isNaN(t)&&parseInt(Number(t),10)==t&&!isNaN(parseInt(t,10))}(t))return parseInt(t,10);var n=t.match(/(video|\.com|\.dev)\/(\d+)/);if(!n||n.length<3)throw new Error("Please provide a Vimeo URL with a valid clip id.");return parseInt(n[2],10)}(n),r=Ti(window.location.search),o=Ti("".concat(n).split("?")[1]),u=Object.assign(r,o,i);return Si("".concat(t,"/video/").concat(e,"/config"),u)}function wa(t,n){return-1!==se(n).indexOf(t)}!function(t){for(var n=this,i=function i(e){return e.length>=t.length?t.apply(n,e):function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return i([].concat($(e),n))}},e=arguments.length,r=new Array(e>1?e-1:0),o=1;o<e;o++)r[o-1]=arguments[o];i(r)}((function(t,n){return Object.keys(t).every((function(i){return t[i]===n[i]}))})),function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];n.reduce((function(t,n){return function(){return t(n.apply(void 0,arguments))}}))}((function(t){return t?se(t.parentNode.children).indexOf(t):-1}),(function(t,n){for(;(null==(i=t)?void 0:i.parentElement)&&!wa(t,n);){var i;t=t.parentElement}return wa(t,n)?t:null}));var ba=0;function ga(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"p",n=++ba;return"".concat(t).concat(n)}ga(),ga(),ga(),ga();var Ea,_a,ka,Ta,Sa=(ga(),ga(),ga(),ga(),ga(),ga(),ga(),ga(),ga(),ga(),ga(),ga(),ga(),ga(),ga(),ga(),ga(),ga(),ga(),ga(),ga(),ga(),ga(),ga(),ga(),ga(),ga(),ga(),ga(),ga(),ga(),ga(),ga(),ga(),ga(),ga(),ga(),ga(),ga(),ga(),ga(),ga(),ga(),{pc:ga(),mc:ga(),yc:ga(),wc:ga(),cr:ga(),bc:ga(),gc:ga(),Ec:ga(),_c:ga(),kc:ga(),Tc:ga(),Sc:ga(),Ac:ga(),Mc:ga(),Oc:ga(),Rc:ga(),Ic:ga(),Cc:ga(),Nc:ga(),jc:ga(),Dc:ga(),Uc:ga(),xc:ga(),Lc:ga(),Pc:ga(),Fc:ga(),Hc:ga(),Vc:ga(),Bc:ga(),qc:ga(),Gc:ga(),Wc:ga(),Yc:ga(),$c:ga(),Kc:ga(),zc:ga(),Jc:ga(),Xc:ga(),Qc:ga(),Zc:ga(),th:ga(),nh:ga(),ih:ga(),eh:ga(),rh:ga(),oh:ga(),uh:ga(),sh:ga(),ah:ga(),hh:ga(),fh:ga(),lh:ga(),vh:ga(),dh:ga(),ph:ga(),mh:ga(),yh:ga(),wh:ga(),bh:ga(),gh:ga(),Eh:ga(),_h:ga(),kh:ga(),Th:ga(),Sh:ga(),Ah:ga(),Mh:ga(),Oh:ga(),Rh:ga(),Ih:ga(),Ch:ga(),Nh:ga(),jh:ga(),Dh:ga(),Uh:ga(),xh:ga(),Lh:ga(),Ph:ga(),Fh:ga(),Hh:ga(),Vh:ga(),Bh:ga(),qh:ga(),Gh:ga(),Wh:ga(),Yh:ga(),$h:ga(),Kh:ga(),zh:ga(),Jh:ga(),Xh:ga(),Qh:ga(),Zh:ga(),tf:ga(),nf:ga(),if:ga(),ef:ga(),rf:ga(),uf:ga(),sf:ga(),af:ga(),cf:ga(),hf:ga(),ff:ga(),lf:ga(),vf:ga(),df:ga(),pf:ga(),mf:ga(),yf:ga(),_loadVideo:ga(),wf:ga(),bf:ga(),gf:ga(),Ef:ga(),_f:ga(),kf:ga(),Tf:ga(),Sf:ga(),Af:ga(),Mf:ga(),Of:ga(),Rf:ga(),If:ga(),Cf:ga(),Nf:ga(),jf:ga(),Df:ga(),Uf:ga(),xf:ga(),Ae:ga(),Lf:ga(),Pf:ga(),Ff:ga(),Hf:ga(),Vf:ga(),Bf:ga(),qf:ga(),Gf:ga(),Wf:ga(),Yf:ga(),$f:ga(),Kf:ga(),zf:ga(),Jf:ga(),Xf:ga(),Qf:ga(),Zf:ga(),tl:ga(),nl:ga(),il:ga(),el:ga(),rl:ga(),ol:ga(),ul:ga(),sl:ga(),al:ga(),cl:ga(),hl:ga(),fl:ga(),ll:ga(),vl:ga(),dl:ga(),pl:ga(),ml:ga(),yl:ga(),wl:ga(),bl:ga(),gl:ga()}),Aa=(ga(),ga(),ga(),ga(),7);x(Ea={},"one","000000"),x(Ea,"two","00adef"),x(Ea,"three","ffffff"),x(Ea,"four","000000"),x(_a={},"one","color_one"),x(_a,"two","color_two"),x(_a,"three","color_three"),x(_a,"four","color_four"),x(ka={},"one","colorOne"),x(ka,"two","colorTwo"),x(ka,"three","colorThree"),x(ka,"four","colorFour"),function(t){t.POPUP="popup",t.ON_SITE="onsite"}(Ta||(Ta={}));var Ma,Oa,Ra,Ia,Ca,Na,ja,Da,Ua,xa,La,Pa,Fa,Ha,Va,Ba,qa,Ga,Wa,Ya,$a,Ka,za,Ja,Xa,Qa,Za,tc,nc,ic,ec,rc,oc,uc,sc,ac,cc,hc,fc,lc=function(){return{id:"network",title:pa("Network error"),message:pa("A network hiccup interrupted playback. Please {linkStart}reload the player{linkEnd} and try again.",{linkStart:'<a href="javascript:window.location.reload()" rel="noopener">',linkEnd:"</a>"}),final:!0}},vc=Object.freeze({__proto__:null,BrowserNotSupported:function(){return{id:"not-supported",title:pa("Unsupported viewing environment"),message:pa("Your system is having trouble playing this video. For more information, see our {linkStart}Help Center{linkEnd}.",{linkStart:'<a href="https://help.vimeo.com/hc/en-us/articles/115015677227-Troubleshoot-player-error-messages" target="_blank" rel="noopener" aria-describedby="new-window">',linkEnd:"</a>"}),deferred:!0,final:!0}},DRMFailure:function(){return{id:"drm-failure",title:pa("Rights issue"),message:pa("Were having trouble authorizing playback for this video. "),final:!0}},FilesNotPlayable:function(){return{id:"not-supported",title:pa("Player error"),message:pa("The player is having trouble. Well have it back up and running as soon as possible."),deferred:!0,final:!0}},MediaSrcNotSupportedError:function(){return{id:"not-supported",final:!1}},MediaDecodeError:function(){return{id:"decode",final:!1}},MediaNetworkError:lc,MediaUnknownError:function(){return{id:"unknown",title:pa("Browser error"),message:pa("Were having trouble playing this video file. Please {linkStart}reload the player{linkEnd} and try again.",{linkStart:'<a href="javascript:window.location.reload()" rel="noopener">',linkEnd:"</a>"}),final:!0}},FileError:function(){return{id:"telecine-file-error",final:!1}},DownloadError:function(){return{id:"telecine-download-error",final:!1}},MediaUrlExpired:function(){return{id:"media-url-expired",title:pa("Playback error"),message:pa("Were having trouble playing this video. Please {linkStart}reload the player{linkEnd} and try again.",{linkStart:'<a href="javascript:window.location.reload()" rel="noopener">',linkEnd:"</a>"}),final:!1}},ScannerError:function(){return{id:"scanner-error",final:!1}},PlayerError:function(){return{id:"error",title:pa("Player error"),message:pa("The player is having trouble. Well have it back up and running as soon as possible."),modal:!0,final:!0}}});function dc(t){return"string"==typeof(t=t.replace("#",""))&&[3,4,6,8].includes(t.length)&&!isNaN(parseInt(t,16))}function pc(t){return Math.round(parseInt(t,16)/255*100)/100}function mc(t){var n=1;return 4===(t=t.replace("#","")).length&&(n=pc(t.slice(3)+t.slice(3)),t=t.slice(0,3)),8===t.length&&(n=pc(t.slice(6,8)),t=t.slice(0,6)),{hex:t,alpha:n}}function yc(t){var n=/rgba?\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})(,\s*([\d.]+))?\)/.exec(t);if(!n)throw new Error("Invalid rgb value");return{red:parseInt(n[1],10),green:parseInt(n[2],10),blue:parseInt(n[3],10),alpha:parseFloat(n[5])||1}}function wc(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];if(1===n.length&&n[0]instanceof wc){var e=n[0];return this.red=e.red,this.green=e.green,this.blue=e.blue,this.alpha=e.alpha,this.hue=e.hue,this.saturation=e.saturation,this.lightness=e.lightness,this}if(1===n.length){if("string"==typeof n[0]&&n[0].indexOf("rgb")>=0)return this.rgba=yc(n[0]),this;if(!dc("".concat(n[0])))throw new Error("Invalid hex value");var r=mc("".concat(n[0])),o=r.hex,u=r.alpha;return this.hex=o,this.alpha=u,this}if(3===n.length||4===n.length){for(var s=0;s<3;s++)if(isNaN(parseInt(n[s],10))||parseInt(n[s],10)<0||parseInt(n[s],10)>255)throw new Error("Invalid rgb value");if(n[3]&&parseFloat(n[3])<0||parseFloat(n[3])>1)throw new Error("Invalid alpha value");return this.rgba={red:n[0],green:n[1],blue:n[2],alpha:parseFloat(n[3])||1},this}throw new Error("Invalid color")}!function(t){t.VP_PLAYER_UI_OVERLAYS="vp-player-ui-overlays",t.VP_PLAYER_UI_CONTAINER="vp-player-ui-container",t.VP_VIDEO_WRAPPER="vp-video-wrapper",t.VP_OVERLAY_WRAPPER="vp-overlay-wrapper",t.VP_OVERLAY_LABELLEDBY="vp-overlay-labelledby",t.VP_CONTROLS="vp-controls",t.VP_CHAPTER_BUTTON="vp-chapter-button",t.VP_CAST_BUTTON="vp-cast-button",t.VP_PREFS="vp-prefs",t.VP_MENU_INFO="vp-menu-info",t.VP_INTERACTIVE_MARKER="vp-interactive-marker",t.VP_PROGRESS="vp-progress",t.VP_LIVE_STATUS="vp-live-status",t.VP_LIVE_STATUS_CIRCLE="vp-live-status-circle",t.VP_LIVE_VIEWER_COUNT="vp-live-viewer-count",t.VP_PIP_OVERLAY="vp-pip-overlay",t.VP_CAPTIONS="vp-captions",t.VP_MENU="vp-menu",t.VP_SPIN="vp-spin",t.VP_TOOLTIP="vp-tooltip",t.VP_SIDEDOCK="vp-sidedock",t.VP_BADGE="vp-badge",t.VP_TITLE="vp-title",t.VP_UNMUTE="vp-unmute",t.VP_CAPTIONS_LINE="vp-captions-line",t.COMPASS_WRAPPER="compass-wrapper",t.STEREOSCOPIC="stereoscopic",t.VOD_BUTTON="vod-button",t.VOD_ICON="vod-icon",t.CC="cc",t.AIRPLAY="airplay",t.ON="on",t.PIP="pip",t.VOLUME="volume",t.CUSTOM_LOGO="custom-logo",t.FULLSCREEN="fullscreen",t.LOGO="logo",t.CUEPOINT="cuepoint",t.THUMB_PREVIEW="thumb-preview",t.THUMB="thumb",t.COLLECTIONS_BUTTON="collections-button",t.COLLECTIONS_ICON="collections-icon",t.LIKE_BUTTON="like-button",t.LIKE_ICON="like-icon",t.WATCH_LATER_BUTTON="watch-later-button",t.WATCH_LATER_ICON="watch-later-icon",t.FILL="fill",t.PIP_ICON="pip-icon"}(Ma||(Ma={})),function(t){t.EXCLUDE_GLOBAL_BUTTON_STYLES="exclude-global-button-styles",t.ENTER_FULLSCREEN_ICON="enter-fullscreen-icon",t.EXIT_FULLSCREEN_ICON="exit-fullscreen-icon",t.TITLE_TAG="titleTag",t.BYLINE_TAG="bylineTag",t.LONER_TAG="lonerTag",t.CONTENT_AREA_BACKGROUND_CONTAINER="vp-content-area-background"}(Oa||(Oa={})),function(t){t.RIGHT_CONTENT_AREA="right-content-area"}(Ra||(Ra={})),function(t){t.TRANSCRIPT_LIST="transcript-list",t.TRANSCRIPT_CUE_PREFIX="transcript-cue",t.TRANSCRIPT_MENU="transcript-menu",t.TRANSCRIPT_VIEWER="transcript-viewer",t.TRANSCRIPT_CONTROL_BAR_BUTTON="transcript-control-bar-button"}(Ia||(Ia={})),function(t){t.QOE_SURVEY_TEXT="qoe-survey-text",t.REPLAY="replay",t.BROADCAST_OVER="broadcast-over"}(Ca||(Ca={})),function(t){t.TEXT_TRACK_ID_PREFIX="telecine-track-"}(Na||(Na={})),function(t){t.EMPTY="empty",t.SHARE="share",t.HELP="help",t.ERROR="error",t.APP_REDIRECT="app-redirect",t.PRIVATE_LOCKED="private-locked",t.WEBINAR_BLOCKED="webinar-blocked",t.WEBINAR_CONFIRMATION="webinar-confirmation",t.EMAIL_CAPTURE="email-capture",t.NOT_SUPPORTED="not-supported",t.INTERACTIVE="interactive"}(ja||(ja={})),ja.HELP,".".concat(Ma.VP_OVERLAY_WRAPPER),wc.prototype={get complement(){var t=this.clone();return t.rgb={red:255-this.red,green:255-this.green,blue:255-this.blue},t},get hex(){return wc.rgbToHex(this.red,this.green,this.blue)},get hexWithAlpha(){var t=("0"+Math.round(255*this.alpha).toString(16)).slice(-2);return wc.rgbToHex(this.red,this.green,this.blue)+t},set hex(t){return this.rgba=wc.hexToRgb(t),this},get hsl(){return"hsl("+this.hue+","+this.saturation+"%,"+Math.round(this.lightness)+"%)"},set hsl(t){this.hue=t.hue,this.saturation=t.saturation,this.lightness=t.lightness;var n=wc.hslToRgb(t.hue,t.saturation,t.lightness);return this.red=n.red,this.green=n.green,this.blue=n.blue,this.alpha=n.alpha,this},get luminance(){function t(t){return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}return.2126*t(this.red/255)+.7152*t(this.green/255)+.0722*t(this.blue/255)},get rgb(){return"rgb("+this.red+","+this.green+","+this.blue+")"},set rgb(t){return this.rgba=t,this},get rgba(){return"rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")"},set rgba(t){this.red=t.red,this.green=t.green,this.blue=t.blue,this.alpha=t.alpha||1;var n=wc.rgbToHsl(t.red,t.green,t.blue);return this.hue=n.hue,this.saturation=n.saturation,this.lightness=n.lightness,this},get yiq(){return(299*this.red+587*this.green+114*this.blue)/1e3},clone:function(){return new wc(this)},lighten:function(t,n,i){if(this.hsl={hue:this.hue,saturation:this.saturation,lightness:this.lightness+t},n&&i)for(var e=i.contrast(this).ratio;e<n&&(this.lighten(5),e=i.contrast(this).ratio,!(this.lightness>=100)););return this},darken:function(t,n,i){if(this.hsl={hue:this.hue,saturation:this.saturation,lightness:this.lightness-t},n&&i)for(var e=i.contrast(this).ratio;e<n&&(this.darken(5),e=i.contrast(this).ratio,!(this.lightness<=0)););return this},overlayOn:function(t){if(this.alpha>=1)return this;var n=this.clone();return n.rgba={red:n.red*this.alpha+t.red*t.alpha*(1-this.alpha),green:n.green*this.alpha+t.green*t.alpha*(1-this.alpha),blue:n.blue*this.alpha+t.blue*t.alpha*(1-this.alpha),alpha:n.alpha+t.alpha*(1-this.alpha)},n},contrast:function(t){var n=this.alpha;if(n>=1){t.alpha<1&&(t=t.overlayOn(this));var i=this.luminance+.05,e=t.luminance+.05,r=i/e;return e>i&&(r=1/r),{ratio:r=Math.round(10*r)/10,error:0,min:r,max:r}}var o=this.overlayOn(wc.white).contrast(t).ratio,u=this.overlayOn(wc.black).contrast(t).ratio,s=Math.max(o,u),a={red:Math.min(Math.max(0,(t.red-this.red*n)/(1-n)),255),green:Math.min(Math.max(0,(t.green-this.green*n)/(1-n)),255),blue:Math.min(Math.max(0,(t.blue-this.blue*n)/(1-n)),255)},c=this.clone();c.rgb=a;var h=this.overlayOn(c).contrast(t).ratio;return{ratio:Math.round((h+s)/2*10)/10,error:Math.round((s-h)/2*10)/10,min:h,max:s,closest:c,farthest:u===s?wc.white:wc.black}},wcagAACompliant:function(t){return this.contrast(t).ratio>=4.5},wcagAAACompliant:function(t){return this.contrast(t).ratio>=7},yiqContrastColor:function(){return this.yiq>=120?new wc(0,0,0):new wc(255,255,255)}},wc.hexToRgb=function(t){var n;return 3===(t=String(t)).length||4===t.length?(n=/^#?([A-Fa-f0-9])([A-Fa-f0-9])([A-Fa-f0-9])$/i.exec(t))&&(n[1]+=n[1],n[2]+=n[2],n[3]+=n[3]):n=/^#?([A-Fa-f0-9]{2})([A-Fa-f0-9]{2})([A-Fa-f0-9]{2})$/i.exec(t),n?{red:parseInt(n[1],16),green:parseInt(n[2],16),blue:parseInt(n[3],16),alpha:1}:null},wc.rgbToHex=function(t,n,i){return"#"+((1<<24)+(Math.round(t)<<16)+(Math.round(n)<<8)+Math.round(i)).toString(16).slice(1)},wc.rgbToHsl=function(t,n,i){t/=255,n/=255,i/=255;var e,r=Math.max(t,n,i),o=Math.min(t,n,i),u=(r+o)/2,s=u;if(r===o)return{hue:0,saturation:0,lightness:100*s};var a=r-o;return e=s>.5?a/(2-r-o):a/(r+o),r===t?u=(n-i)/a+(n<i?6:0):r===n?u=(i-t)/a+2:r===i&&(u=(t-n)/a+4),u/=6,{hue:Math.round(360*u),saturation:Math.round(100*e),lightness:Math.round(100*s)}},wc.hslToRgb=function(t,n,i){function e(t,n,i){return i<0&&(i+=1),i>1&&(i-=1),6*i<1?t+6*(n-t)*i:2*i<1?n:3*i<2?t+6*(2/3-i)*(n-t):t}if(t/=360,i/=100,0==(n/=100))return{red:Math.floor(255*i),green:Math.floor(255*i),blue:Math.floor(255*i)};var r=i<.5?i*(1+n):i+n-n*i,o=2*i-r;return{red:Math.floor(255*e(o,r,t+1/3)),green:Math.floor(255*e(o,r,t)),blue:Math.floor(255*e(o,r,t-1/3))}},wc.hslToHex=function(t,n,i){var e=wc.hslToRgb(t,n,i);return wc.rgbToHex(e.red,e.green,e.blue)},wc.white=new wc("fff"),wc.black=new wc("000"),function(t){t.ONE="--color-one",t.TWO="--color-two",t.THREE="--color-three",t.FOUR="--color-four",t.ONE_MONOCHROME="--color-one-monochrome",t.TWO_MONOCHROME="--color-two-monochrome",t.ONE_OPACITY_NINETY="--color-one-opacity-ninety",t.THREE_OPACITY_TWENTY="--color-three-opacity-twenty",t.ONE_MONOCHROME_OPACITY_TWENTY="--color-one-monochrome-opacity-twenty",t.TWO_MONOCHROME_OPACITY_TWENTY="--color-two-monochrome-opacity-twenty",t.ONE_MONOCHROME_OPACITY_SIXTY="--color-one-monochrome-opacity-sixty",t.ONE_MONOCHROME_OPACITY_TWENTY_EIGHTY="--color-one-monochrome-opacity-twenty-eighty",t.TWO_MONOCHROME_OPACITY_TWENTY_EIGHTY="--color-two-monochrome-opacity-twenty-eighty"}(Da||(Da={})),function(t){t[t.ZERO=0]="ZERO",t[t.TWENTY=.2]="TWENTY",t[t.TWENTY_FIVE=.25]="TWENTY_FIVE",t[t.FIFTY=.5]="FIFTY",t[t.SIXTY=.6]="SIXTY",t[t.SEVENTY_FIVE=.75]="SEVENTY_FIVE",t[t.EIGHTY=.8]="EIGHTY",t[t.NINETY=.9]="NINETY",t[t.ONE_HUNDRED=1]="ONE_HUNDRED"}(Ua||(Ua={})),function(t){t.LIGHT="light",t.DARK="dark"}(xa||(xa={})),function(t){t.CONNECTED="CONNECTED",t.CONNECTING="CONNECTING",t.NOT_CONNECTED="NOT_CONNECTED",t.NOT_SETUP="NOT_SETUP",t.NO_DEVICES_AVAILABLE="NO_DEVICES_AVAILABLE",t.SETUP_DONE="SETUP_DONE"}(La||(La={})),function(t){t.VimeoPlayer="VimeoPlayer",t.BackgroundPlayer="BackgroundPlayer",t.ChromelessPlayer="Chromeless"}(Pa||(Pa={})),function(t){t.INLINE="inline",t.PICTURE_IN_PICTURE="picture-in-picture"}(Fa||(Fa={})),function(t){t.NORMAL="normal",t.MINI="mini",t.TINY="tiny"}(Ha||(Ha={})),function(t){t[t.NONE=0]="NONE",t[t.LOADING=1]="LOADING",t[t.LOADED=2]="LOADED",t[t.ERROR=3]="ERROR"}(Va||(Va={})),function(t){t[t.HAVE_NOTHING=0]="HAVE_NOTHING",t[t.HAVE_METADATA=1]="HAVE_METADATA",t[t.HAVE_CURRENT_DATA=2]="HAVE_CURRENT_DATA",t[t.HAVE_FUTURE_DATA=3]="HAVE_FUTURE_DATA",t[t.HAVE_ENOUGH_DATA=4]="HAVE_ENOUGH_DATA"}(Ba||(Ba={})),function(t){t.FIELD_MARKERS="markers",t.FIELD_CLIP_ID="clip_id",t.FIELD_PROFILE_ID="profile_id",t.FIELD_PLAYER_SIZE="player_size",t.FIELD_DROPPED_FRAMES="dropped_frames",t.FIELD_TOTAL_FRAMES="total_frames",t.FIELD_BANDWIDTH="bandwidth",t.FIELD_STREAMS="streams",t.FIELD_FILES="files",t.FIELD_VIDEO_DIMS="video_dims",t.FIELD_MIN_BANDWIDTH="min_bandwidth",t.FIELD_MAX_BANDWIDTH="max_badwidth",t.FIELD_BUFFER_OCCUPANCY="buffer_occupancy",t.FIELD_LIVE_LATENCY="live_latency",t.FIELD_SCANNERS="scanner",t.FIELD_VR_HEADSET="vr_headset"}(qa||(qa={})),function(t){t.AUTO="auto"}(Ga||(Ga={})),function(t){t.PRIVACY_PUBLIC="anybody",t.PRIVACY_NOBODY="nobody",t.PRIVACY_FOLLOW="contacts",t.PRIVACY_PASSWORD="password",t.PRIVACY_USER="users",t.PRIVACY_PURGATORY="purgatory",t.PRIVACY_HIDE_FROM_VIMEO="disable",t.PRIVACY_PAYTOVIEW="ptv",t.PRIVACY_PAYTOVIEWEXTRA="ptv_extra",t.PRIVACY_UNLISTED="unlisted",t.PRIVACY_STOCK="stock"}(Wa||(Wa={})),function(t){t.MEDIA_SOURCE_SCANNER="MediaSourceScanner",t.HLS_LIVE_SCANNER="HLSLiveScanner"}(Ya||(Ya={})),function(t){t.PLAY="play",t.PAUSE="pause",t.REPLAY="replay",t.TRAILER="trailer"}($a||($a={})),function(t){t.FONT_SIZE="fontSize",t.FONT_FAMILY="fontFamily",t.FONT_OPACITY="fontOpacity",t.COLOR="color",t.EDGE_STYLE="edgeStyle"}(Ka||(Ka={})),function(t){t.BG_OPACITY="bgOpacity",t.BG_COLOR="bgColor"}(za||(za={})),function(t){t.WINDOW_OPACITY="windowOpacity",t.WINDOW_COLOR="windowColor"}(Ja||(Ja={})),function(t){t[t.FONT_SIZE=Ka.FONT_SIZE]="FONT_SIZE",t[t.FONT_FAMILY=Ka.FONT_FAMILY]="FONT_FAMILY",t[t.FONT_OPACITY=Ka.FONT_OPACITY]="FONT_OPACITY",t[t.COLOR=Ka.COLOR]="COLOR",t[t.EDGE_STYLE=Ka.EDGE_STYLE]="EDGE_STYLE",t[t.BG_OPACITY=za.BG_OPACITY]="BG_OPACITY",t[t.BG_COLOR=za.BG_COLOR]="BG_COLOR",t[t.WINDOW_OPACITY=Ja.WINDOW_OPACITY]="WINDOW_OPACITY",t[t.WINDOW_COLOR=Ja.WINDOW_COLOR]="WINDOW_COLOR"}(Xa||(Xa={})),function(t){t.CCMenu="c",t.PrefsMenu="h",t.Transcript="T"}(Qa||(Qa={})),function(t){t.SINGLE_VIDEO_VIEW_MANAGE="single_video_view_manage",t.SINGLE_VIDEO_VIEW_RECIPIENT="single_video_view_recipient",t.EMBEDDED_PAGE="embedded_page",t.CLIP_PAGE="clip_page"}(Za||(Za={})),function(t){t[t.CacheMiss=0]="CacheMiss",t[t.MidCacheHit=1]="MidCacheHit",t[t.EdgeCacheHit=2]="EdgeCacheHit"}(tc||(tc={}));var bc,gc,Ec;function _c(t){return t.video.ecdn?t.video.live_event?"vimeo-live-ecdn":"vimeo-vod-ecdn":es(t.embed.interactive)?t.request.flags.ott?"vimeo-ott-vod":t.video.webinar&&"ended"!==t.video.webinar.status?"vimeo-live-webinar":t.video.live_event?"vimeo-live":t.embed.context&&-1!==t.embed.context.indexOf("Stock")?"vimeo-stock-vod":t.video.vod?"vimeo-ondemand":"vimeo-vod":"vimeo-interactive-vod"}x(fc={},"vimeo-logo",{viewer:(nc={},x(nc,"unlisted","clipUrl"),x(nc,"password","clipUrl"),x(nc,"disable","vimeoUrl"),x(nc,"nobody","clipUrl"),x(nc,"anybody","clipUrl"),x(nc,"ptv","vodUrl"),x(nc,"privateMode","vimeoUrl"),nc),creator:(ic={},x(ic,"unlisted","svvManageUrl"),x(ic,"password","svvManageUrl"),x(ic,"disable","svvManageUrl"),x(ic,"nobody","svvManageUrl"),x(ic,"anybody","svvManageUrl"),x(ic,"ptv","vodVideoManageUrl"),x(ic,"privateMode","svvManageUrl"),ic)}),x(fc,"video-title",{viewer:(ec={},x(ec,"unlisted","svvRecipientUrl"),x(ec,"password","clipUrl"),x(ec,"disable","profileUrl"),x(ec,"nobody","svvManageUrl"),x(ec,"anybody","clipUrl"),x(ec,"ptv","vodUrl"),x(ec,"privateMode","vimeoUrl"),ec),creator:(rc={},x(rc,"unlisted","svvManageUrl"),x(rc,"password","svvManageUrl"),x(rc,"disable","svvManageUrl"),x(rc,"nobody","svvManageUrl"),x(rc,"anybody","svvManageUrl"),x(rc,"ptv","vodVideoManageUrl"),x(rc,"privateMode","svvManageUrl"),rc)}),x(fc,"video-portrait",{viewer:(oc={},x(oc,"unlisted","profileUrl"),x(oc,"password","profileUrl"),x(oc,"disable","profileUrl"),x(oc,"nobody","profileUrl"),x(oc,"anybody","profileUrl"),x(oc,"ptv","profileUrl"),x(oc,"privateMode","vimeoUrl"),oc),creator:(uc={},x(uc,"unlisted","profileUrl"),x(uc,"password","profileUrl"),x(uc,"disable","profileUrl"),x(uc,"nobody","profileUrl"),x(uc,"anybody","profileUrl"),x(uc,"ptv","vodVideoManageUrl"),x(uc,"privateMode","svvManageUrl"),uc)}),x(fc,"video-byline",{viewer:(sc={},x(sc,"unlisted","profileUrl"),x(sc,"password","profileUrl"),x(sc,"disable","profileUrl"),x(sc,"nobody","profileUrl"),x(sc,"anybody","profileUrl"),x(sc,"ptv","profileUrl"),x(sc,"privateMode","vimeoUrl"),sc),creator:(ac={},x(ac,"unlisted","profileUrl"),x(ac,"password","profileUrl"),x(ac,"disable","profileUrl"),x(ac,"nobody","profileUrl"),x(ac,"anybody","profileUrl"),x(ac,"ptv","vodVideoManageUrl"),x(ac,"privateMode","svvManageUrl"),ac)}),x(fc,"chapter-share-base",{viewer:(cc={},x(cc,"unlisted","svvRecipientUrl"),x(cc,"password","noDestination"),x(cc,"disable","noDestination"),x(cc,"nobody","noDestination"),x(cc,"anybody","clipUrl"),x(cc,"ptv","vodUrl"),x(cc,"privateMode","noDestination"),cc),creator:(hc={},x(hc,"unlisted","svvRecipientUrl"),x(hc,"password","noDestination"),x(hc,"disable","noDestination"),x(hc,"nobody","noDestination"),x(hc,"anybody","clipUrl"),x(hc,"ptv","vodUrl"),x(hc,"privateMode","noDestination"),hc)}),function(t){t.started="started",t.done="done",t.error="error"}(bc||(bc={})),function(t){t.pending="pending",t.active="active",t.started="started",t.ended="ended"}(gc||(gc={})),function(t){t.NOT_LOGGED_IN="not_logged_in",t.LOGGED_IN_STORAGE_ACCESS_REQUIRED="logged_in_storage_access_required",t.STORAGE_ACCESS_GRANTED_LOGIN_UNCONFIRMED="storage_access_granted_login_unconfirmed",t.ALL_ACCESS_ATTEMPTS_FAILED="all_access_attempts_failed"}(Ec||(Ec={}));var kc=!!window.newrelic&&"function"==typeof window.newrelic.addToTrace&&"function"==typeof window.newrelic.noticeError&&"function"==typeof window.newrelic.setErrorHandler&&"function"==typeof window.newrelic.setCustomAttribute,Tc=["chrome-extension:","moz-extension:"].includes(document.location.protocol),Sc=Date.now(),Ac=["NotAllowedError","AbortError","PlayInterrupted","Failed to load image","window.__withBuiltIn is not a function","window.__timeSinceLastTimeout is not a function","div:has(> iframe[id=","No cast extension found","Cast is not available on this browser."],Mc=function(t,n){var i;return!!(ke.appleMail||!n.request||Tc||Ac.some((function(n){var i,e;return(null==t||null==(i=t.message)?void 0:i.includes(n))||(null==t||null==(e=t.name)?void 0:e.includes(n))}))||(null==t||null==(i=t.message)?void 0:i.startsWith("ReportingObserver"))&&Math.random()>.01)},Oc=function(t,n){var i,e,r,o={environment:"dev"===t.request.build.js?"dev":"production",js_modules:!1,version_js:t.request.build.js,version_backend:t.request.build.backend,visibility_state:document.visibilityState,vimeo_session:t.request.session,locale:t.request.lang,product:_c(t),video_embed_permission:t.video.embed_permission,video_privacy:t.video.privacy,live_session_id:null==(i=t.video.live_event)?void 0:i.id,rawUserAgent:navigator.userAgent,background_mode:1===(null==(e=t.embed)||null==(r=e.settings)?void 0:r.background)?1:0,player_name:n};if(t.request.ab_tests)for(var u in t.request.ab_tests){var s=t.request.ab_tests[u];for(var a in o["".concat(u,"_test")]=1,o["".concat(u,"_group")]=s.group,s.data)o["".concat(u,"_data_").concat(a)]=s.data[a]}for(var c in t.user.logged_in&&(o.userId=t.user.id),o)newrelic.setCustomAttribute(c,o[c])},Rc=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(kc&&t){var i=Object.assign({},n,Ic());newrelic.noticeError(t,i)}};function Ic(){return{manually_captured:1,player_lifespan_seconds:Math.round((Date.now()-Sc)/1e3)}}var Cc,Nc=e((function(t,n){Object.defineProperty(n,"El",{value:!0}),n.Tracker=void 0;var i=function(){function t(){}return t.getAttributeTypeMap=function(){return t.attributeTypeMap},t.attributeTypeMap=[{name:"name",baseName:"name",type:"string"},{name:"version",baseName:"version",type:"string"}],t}();n.Tracker=i})),jc=new Uint8Array(16);function Dc(){if(!Cc&&!(Cc="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Cc(jc)}var Uc=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function xc(t){return"string"==typeof t&&Uc.test(t)}for(var Lc,Pc,Fc=[],Hc=0;Hc<256;++Hc)Fc.push((Hc+256).toString(16).slice(1));function Vc(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Fc[t[n+0]]+Fc[t[n+1]]+Fc[t[n+2]]+Fc[t[n+3]]+"-"+Fc[t[n+4]]+Fc[t[n+5]]+"-"+Fc[t[n+6]]+Fc[t[n+7]]+"-"+Fc[t[n+8]]+Fc[t[n+9]]+"-"+Fc[t[n+10]]+Fc[t[n+11]]+Fc[t[n+12]]+Fc[t[n+13]]+Fc[t[n+14]]+Fc[t[n+15]]}var Bc=0,qc=0;function Gc(t){if(!xc(t))throw TypeError("Invalid UUID");var n,i=new Uint8Array(16);return i[0]=(n=parseInt(t.slice(0,8),16))>>>24,i[1]=n>>>16&255,i[2]=n>>>8&255,i[3]=255&n,i[4]=(n=parseInt(t.slice(9,13),16))>>>8,i[5]=255&n,i[6]=(n=parseInt(t.slice(14,18),16))>>>8,i[7]=255&n,i[8]=(n=parseInt(t.slice(19,23),16))>>>8,i[9]=255&n,i[10]=(n=parseInt(t.slice(24,36),16))/1099511627776&255,i[11]=n/4294967296&255,i[12]=n>>>24&255,i[13]=n>>>16&255,i[14]=n>>>8&255,i[15]=255&n,i}function Wc(t,n,i){function e(t,e,r,o){var u;if("string"==typeof t&&(t=function(t){t=unescape(encodeURIComponent(t));for(var n=[],i=0;i<t.length;++i)n.push(t.charCodeAt(i));return n}(t)),"string"==typeof e&&(e=Gc(e)),16!==(null===(u=e)||void 0===u?void 0:u.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var s=new Uint8Array(16+t.length);if(s.set(e),s.set(t,e.length),(s=i(s))[6]=15&s[6]|n,s[8]=63&s[8]|128,r){o=o||0;for(var a=0;a<16;++a)r[o+a]=s[a];return r}return Vc(s)}try{e.name=t}catch(t){}return e.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",e.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",e}function Yc(t){return 14+(t+64>>>9<<4)+1}function $c(t,n){var i=(65535&t)+(65535&n);return(t>>16)+(n>>16)+(i>>16)<<16|65535&i}function Kc(t,n,i,e,r,o){return $c(function(t,n){return t<<n|t>>>32-n}($c($c(n,t),$c(e,o)),r),i)}function zc(t,n,i,e,r,o,u){return Kc(n&i|~n&e,t,n,r,o,u)}function Jc(t,n,i,e,r,o,u){return Kc(n&e|i&~e,t,n,r,o,u)}function Xc(t,n,i,e,r,o,u){return Kc(n^i^e,t,n,r,o,u)}function Qc(t,n,i,e,r,o,u){return Kc(i^(n|~e),t,n,r,o,u)}var Zc=Wc("v3",48,(function(t){if("string"==typeof t){var n=unescape(encodeURIComponent(t));t=new Uint8Array(n.length);for(var i=0;i<n.length;++i)t[i]=n.charCodeAt(i)}return function(t){for(var n=[],i=32*t.length,e=0;e<i;e+=8){var r=t[e>>5]>>>e%32&255,o=parseInt("0123456789abcdef".charAt(r>>>4&15)+"0123456789abcdef".charAt(15&r),16);n.push(o)}return n}(function(t,n){t[n>>5]|=128<<n%32,t[Yc(n)-1]=n;for(var i=1732584193,e=-271733879,r=-1732584194,o=271733878,u=0;u<t.length;u+=16){var s=i,a=e,c=r,h=o;i=zc(i,e,r,o,t[u],7,-680876936),o=zc(o,i,e,r,t[u+1],12,-389564586),r=zc(r,o,i,e,t[u+2],17,606105819),e=zc(e,r,o,i,t[u+3],22,-1044525330),i=zc(i,e,r,o,t[u+4],7,-176418897),o=zc(o,i,e,r,t[u+5],12,1200080426),r=zc(r,o,i,e,t[u+6],17,-1473231341),e=zc(e,r,o,i,t[u+7],22,-45705983),i=zc(i,e,r,o,t[u+8],7,1770035416),o=zc(o,i,e,r,t[u+9],12,-1958414417),r=zc(r,o,i,e,t[u+10],17,-42063),e=zc(e,r,o,i,t[u+11],22,-1990404162),i=zc(i,e,r,o,t[u+12],7,1804603682),o=zc(o,i,e,r,t[u+13],12,-40341101),r=zc(r,o,i,e,t[u+14],17,-1502002290),i=Jc(i,e=zc(e,r,o,i,t[u+15],22,1236535329),r,o,t[u+1],5,-165796510),o=Jc(o,i,e,r,t[u+6],9,-1069501632),r=Jc(r,o,i,e,t[u+11],14,643717713),e=Jc(e,r,o,i,t[u],20,-373897302),i=Jc(i,e,r,o,t[u+5],5,-701558691),o=Jc(o,i,e,r,t[u+10],9,38016083),r=Jc(r,o,i,e,t[u+15],14,-660478335),e=Jc(e,r,o,i,t[u+4],20,-405537848),i=Jc(i,e,r,o,t[u+9],5,568446438),o=Jc(o,i,e,r,t[u+14],9,-1019803690),r=Jc(r,o,i,e,t[u+3],14,-187363961),e=Jc(e,r,o,i,t[u+8],20,1163531501),i=Jc(i,e,r,o,t[u+13],5,-1444681467),o=Jc(o,i,e,r,t[u+2],9,-51403784),r=Jc(r,o,i,e,t[u+7],14,1735328473),i=Xc(i,e=Jc(e,r,o,i,t[u+12],20,-1926607734),r,o,t[u+5],4,-378558),o=Xc(o,i,e,r,t[u+8],11,-2022574463),r=Xc(r,o,i,e,t[u+11],16,1839030562),e=Xc(e,r,o,i,t[u+14],23,-35309556),i=Xc(i,e,r,o,t[u+1],4,-1530992060),o=Xc(o,i,e,r,t[u+4],11,1272893353),r=Xc(r,o,i,e,t[u+7],16,-155497632),e=Xc(e,r,o,i,t[u+10],23,-1094730640),i=Xc(i,e,r,o,t[u+13],4,681279174),o=Xc(o,i,e,r,t[u],11,-358537222),r=Xc(r,o,i,e,t[u+3],16,-722521979),e=Xc(e,r,o,i,t[u+6],23,76029189),i=Xc(i,e,r,o,t[u+9],4,-640364487),o=Xc(o,i,e,r,t[u+12],11,-421815835),r=Xc(r,o,i,e,t[u+15],16,530742520),i=Qc(i,e=Xc(e,r,o,i,t[u+2],23,-995338651),r,o,t[u],6,-198630844),o=Qc(o,i,e,r,t[u+7],10,1126891415),r=Qc(r,o,i,e,t[u+14],15,-1416354905),e=Qc(e,r,o,i,t[u+5],21,-57434055),i=Qc(i,e,r,o,t[u+12],6,1700485571),o=Qc(o,i,e,r,t[u+3],10,-1894986606),r=Qc(r,o,i,e,t[u+10],15,-1051523),e=Qc(e,r,o,i,t[u+1],21,-2054922799),i=Qc(i,e,r,o,t[u+8],6,1873313359),o=Qc(o,i,e,r,t[u+15],10,-30611744),r=Qc(r,o,i,e,t[u+6],15,-1560198380),e=Qc(e,r,o,i,t[u+13],21,1309151649),i=Qc(i,e,r,o,t[u+4],6,-145523070),o=Qc(o,i,e,r,t[u+11],10,-1120210379),r=Qc(r,o,i,e,t[u+2],15,718787259),e=Qc(e,r,o,i,t[u+9],21,-343485551),i=$c(i,s),e=$c(e,a),r=$c(r,c),o=$c(o,h)}return[i,e,r,o]}(function(t){if(0===t.length)return[];for(var n=8*t.length,i=new Uint32Array(Yc(n)),e=0;e<n;e+=8)i[e>>5]|=(255&t[e/8])<<e%32;return i}(t),8*t.length))})),th={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function nh(t,n,i,e){switch(t){case 0:return n&i^~n&e;case 1:return n^i^e;case 2:return n&i^n&e^i&e;case 3:return n^i^e}}function ih(t,n){return t<<n|t>>>32-n}var eh,rh,oh,uh,sh,ah=Wc("v5",80,(function(t){var n=[1518500249,1859775393,2400959708,3395469782],i=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof t){var e=unescape(encodeURIComponent(t));t=[];for(var r=0;r<e.length;++r)t.push(e.charCodeAt(r))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var o=t.length/4+2,u=Math.ceil(o/16),s=new Array(u),a=0;a<u;++a){for(var c=new Uint32Array(16),h=0;h<16;++h)c[h]=t[64*a+4*h]<<24|t[64*a+4*h+1]<<16|t[64*a+4*h+2]<<8|t[64*a+4*h+3];s[a]=c}s[u-1][14]=8*(t.length-1)/Math.pow(2,32),s[u-1][14]=Math.floor(s[u-1][14]),s[u-1][15]=8*(t.length-1)&4294967295;for(var f=0;f<u;++f){for(var l=new Uint32Array(80),v=0;v<16;++v)l[v]=s[f][v];for(var d=16;d<80;++d)l[d]=ih(l[d-3]^l[d-8]^l[d-14]^l[d-16],1);for(var p=i[0],m=i[1],y=i[2],w=i[3],b=i[4],g=0;g<80;++g){var E=Math.floor(g/20),_=ih(p,5)+nh(E,m,y,w)+b+n[E]+l[g]>>>0;b=w,w=y,y=ih(m,30)>>>0,m=p,p=_}i[0]=i[0]+p>>>0,i[1]=i[1]+m>>>0,i[2]=i[2]+y>>>0,i[3]=i[3]+w>>>0,i[4]=i[4]+b>>>0}return[i[0]>>24&255,i[0]>>16&255,i[0]>>8&255,255&i[0],i[1]>>24&255,i[1]>>16&255,i[1]>>8&255,255&i[1],i[2]>>24&255,i[2]>>16&255,i[2]>>8&255,255&i[2],i[3]>>24&255,i[3]>>16&255,i[3]>>8&255,255&i[3],i[4]>>24&255,i[4]>>16&255,i[4]>>8&255,255&i[4]]})),ch=Object.freeze({__proto__:null,v1:function(t,n,i){var e=n&&i||0,r=n||new Array(16),o=(t=t||{}).node||Lc,u=void 0!==t.clockseq?t.clockseq:Pc;if(null==o||null==u){var s=t.random||(t.rng||Dc)();null==o&&(o=Lc=[1|s[0],s[1],s[2],s[3],s[4],s[5]]),null==u&&(u=Pc=16383&(s[6]<<8|s[7]))}var a=void 0!==t.msecs?t.msecs:Date.now(),c=void 0!==t.nsecs?t.nsecs:qc+1,h=a-Bc+(c-qc)/1e4;if(h<0&&void 0===t.clockseq&&(u=u+1&16383),(h<0||a>Bc)&&void 0===t.nsecs&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Bc=a,qc=c,Pc=u;var f=(1e4*(268435455&(a+=122192928e5))+c)%4294967296;r[e++]=f>>>24&255,r[e++]=f>>>16&255,r[e++]=f>>>8&255,r[e++]=255&f;var l=a/4294967296*1e4&268435455;r[e++]=l>>>8&255,r[e++]=255&l,r[e++]=l>>>24&15|16,r[e++]=l>>>16&255,r[e++]=u>>>8|128,r[e++]=255&u;for(var v=0;v<6;++v)r[e+v]=o[v];return n||Vc(r)},v3:Zc,v4:function(t,n,i){if(th.randomUUID&&!n&&!t)return th.randomUUID();var e=(t=t||{}).random||(t.rng||Dc)();if(e[6]=15&e[6]|64,e[8]=63&e[8]|128,n){i=i||0;for(var r=0;r<16;++r)n[i+r]=e[r];return n}return Vc(e)},v5:ah,NIL:"00000000-0000-0000-0000-000000000000",version:function(t){if(!xc(t))throw TypeError("Invalid UUID");return parseInt(t.slice(14,15),16)},validate:xc,stringify:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=Vc(t,n);if(!xc(i))throw TypeError("Stringified UUID is invalid");return i},parse:Gc}),hh=e((function(t,n){Object.defineProperty(n,"El",{value:!0}),n.Envelope=void 0;var i=function(){function t(t,n){this.event=t,this.eid=(0,ch.v4)(),this.ts_ms=Date.now(),this.created_at=Date.now(),this._l=new Nc.Tracker,this.kl=n}return Object.defineProperty(t.prototype,"tracker",{get:function(){return this._l},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"global",{get:function(){return this.kl},enumerable:!1,configurable:!0}),t.getAttributeTypeMap=function(){return t.attributeTypeMap},t.attributeTypeMap=[{name:"eid",baseName:"eid",type:"string"},{name:"ts_ms",baseName:"ts_ms",type:"number"},{name:"created_at",baseName:"created_at",type:"number"},{name:"event",baseName:"event",type:"Event"},{name:"global",baseName:"global",type:"Event"},{name:"tracker",baseName:"tracker",type:"Tracker"}],t}();n.Envelope=i})),fh=e((function(t,n){Object.defineProperty(n,"El",{value:!0}),n.Event=void 0;var i=function(){function t(t,n,i){this.name=t,this.ts_ms=Date.now(),this.version=n,this.fields=i}return t.getAttributeTypeMap=function(){return t.attributeTypeMap},t.attributeTypeMap=[{name:"name",baseName:"name",type:"string"},{name:"ts_ms",baseName:"ts_ms",type:"number"},{name:"version",baseName:"version",type:"number"},{name:"fields",baseName:"fields",type:"object"}],t}();n.Event=i})),lh=e((function(t,n){Object.defineProperty(n,"El",{value:!0}),n.EventContext=void 0;var i=function(){function t(t,n,i){this.name=t,this.ts_ms=Date.now(),this.version=n,this.fields=i}return t.getAttributeTypeMap=function(){return t.attributeTypeMap},t.attributeTypeMap=[{name:"name",baseName:"name",type:"string"},{name:"ts_ms",baseName:"ts_ms",type:"number"},{name:"version",baseName:"version",type:"number"},{name:"fields",baseName:"fields",type:"object"}],t}();n.EventContext=i})),vh=e((function(t,n){Object.defineProperty(n,"El",{value:!0}),n.GlobalContext=void 0;n.GlobalContext=function(t,n,i){this.name=t,this.ts_ms=Date.now(),this.version=n,this.fields=i}})),dh=e((function(t,n){var e=i&&i.Tl||(Object.create?function(t,n,i,e){void 0===e&&(e=i);var r=Object.getOwnPropertyDescriptor(n,i);r&&!("get"in r?!n.El:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return n[i]}}),Object.defineProperty(t,e,r)}:function(t,n,i,e){void 0===e&&(e=i),t[e]=n[i]}),r=i&&i.Sl||function(t,n){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(n,i)||e(n,t,i)};Object.defineProperty(n,"El",{value:!0}),n.ObjectSerializer=void 0,r(hh,n),r(fh,n),r(lh,n),r(Nc,n),r(vh,n);var o=fh,u=lh,s=Nc,a=["string","boolean","double","integer","long","float","number","any"],c={},h={Envelope:hh.Envelope,Event:o.Event,Tracker:s.Tracker,EventContext:u.EventContext},f=function(){function t(){}return t.findCorrectType=function(t,n){if(null==t)return n;if(-1!==a.indexOf(n.toLowerCase()))return n;if("Date"===n)return n;if(c[n])return n;if(!h[n])return n;var i=h[n].discriminator;if(null==i)return n;if(t[i]){var e=t[i];return h[e]?e:n}return n},t.serialize=function(n,i){if(null==n)return n;if(-1!==a.indexOf(i.toLowerCase()))return n;if(0===i.lastIndexOf("Array<",0)){var e=i.replace("Array<","");e=e.substring(0,e.length-1);var r=[];for(var o in n){var u=n[o];r.push(t.serialize(u,e))}return r}if("Date"===i)return n.toISOString();if(c[i])return n;if(!h[i])return n;i=this.findCorrectType(n,i);var s=h[i].getAttributeTypeMap(),f={};for(var o in s){var l=s[o];f[l.baseName]=t.serialize(n[l.name],l.type)}return f},t.deserialize=function(n,i){if(i=t.findCorrectType(n,i),null==n)return n;if(-1!==a.indexOf(i.toLowerCase()))return n;if(0===i.lastIndexOf("Array<",0)){var e=i.replace("Array<","");e=e.substring(0,e.length-1);var r=[];for(var o in n){var u=n[o];r.push(t.deserialize(u,e))}return r}if("Date"===i)return new Date(n);if(c[i])return n;if(!h[i])return n;var s=new h[i],f=h[i].getAttributeTypeMap();for(var o in f){var l=f[o];s[l.name]=t.deserialize(n[l.baseName],l.type)}return s},t}();n.ObjectSerializer=f})),ph=e((function(t,n){Object.defineProperty(n,"El",{value:!0}),n.formatRequestEvent=n.parseJwt=n.getCookie=void 0,n.getCookie=function(t){if("undefined"==typeof document)return null;var n=document.cookie.match(new RegExp("(;\\s)?".concat(t,"=")));if(!n||0==n.length||void 0===n.index)return null;var i=document.cookie.indexOf(";",n.index+1),e=n.index+n[0].length,r=-1===i?document.cookie.substr(e):document.cookie.substring(e,i);return decodeURIComponent(r)},n.parseJwt=function(t){var n=t.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),i=decodeURIComponent(atob(n).split("").map((function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(i)},n.formatRequestEvent=function(t){var n=t.split(".");if(n.length<=2)return t;var i=n.pop();return"".concat(n.join("_"),".").concat(i)}})),mh=e((function(t,n){var e,r=i&&i.Al||function(t,n,i,e){return new(i||(i=di))((function(r,o){function u(t){try{a(e.next(t))}catch(t){o(t)}}function s(t){try{a(e.throw(t))}catch(t){o(t)}}function a(t){t.done?r(t.value):function(t){return t instanceof i?t:new i((function(n){n(t)}))}(t.value).then(u,s)}a((e=e.apply(t,n||[])).next())}))},o=i&&i.Ml||function(t,n){var i,e,r,o,u={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof C&&(o[C.iterator]=function(){return this}),o;function s(s){return function(a){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(u=0)),u;)try{if(i=1,e&&(r=2&s[0]?e.return:s[0]?e.throw||((r=e.return)&&r.call(e),0):e.next)&&!(r=r.call(e,s[1])).done)return r;switch(e=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return u.label++,{value:s[1],done:!1};case 5:u.label++,e=s[1],s=[0];continue;case 7:s=u.ops.pop(),u.trys.pop();continue;default:if(!((r=(r=u.trys).length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){u=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){u.label=s[1];break}if(6===s[0]&&u.label<r[1]){u.label=r[1],r=s;break}if(r&&u.label<r[2]){u.label=r[2],u.ops.push(s);break}r[2]&&u.ops.pop(),u.trys.pop();continue}s=n.call(t,u)}catch(t){s=[6,t],e=0}finally{i=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},u=i&&i.Ol||function(t){var n="function"==typeof C&&C.iterator,i=n&&t[n],e=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")},s=i&&i.Rl||function(t,n){var i="function"==typeof C&&t[C.iterator];if(!i)return t;var e,r,o=i.call(t),u=[];try{for(;(void 0===n||n-- >0)&&!(e=o.next()).done;)u.push(e.value)}catch(t){r={error:t}}finally{try{e&&!e.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return u};Object.defineProperty(n,"El",{value:!0}),n.BigPictureClient=n.Configuration=n.Service=void 0,function(t){t.FRESNEL_PROD="https://fresnel-events.vimeocdn.com",t.FRESNEL_DEV="https://fresnel-event-staging.vimeows.com"}(e=n.Service||(n.Service={}));var a=function(t,n,i){void 0===n&&(n=null),void 0===i&&(i=null),this.service=t,this.globalBPO=n,this.contexts=i};n.Configuration=a;var c=function(){function t(){}return Object.defineProperty(t,"isInitalized",{get:function(){return Boolean(t.conf.globalBPO)},enumerable:!1,configurable:!0}),t.configure=function(n){t.conf=n,t.WAIT_QUEUE.length>0&&(t.WAIT_QUEUE.map((function(n){return t.sendEvent(n)})),t.WAIT_QUEUE=[])},t.updateObject=function(n,i){return r(this,void 0,void 0,(function(){var e,r,a,c,h,f,l;return o(this,(function(o){try{for(e=u(Object.entries(n)),r=e.next();!r.done;r=e.next())if(a=s(r.value,2),c=a[0],h=a[1],c in i){if(h instanceof Object)return i[c]instanceof Object?(t.updateObject(h,i[c]),[2]):(i[c]=h,[2]);i[c]=h}}catch(t){f={error:t}}finally{try{r&&!r.done&&(l=e.return)&&l.call(e)}finally{if(f)throw f.error}}return[2]}))}))},t.updateContext=function(n){return r(this,void 0,void 0,(function(){return o(this,(function(i){return"global"==n.context&&t.conf.globalBPO&&t.updateObject(n.fields,t.conf.globalBPO.fields),[2]}))}))},t.sendEvent=function(n,i){return r(this,void 0,void 0,(function(){var e,r,u,s,a;return o(this,(function(o){switch(o.label){case 0:if(null==n)throw new Error("Required parameter event was null or undefined when calling sendEvent.");return t.isInitalized?(e=JSON.stringify(dh.ObjectSerializer.serialize([new hh.Envelope(n,this.conf.globalBPO)],"Array<Envelope>")),r=(0,ph.formatRequestEvent)(n.name),u="".concat(this.conf.service,"/add/").concat(encodeURIComponent(r)),navigator.sendBeacon&&!i?[3,2]:(s={method:"POST",headers:{"Content-Type":"application/json","User-Agent":navigator.userAgent,Origin:location.origin,Referer:document.referrer},body:e},i&&(s.headers.Authorization=i),[4,fetch(u,s)])):(t.WAIT_QUEUE.push(n),t.waitAndFlushQueue(),[2]);case 1:return o.sent(),[3,3];case 2:a=new Blob([e]),navigator.sendBeacon(u,a),o.label=3;case 3:return[2]}}))}))},t.sendEventWithContexts=function(n,i){return r(this,void 0,void 0,(function(){var e,r,a,c,h,f,l,v,d,p,m,y,w,b,g;return o(this,(function(o){switch(o.label){case 0:if(null==n)throw new Error("Required parameter event was null or undefined when calling sendEvent.");if(!t.isInitalized)return t.WAIT_QUEUE.push(n),t.waitAndFlushQueue(),[2];e=new hh.Envelope(n,this.conf.globalBPO),(r=dh.ObjectSerializer.serialize([e],"Array<Envelope>"))[0].contexts={};try{for(a=u(Object.entries(i)),c=a.next();!c.done;c=a.next())h=s(c.value,2),f=h[0],l=h[1],v=dh.ObjectSerializer.serialize(l,"EventContext"),r[0].contexts[f]=v}catch(t){b={error:t}}finally{try{c&&!c.done&&(g=a.return)&&g.call(a)}finally{if(b)throw b.error}}return d=JSON.stringify(r),p=(0,ph.formatRequestEvent)(n.name),m="".concat(this.conf.service,"/add/").concat(encodeURIComponent(p)),navigator.sendBeacon?[3,2]:(y={method:"POST",headers:{"Content-Type":"application/json","User-Agent":navigator.userAgent,Origin:location.origin,Referer:document.referrer},body:d},[4,fetch(m,y)]);case 1:return o.sent(),[3,3];case 2:w=new Blob([d]),navigator.sendBeacon(m,w),o.label=3;case 3:return[2]}}))}))},t.waitAndFlushQueue=function(){t.flushQueueTimeoutHandler||(t.flushQueueTimeoutHandler=setTimeout((function(){t.WAIT_QUEUE.length>0&&(t.WAIT_QUEUE=[])}),t.FLUSH_QUEUE_TIMEOUT))},t.FLUSH_QUEUE_TIMEOUT=1e4,t.conf=new a(e.FRESNEL_PROD),t.WAIT_QUEUE=[],t}();n.BigPictureClient=c})),yh=e((function(t,n){Object.defineProperty(n,"El",{value:!0})}));e((function(t,n){var e=i&&i.Tl||(Object.create?function(t,n,i,e){void 0===e&&(e=i);var r=Object.getOwnPropertyDescriptor(n,i);r&&!("get"in r?!n.El:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return n[i]}}),Object.defineProperty(t,e,r)}:function(t,n,i,e){void 0===e&&(e=i),t[e]=n[i]}),r=i&&i.Sl||function(t,n){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(n,i)||e(n,t,i)};Object.defineProperty(n,"El",{value:!0}),r(mh,n),r(dh,n),r(yh,n)})),function(t){t.WEB_GLOBAL="vimeo.web_global",t.COPY_VIDEO_EMBED_CODE="workflow.copy_video_embed_code",t.PLAYER_PERFORMANCE_MEASUREMENT="vimeo.player_performance_measurement",t.CHAPTER_SEGMENT_CLICK="vimeo.chapter_segment_click",t.CLICK="vimeo.click",t.TIMING_OBJECT_CONNECT="vimeo.timing_object_connect",t.TIMING_OBJECT_DISCONNECT="vimeo.timing_object_disconnect",t.EMBEDDED_TRANSCRIPT_CLICK="vimeo.embedded_transcript_click",t.CLOSED_CAPTIONS_CLICK="vimeo.closed_captions_click",t.MULTI_AUDIO_TRACK_CLICK="vimeo.multi_audio_track_click",t.VIEW_PLAYER_CSAT_V1="vimeo.view_player_csat_v1",t.SELECT_THUMBS_UP_PLAYER_CSAT_V1="vimeo.select_thumbs_up_player_csat_v1",t.SELECT_THUMBS_DOWN_PLAYER_CSAT_V1="vimeo.select_thumbs_down_player_csat_v1",t.DISMISS_PLAYER_CSAT_V1="vimeo.dismiss_player_csat_v1",t.DVR_MODE_ENTERED="vimeo.dvr_mode_entered",t.SEEK_BEHIND_LIVE_EDGE="vimeo.seek_behind_live_edge",t.SKIP_TO_LIVE_CLICK="vimeo.skip_to_live_click",t.SEEK_TO_LIVE_EDGE="vimeo.seek_to_live_edge",t.PLAY_VIDEO="vimeo.play_video",t.FINISH_VIDEO="vimeo.finish_video",t.START_VIDEO_SCRUB="vimeo.start_video_scrub",t.END_VIDEO_SCRUB="vimeo.end_video_scrub",t.WATCH_VIDEO_HEARTBEAT="vimeo.watch_video_heartbeat",t.EMBED_SEGMENT="vimeo.embed_segment",t.PLAY_SEGMENT="vimeo.play_segment",t.WATCH_FULL_VIDEO="vimeo.watch_full_video",t.SEEK_INSIDE_SEGMENT="vimeo.seek_inside_segment",t.SHARE_CHAPTER="vimeo.share_chapter",t.CHAPTER_PLAYED="vimeo.chapter_played"}(oh||(oh={})),function(t){t.TEAM="team_context",t.ACTION="action_context",t.VIEW="view_context",t.WEB="web_context",t.VIDEO="video_context",t.PLAYER="player_context",t.LIVE="live_context",t.PRODUCT_ANALYTICS="product_analytics_context",t.TARGET_TEAM="target_team_context",t.USER_FACING_VIDEO_ANALYTICS="user_facing_video_analytics_context"}(uh||(uh={})),function(t){t[t.WEB_GLOBAL=5]="WEB_GLOBAL",t[t.COPY_VIDEO_EMBED_CODE=5]="COPY_VIDEO_EMBED_CODE",t[t.PLAYER_PERFORMANCE_MEASUREMENT=1]="PLAYER_PERFORMANCE_MEASUREMENT",t[t.CHAPTER_SEGMENT_CLICK=2]="CHAPTER_SEGMENT_CLICK",t[t.CLICK=83]="CLICK",t[t.TIMING_OBJECT_CONNECT=1]="TIMING_OBJECT_CONNECT",t[t.TIMING_OBJECT_DISCONNECT=1]="TIMING_OBJECT_DISCONNECT",t[t.EMBEDDED_TRANSCRIPT_CLICK=6]="EMBEDDED_TRANSCRIPT_CLICK",t[t.CLOSED_CAPTIONS_CLICK=2]="CLOSED_CAPTIONS_CLICK",t[t.MULTI_AUDIO_TRACK_CLICK=1]="MULTI_AUDIO_TRACK_CLICK",t[t.PLAY_VIDEO=1]="PLAY_VIDEO",t[t.FINISH_VIDEO=2]="FINISH_VIDEO",t[t.START_VIDEO_SCRUB=2]="START_VIDEO_SCRUB",t[t.END_VIDEO_SCRUB=1]="END_VIDEO_SCRUB",t[t.WATCH_VIDEO_HEARTBEAT=2]="WATCH_VIDEO_HEARTBEAT",t[t.EMBED_SEGMENT=1]="EMBED_SEGMENT",t[t.PLAY_SEGMENT=1]="PLAY_SEGMENT",t[t.WATCH_FULL_VIDEO=1]="WATCH_FULL_VIDEO",t[t.SEEK_INSIDE_SEGMENT=1]="SEEK_INSIDE_SEGMENT",t[t.SHARE_CHAPTER=1]="SHARE_CHAPTER",t[t.CHAPTER_PLAYED=1]="CHAPTER_PLAYED",t[t.TEAM=5]="TEAM",t[t.ACTION=5]="ACTION",t[t.VIEW=3]="VIEW",t[t.WEB=10]="WEB",t[t.VIDEO=6]="VIDEO",t[t.PLAYER=2]="PLAYER",t[t.LIVE=6]="LIVE",t[t.PRODUCT_ANALYTICS=41]="PRODUCT_ANALYTICS",t[t.TARGET_TEAM=6]="TARGET_TEAM",t[t.USER_FACING_VIDEO_ANALYTICS=1]="USER_FACING_VIDEO_ANALYTICS",t[t.DEFAULT=-1]="DEFAULT"}(sh||(sh={})),x(eh={},oh.WEB_GLOBAL,sh.WEB_GLOBAL),x(eh,oh.COPY_VIDEO_EMBED_CODE,sh.COPY_VIDEO_EMBED_CODE),x(eh,oh.PLAYER_PERFORMANCE_MEASUREMENT,sh.PLAYER_PERFORMANCE_MEASUREMENT),x(eh,oh.CHAPTER_SEGMENT_CLICK,sh.CHAPTER_SEGMENT_CLICK),x(eh,oh.CLICK,sh.CLICK),x(eh,oh.TIMING_OBJECT_CONNECT,sh.TIMING_OBJECT_CONNECT),x(eh,oh.TIMING_OBJECT_DISCONNECT,sh.TIMING_OBJECT_DISCONNECT),x(eh,oh.EMBEDDED_TRANSCRIPT_CLICK,sh.EMBEDDED_TRANSCRIPT_CLICK),x(eh,oh.CLOSED_CAPTIONS_CLICK,sh.CLOSED_CAPTIONS_CLICK),x(eh,oh.MULTI_AUDIO_TRACK_CLICK,sh.MULTI_AUDIO_TRACK_CLICK),x(eh,oh.VIEW_PLAYER_CSAT_V1,sh.DEFAULT),x(eh,oh.SELECT_THUMBS_UP_PLAYER_CSAT_V1,sh.DEFAULT),x(eh,oh.SELECT_THUMBS_DOWN_PLAYER_CSAT_V1,sh.DEFAULT),x(eh,oh.DISMISS_PLAYER_CSAT_V1,sh.DEFAULT),x(eh,oh.DVR_MODE_ENTERED,sh.DEFAULT),x(eh,oh.SEEK_BEHIND_LIVE_EDGE,sh.DEFAULT),x(eh,oh.SKIP_TO_LIVE_CLICK,sh.DEFAULT),x(eh,oh.SEEK_TO_LIVE_EDGE,sh.DEFAULT),x(eh,oh.PLAY_VIDEO,sh.PLAY_VIDEO),x(eh,oh.FINISH_VIDEO,sh.FINISH_VIDEO),x(eh,oh.START_VIDEO_SCRUB,sh.START_VIDEO_SCRUB),x(eh,oh.END_VIDEO_SCRUB,sh.END_VIDEO_SCRUB),x(eh,oh.WATCH_VIDEO_HEARTBEAT,sh.WATCH_VIDEO_HEARTBEAT),x(eh,oh.EMBED_SEGMENT,sh.EMBED_SEGMENT),x(eh,oh.PLAY_SEGMENT,sh.PLAY_SEGMENT),x(eh,oh.WATCH_FULL_VIDEO,sh.WATCH_FULL_VIDEO),x(eh,oh.SEEK_INSIDE_SEGMENT,sh.SEEK_INSIDE_SEGMENT),x(eh,oh.SHARE_CHAPTER,sh.SHARE_CHAPTER),x(eh,oh.CHAPTER_PLAYED,sh.CHAPTER_PLAYED),x(eh,uh.TEAM,sh.TEAM),x(eh,uh.ACTION,sh.ACTION),x(eh,uh.VIEW,sh.VIEW),x(eh,uh.WEB,sh.WEB),x(eh,uh.VIDEO,sh.VIDEO),x(eh,uh.PLAYER,sh.PLAYER),x(eh,uh.LIVE,sh.LIVE),x(eh,uh.PRODUCT_ANALYTICS,sh.PRODUCT_ANALYTICS),x(eh,uh.USER_FACING_VIDEO_ANALYTICS,sh.USER_FACING_VIDEO_ANALYTICS),x(eh,uh.TARGET_TEAM,sh.TARGET_TEAM);var wh,bh=[uh.PLAYER,uh.VIDEO,uh.WEB,uh.TEAM];function gh(t){return Math.random()<=t}function Eh(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,e=gh(i);e&&Rc(t,n)}x(rh={},oh.VIEW_PLAYER_CSAT_V1,[].concat(bh,[uh.VIEW])),x(rh,oh.SELECT_THUMBS_UP_PLAYER_CSAT_V1,[].concat(bh,[uh.ACTION])),x(rh,oh.SELECT_THUMBS_DOWN_PLAYER_CSAT_V1,[].concat(bh,[uh.ACTION])),x(rh,oh.DISMISS_PLAYER_CSAT_V1,[].concat(bh,[uh.ACTION])),x(rh,oh.DVR_MODE_ENTERED,[].concat(bh,[uh.VIEW,uh.LIVE,uh.PRODUCT_ANALYTICS])),x(rh,oh.SEEK_BEHIND_LIVE_EDGE,[].concat(bh,[uh.ACTION,uh.LIVE,uh.PRODUCT_ANALYTICS])),x(rh,oh.SKIP_TO_LIVE_CLICK,[].concat(bh,[uh.ACTION,uh.LIVE,uh.PRODUCT_ANALYTICS])),x(rh,oh.SEEK_TO_LIVE_EDGE,[].concat(bh,[uh.ACTION,uh.LIVE,uh.PRODUCT_ANALYTICS])),x(rh,oh.PLAY_VIDEO,[].concat(bh,[uh.ACTION,uh.LIVE,uh.PRODUCT_ANALYTICS,uh.TARGET_TEAM,uh.USER_FACING_VIDEO_ANALYTICS])),x(rh,oh.FINISH_VIDEO,[].concat(bh,[uh.ACTION,uh.LIVE,uh.PRODUCT_ANALYTICS,uh.TARGET_TEAM,uh.USER_FACING_VIDEO_ANALYTICS])),x(rh,oh.START_VIDEO_SCRUB,[].concat(bh,[uh.ACTION,uh.LIVE,uh.PRODUCT_ANALYTICS,uh.TARGET_TEAM,uh.USER_FACING_VIDEO_ANALYTICS])),x(rh,oh.END_VIDEO_SCRUB,[].concat(bh,[uh.ACTION,uh.LIVE,uh.PRODUCT_ANALYTICS,uh.TARGET_TEAM,uh.USER_FACING_VIDEO_ANALYTICS])),x(rh,oh.WATCH_VIDEO_HEARTBEAT,[].concat(bh,[uh.ACTION,uh.LIVE,uh.PRODUCT_ANALYTICS,uh.TARGET_TEAM,uh.USER_FACING_VIDEO_ANALYTICS])),x(rh,oh.WATCH_FULL_VIDEO,[].concat(bh,[uh.ACTION,uh.PRODUCT_ANALYTICS])),x(rh,oh.SEEK_INSIDE_SEGMENT,[].concat(bh,[uh.ACTION,uh.PRODUCT_ANALYTICS])),x(rh,oh.SHARE_CHAPTER,[].concat(bh,[uh.ACTION,uh.PRODUCT_ANALYTICS])),x(rh,oh.CHAPTER_PLAYED,[].concat(bh,[uh.ACTION,uh.PRODUCT_ANALYTICS])),x(rh,oh.EMBED_SEGMENT,[].concat(bh,[uh.VIEW,uh.PRODUCT_ANALYTICS])),x(rh,oh.PLAY_SEGMENT,[].concat(bh,[uh.ACTION,uh.PRODUCT_ANALYTICS])),function(t){t.WORKFLOW="Workflow",t.PLAYBACK="Playback"}(wh||(wh={})),window.addEventListener("unhandledrejection",(function(t){t.preventDefault(),t.reason&&Eh(t.reason,{unhandled_rejection:1})}));var _h,kh={setUp:function(t){!function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pa.VimeoPlayer;kc&&(Oc(t,n),newrelic.setErrorHandler((function(n){var i;return!!Mc(n,t)||((null==n||null==(i=n.message)?void 0:i.startsWith("Non-Error exception captured"))&&newrelic.addToTrace({name:"nonErrorException",start:Date.now()}),!1)})))}(t.config)},captureException:Eh,captureMessage:function(t){},captureBreadcrumb:function(t){!function(t){kc&&newrelic.addToTrace({name:t,start:Date.now()})}(t)}};function Th(t){var n=t.events,i=null,e=null,r=null,o=null,u=null,s={video:{},request:{},embed:{}};function a(){return e&&e-6e4<=Date.now()}function c(t){var n=Date.now()+1e3*t;return u=setTimeout((function(){"onLine"in navigator&&!navigator.onLine||o||(o=f().catch(kh.captureException))}),1e3*t-6e4-5e3),n}function h(t){var n,r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};clearTimeout(u);var a=i;if(isNaN(t)&&"string"!=typeof t)return e=c((i=t).request.expires),di.resolve({old:a,loaded:i});Date.now();var h=(s=qs(s,i)).request.referrer;h&&(o.referrer=h),s.video.webinar&&s.video.webinar.registrant&&(o.webinar_registrant_uuid=s.video.webinar.registrant),_h||(_h=ma(t));var f=_h||((null==(n=i)?void 0:n.player_url)?"https://".concat(null==(r=i)?void 0:r.player_url):""),l=ya(f,t,o);return Tr(l,{withCredentials:!0,throwHttpErrors:!1}).json().then((function(t){return(i=t).view!==Aa&&(e=c(i.request.expires),s.request.session&&i.video.id===s.video.id&&(i.request.session=s.request.session),h&&(i.request.referrer=h),s.embed.player_id&&(i.embed.player_id=s.embed.player_id),s.embed.on_site&&(i.embed.on_site=1,i.embed.context=s.embed.context)),Date.now(),{old:a,loaded:i}})).catch((function(t){kh.captureException(t)}))}function f(){var t;clearTimeout(u),Date.now();var r=null==(t=i)?void 0:t.request.referrer,s=i.request,a=s.signature,h=s.session,f=s.timestamp,l=s.expires,v=i.request.ott_chromecast_token,d="https://".concat(i.player_url,"/video/").concat(i.video.id,"/config/request?session=").concat(h,"&signature=").concat(a,"&time=").concat(f,"&expires=").concat(l);return v&&(d="".concat(d,"&ott_chromecast_token=").concat(v)),r&&(d+="".concat(-1===d.indexOf("?")?"?":"&","referrer=").concat(encodeURIComponent(r))),Tr(d,{withCredentials:!0,retry:3}).json().then((function(t){return i.request=t,r&&(i.request.referrer=r),e=c(i.request.expires),Date.now(),o=null,n.fire(Sa.rf),i.request})).catch((function(t){var i=lc();throw n.fire(Sa.mc,i.id,i),t}))}return window.addEventListener("online",(function(){a()&&(o=f().catch(kh.captureException))})),n.on(Sa.mc,(function(t){o||"media-url-expired"!==t||(o=f().catch(kh.captureException))})),{get isExpired(){return a()},load:function(t,n){return h(t,n)},reload:function(){var t;return(null==(t=i)?void 0:t.video.id)?h(i.video.id):di.reject(new Error("No config loaded."))},toJSON:function(){return i},get config(){return i},set config(t){i=t},verify:function(){return a()?(o||(o=f()),o):di.resolve(i.request)},loadRequest:function(){return f()},get F(){return r},set F(t){r=t}}}t.BarebonePlayer=function(t,n){Ls(kh);var i=null,e=document.createElement("style");e.setAttribute("type","text/css"),e.textContent="\n    .vp-telecine video {\n        width: 100%;\n        height: auto;\n    }\n",t.appendChild(e);var r=document.createElement("div");r.className="vp-video-wrapper";var o=document.createElement("div");o.className="vp-video";var u=document.createElement("div");u.className="vp-telecine",o.appendChild(u),r.appendChild(o),t.appendChild(r);var s=ai(),a=new Th({events:s});function c(t){var n=vc[t.name],i="function"==typeof n?n():{};"media-url-expired"===i.id&&s.fire(Sa.mc,i.id,i)}return s.on(Sa.rf,(function(){(null==a?void 0:a.config)&&i&&i.loadVideo(a.config)})),a.load(n).then((function(){return(i=new va(u,a.config)).on(Ki.ERROR,c),i.loadVideo(a.config),i}))},Object.defineProperty(t,"El",{value:!0})}(this.window=this.window||{});

